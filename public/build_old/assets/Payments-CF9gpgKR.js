import{d as v}from"./datatable-ChDCLVWf.js";import{_ as M,d as N,b as T,E as U,a6 as x,V as B,r as E,o as d,i as w,w as t,a as o,j as A,c,l as r,t as u,G as y,k as p,aL as D,aM as S,H as F,aN as H,J as P,q as j,h as q}from"./app-DvNATx7Y.js";import{U as z}from"./UserInfo-BLXDo1tT.js";import{f as G}from"./fields-CGH9JKlQ.js";const J=N({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:z},setup(e){const{paymentsColumns:f,paymentsHashableColumns:b}=G(),{formatDate:g,formatAmountCurrency:h,selectedWarehouse:C}=T(),n=v();U(()=>{l(e)});const l=a=>{const s={};a.user_id&&a.user_id!=null&&(s.user_id=a.user_id),n.tableUrl.value={url:"payments?fields=id,xid,date,payment_type,amount,payment_number,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},payment_mode_id,x_payment_mode_id,paymentMode{id,xid,name,mode_type}",filters:s,extraFilters:{dates:a.dates,payment_mode:a.paymentMode}},n.hashable.value=[...b],n.table.sorter={field:"date",order:"desc"},n.exportDetails.value={allowExport:!0,exportType:"payment_reports"},n.fetch({page:1})};x(e,(a,s)=>{l(a)}),x(C,(a,s)=>{l(e)});const i=B(()=>{let a=0;return n.table.data.forEach(s=>{a+=s.amount}),{totalAmount:a}});return{paymentsColumns:f,...n,formatDate:g,formatAmountCurrency:h,totals:i}}}),L={class:"table-responsive"};function R(e,f,b,g,h,C){const n=E("UserInfo"),l=D,i=S,a=F,s=H,V=P,I=j,$=q;return d(),w($,null,{default:t(()=>[o(I,{span:24},{default:t(()=>[A("div",L,[o(V,{columns:e.paymentsColumns,"row-key":m=>m.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"payment-reports-table",bordered:"",size:"middle"},{bodyCell:t(({column:m,record:_})=>{var k;return[m.dataIndex==="date"?(d(),c(y,{key:0},[r(u(e.formatDate(_.date)),1)],64)):p("",!0),m.dataIndex==="payment_type"?(d(),c(y,{key:1},[r(u(_.payment_type=="in"?e.$t("menu.payment_in"):e.$t("menu.payment_out")),1)],64)):p("",!0),m.dataIndex==="mode_type"?(d(),c(y,{key:2},[r(u(_.payment_mode&&_.payment_mode.name?(k=_.payment_mode)==null?void 0:k.name:"-"),1)],64)):p("",!0),m.dataIndex==="user_id"?(d(),w(n,{key:3,user:_.user},null,8,["user"])):p("",!0),m.dataIndex==="amount"?(d(),c(y,{key:4},[r(u(_.amount),1)],64)):p("",!0)]}),summary:t(()=>[o(s,null,{default:t(()=>[o(l,{"col-span":4}),o(l,{"col-span":1},{default:t(()=>[o(i,{strong:""},{default:t(()=>[r(u(e.$t("common.total")),1)]),_:1})]),_:1}),o(l,{"col-span":1},{default:t(()=>[o(i,{strong:""},{default:t(()=>[o(a,null,{default:t(()=>[r(u(e.totals.totalAmount),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})}const X=M(J,[["render",R]]);export{X as P};
