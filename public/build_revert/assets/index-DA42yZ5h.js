import{_ as q,Q as G,az as Q,aA as R,b0 as W,a5 as J,cp as K,W as X,cn as Z,aH as $,cq as ee,cr as te,Y as ae,b as le,r,e as ne,z as oe,c as _,a as e,w as a,D as v,p as C,f as se,o as d,j as c,t as i,g as z,L as V,i as y,h,ay as ie,aB as de,aC as ce,q as ue,aD as _e,bc as re,am as me,C as fe,bA as ge,E as ye,aM as ke,G as pe,aG as ve}from"./app-OikDM5Kw.js";import{h as he}from"./hrmManagement-CoX4Drh7.js";import{A as Ce}from"./AdminPageHeader-MbAN4P4t.js";import{A as be}from"./AttendanceSidebar-Ba6R-0y8.js";import{A as xe}from"./AttendanceStatus-BdZovEPS.js";import{C as De}from"./CalendarFilled-DiMswy-R.js";import{C as we}from"./CarOutlined-8tSqqfhd.js";import{C as Ae}from"./CalculatorOutlined-DvmKEJFz.js";import"./index-CaGusbUe.js";import"./ScheduleOutlined-Dj7wWgnj.js";import"./TabletOutlined-vCKQCqfa.js";const Ie={components:{PlusOutlined:G,EditOutlined:Q,DeleteOutlined:R,CheckOutlined:W,CloseOutlined:J,CalendarFilled:De,ArrowRightOutlined:K,CarOutlined:we,CalculatorOutlined:Ae,ClockCircleOutlined:X,CheckCircleOutlined:Z,ExclamationCircleOutlined:$,CloseCircleOutlined:ee,CalendarOutlined:te,AdminPageHeader:Ce,AttendanceSidebar:be,AttendanceStatus:xe},setup(){const{t:n}=ae(),{getMonthNameByNumber:u,formatMinutes:E,monthArrays:t}=he(),{dayjs:B,formatTime:H,formatDate:L,user:N,permsArray:b}=le(),m=r({month:B().format("MM"),year:B(),user_id:void 0}),Y=r([{title:n("attendance.date"),dataIndex:"date"},{title:n("attendance.status"),dataIndex:"status"},{title:n("attendance.clock_in"),dataIndex:"clock_in"},{title:n("attendance.clock_out"),dataIndex:"clock_out"},{title:n("attendance.clocked_time"),dataIndex:"clocked_time"},{title:n("attendance.other_details"),dataIndex:"other_details"}]),x=r(1),s=ne({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1}),D=r([]),P="users?limit=10000",M=r(0),k=r(0),w=r(0),f=r(0),g=r(0),S=r(0),A=r(0),T=r(0),I=r(0);oe(()=>{const o=axiosAdmin.get(P);Promise.all([o]).then(([l])=>{D.value=l.data,m.value={...m.value,user_id:N.value.xid},O()})});const F=()=>{x.value=1,O()},O=()=>{s.loading=!0;var o=m.value.month,l=m.value.year.format("YYYY");const j=s.pagination.pageSize;(x.value-1)*j;var U=`attendances/summary-month?month=${o}&year=${l}`;m.value.user_id&&(U+=`&user_id=${m.value.user_id}`),axiosAdmin.get(U).then(p=>{s.data=p.data.data,M.value=p.data.office_time,w.value=p.data.working_days,k.value=p.data.present_days,f.value=p.data.clock_in_duration,g.value=p.data.total_office_time,A.value=p.data.total_late_days,I.value=p.data.half_days,S.value=(f.value/g.value*100).toFixed(2),T.value=(A.value/w.value*100).toFixed(2),s.loading=!1})};return{table:s,currentPage:x,columns:Y,getMonthNameByNumber:u,filters:m,filterData:F,permsArray:b,officeTime:M,totalPresentDays:k,workingDays:w,clockInDuration:f,totalOfficeTime:g,clockInDurationPercentage:S,totalLateDays:A,totalLateDaysPercentage:T,halfDayCount:I,setUrlData:O,allUsers:D,formatTime:H,formatDate:L,formatMinutes:E,monthArrays:t}}},Oe={class:"mb-30"},Pe={class:"table-responsive"},Me={key:0,style:{color:"red"}},Se={key:0,style:{width:"100%"}},Te={key:0},ze={key:1},Be={key:0},Le={key:1};function Ne(n,u,E,t,B,H){const L=ie,N=C("router-link"),b=de,m=ce,Y=C("AdminPageHeader"),x=C("AttendanceSidebar"),s=ue,D=ve,P=_e,M=re,k=se,w=C("admin-page-filters"),f=me,g=fe,S=C("AttendanceStatus"),A=ge,T=ye,I=ke,F=pe,O=C("admin-page-table-content");return d(),_(v,null,[e(Y,null,{header:a(()=>[e(L,{title:n.$t("menu.remaining_leaves"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[e(m,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[e(b,null,{default:a(()=>[e(N,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(n.$t("menu.dashboard")),1)]),_:1})]),_:1}),e(b,null,{default:a(()=>[c(i(n.$t("menu.hrm")),1)]),_:1}),e(b,null,{default:a(()=>[c(i(n.$t("menu.remaining_leaves")),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(s,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[e(x)]),_:1}),e(s,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[e(w,null,{default:a(()=>[e(k,{gutter:[16,16],align:"middle"},{default:a(()=>[e(s,{xs:24,sm:24,md:12,lg:10,xl:10}),e(s,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[e(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t.permsArray.includes("attendances_view")||t.permsArray.includes("admin")?(d(),z(s,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[e(P,{value:t.filters.user_id,"onUpdate:value":u[0]||(u[0]=o=>t.filters.user_id=o),onChange:t.filterData,"show-search":"",style:{width:"100%"},placeholder:n.$t("common.select_default_text",[n.$t("leave.user")])},{default:a(()=>[(d(!0),_(v,null,V(t.allUsers,o=>(d(),z(D,{key:o.xid,value:o.xid,title:o.name},{default:a(()=>[c(i(o.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):y("",!0),e(s,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[e(M,{value:t.filters.year,"onUpdate:value":u[1]||(u[1]=o=>t.filters.year=o),placeholder:n.$t("common.select_default_text",[n.$t("holiday.year")]),picker:"year",onChange:t.filterData,style:{width:"100%"},allowClear:!1},null,8,["value","placeholder","onChange"])]),_:1}),e(s,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[e(P,{value:t.filters.month,"onUpdate:value":u[2]||(u[2]=o=>t.filters.month=o),placeholder:n.$t("common.select_default_text",[n.$t("holiday.month")]),allowClear:!1,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:t.filterData},{default:a(()=>[(d(!0),_(v,null,V(t.monthArrays,o=>(d(),z(D,{key:o.name,value:o.value},{default:a(()=>[c(i(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(O,null,{default:a(()=>[h("div",Oe,[e(k,{gutter:16},{default:a(()=>[e(s,{xs:24,sm:24,md:8,lg:5},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{title:n.$t("attendance.present_working_days"),value:`${t.totalPresentDays} / ${t.workingDays} ${n.$t("attendance.days")}`,"value-style":{color:t.totalPresentDays>=t.workingDays?"#3f8600":"#cf1322"},style:{"margin-right":"50px"}},null,8,["title","value","value-style"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:5},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{title:n.$t("attendance.total_office_time"),value:t.formatMinutes(t.totalOfficeTime),"value-style":{color:"#3f8600"}},null,8,["title","value"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:6},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{title:n.$t("attendance.total_worked_time"),value:`${t.formatMinutes(t.clockInDuration)} (${t.clockInDurationPercentage}%)`,"value-style":{color:t.clockInDuration>=t.totalOfficeTime?"#3f8600":"#cf1322"}},null,8,["title","value","value-style"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:5},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{title:n.$t("attendance.late"),value:t.totalLateDaysPercentage>0?`${t.totalLateDays} ${n.$t("attendance.days")} (${t.totalLateDaysPercentage}%)`:"--",class:"demo-class","value-style":{color:"#cf1322"}},null,8,["title","value"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:3},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{title:n.$t("attendance.half_days"),value:`${t.halfDayCount}`,class:"demo-class","value-style":{color:"#cf1322"}},null,8,["title","value"])]),_:1})]),_:1})]),_:1})]),e(k,null,{default:a(()=>[e(s,{span:24},{default:a(()=>[h("div",Pe,[e(F,{columns:t.columns,"row-key":o=>o.xid,"data-source":t.table.data,pagination:!1,loading:t.table.loading,size:"middle"},{bodyCell:a(({column:o,record:l})=>[o.dataIndex=="date"?(d(),_(v,{key:0},[c(i(t.formatDate(l.date)),1)],64)):y("",!0),o.dataIndex=="status"?(d(),z(S,{key:1,status:l.status},null,8,["status"])):y("",!0),o.dataIndex=="clock_in"?(d(),_(v,{key:2},[c(i(l.clock_in?t.formatTime(l.clock_in):"-")+" ",1),l.is_late&&l.late_time>0?(d(),_("span",Me," ("+i(t.formatMinutes(l.late_time))+" "+i(n.$t("attendance.late"))+") ",1)):y("",!0)],64)):y("",!0),o.dataIndex=="clock_out"?(d(),_(v,{key:3},[c(i(l.clock_out?t.formatTime(l.clock_out):"-"),1)],64)):y("",!0),o.dataIndex=="clocked_time"?(d(),_(v,{key:4},[t.officeTime>0&&l.worked_time>0?(d(),_("span",Se,[e(T,null,{title:a(()=>[l.late_time>0?(d(),_("span",Te,[c(i(n.$t("attendance.late"))+" : "+i(t.formatMinutes(l.late_time))+" ",1),u[3]||(u[3]=h("br",null,null,-1))])):y("",!0),c(" "+i(n.$t("attendance.clocked_time"))+" : "+i(t.formatMinutes(l.worked_time)),1)]),default:a(()=>[e(A,{strokeColor:"#52c41a",size:"small",showInfo:!1,percent:l.worked_time/t.officeTime*100,success:{percent:l.late_time/t.officeTime*100,strokeColor:"#ff4d4f"}},null,8,["percent","success"])]),_:2},1024),u[4]||(u[4]=h("br",null,null,-1)),c(" "+i(t.formatMinutes(l.worked_time)),1)])):(d(),_("span",ze," - "))],64)):y("",!0),o.dataIndex=="other_details"?(d(),_(v,{key:5},[l.clock_in&&l.clock_in_ip||l.clock_in&&l.clock_out_ip?(d(),_("span",Be,[h("span",null,[e(I,{strong:""},{default:a(()=>[c(i(n.$t("attendance.clock_in_ip"))+" : ",1)]),_:1}),c(" "+i(l.clock_in&&l.clock_in_ip?l.clock_in_ip:""),1)]),u[5]||(u[5]=h("br",null,null,-1)),h("span",null,[e(I,{strong:""},{default:a(()=>[c(i(n.$t("attendance.clock_out_ip"))+" : ",1)]),_:1}),c(" "+i(l.clock_in&&l.clock_out_ip?l.clock_out_ip:""),1)])])):(d(),_("span",Le," - "))],64)):y("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const We=q(Ie,[["render",Ne]]);export{We as default};
