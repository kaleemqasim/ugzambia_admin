import{_ as g,d as h,aT as v,Q as y,r,Y as k,o,g as d,w as D,c as p,h as c,t as $,b6 as q,p as f,bx as w}from"./app-OikDM5Kw.js";const F=h({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"upload-file",type:String}},components:{LoadingOutlined:v,PlusOutlined:y},setup(e,{emit:s}){const n=r([]),t=r(!1),{t:u}=k();return{fileList:n,loading:t,customRequest:i=>{const a=new FormData;a.append("image",i.file),a.append("folder",e.folder),t.value=!0,axiosAdmin.post(e.url,a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{n.value=[],t.value=!1,s("onFileUploaded",{file:l.data.file,file_url:l.data.file_url})}).catch(()=>{t.value=!1,q.error(u("messages.uploading_failed"))})}}}}),L={key:0},R=["src"],B={key:1},C={class:"ant-upload-text"};function S(e,s,n,t,u,m){const i=f("loading-outlined"),a=f("plus-outlined"),l=w;return o(),d(l,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":s[0]||(s[0]=_=>e.fileList=_),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:D(()=>[e.formData[e.imageField]!=null?(o(),p("div",L,[c("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,R)])):(o(),p("div",B,[e.loading?(o(),d(i,{key:0})):(o(),d(a,{key:1})),c("div",C,$(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const b=g(F,[["render",S]]);export{b as U};
