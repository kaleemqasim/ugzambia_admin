import{a as t,x as K,_ as Y,d as ee,aV as Q,e as te,r as v,z as ne,aW as ae,a6 as oe,aX as le,o as _,g as A,ab as ie,w as a,c as b,L as $,D as P,p as S,aY as re,aD as Z,j as k,t as y,aG as J,aw as ce,Q as se,aA as de,aH as j,aT as ue,b as pe,Y as me,ak as _e,X as fe,aZ as he,h as N,i as I,ay as ge,aB as ve,aC as be,q as ye,f as Se,a_ as ke,B as xe,G as Ce,a$ as we,m as Oe,F as Te,a0 as Be,C as Le,s as W}from"./app-OikDM5Kw.js";import{A as Ie}from"./AdminPageHeader-MbAN4P4t.js";import{_ as Pe}from"./BarcodeGenerator-DMTKYGMo.js";import{S as De}from"./SaveOutlined-BSR-wlKo.js";import{B as Ae}from"./BarcodeOutlined-B83IYm4H.js";import{P as ze}from"./PrinterOutlined-DKHuCtDd.js";import"./index-CaGusbUe.js";var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};function X(n){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?Object(arguments[o]):{},e=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable}))),e.forEach(function(s){Ne(n,s,i[s])})}return n}function Ne(n,o,i){return o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n}var G=function(o,i){var e=X({},o,i.attrs);return t(K,X({},e,{icon:qe}),null)};G.displayName="LinkOutlined";G.inheritAttrs=!1;const $e=ee({props:["productData"],emits:["valueSuccess","valueChanged","showProduct"],components:{SearchOutlined:Q},setup(n,{emit:o}){const i=te({searchTerm:[],fetching:!1,products:[]}),e=v({});ne(()=>{s(n)});const s=r=>{r.productData&&r.productData.product?(i.products=[{xid:r.productData.x_product_id,name:r.productData.product.name}],i.searchTerm=r.productData.x_product_id):(i.searchTerm=[],i.products=[]),o("valueSuccess")},f=(r,d)=>{o("valueChanged",d),o("valueSuccess")},C=ae(r=>{if(i.products=[],r!=""){i.fetching=!0;const d=`name lk "%${r}%" or item_code lk "%${r}%"`;let c=`products?fields=xid,name,item_code,barcode_symbology,details{sales_price}&filters=${encodeURIComponent(d)}&limit=10`;axiosAdmin.get(c).then(T=>{i.products=T.data,i.fetching=!1})}},300),w=(r,d)=>{e.value=d.product,o("showProduct",e.value),i.searchTerm=[],i.products=[]};return oe(n,(r,d)=>{s(r)}),{...le(i),fetchProducts:C,valueChanged:f,searchValueSelected:w}}});function He(n,o,i,e,s,f){const C=S("SearchOutlined"),w=re,r=J,d=Z;return _(),A(d,{value:n.searchTerm,"onUpdate:value":o[0]||(o[0]=c=>n.searchTerm=c),"show-search":"","filter-option":!1,placeholder:n.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":n.fetching?void 0:null,onSearch:n.fetchProducts,"option-label-prop":"label",onChange:n.valueChanged,allowClear:!0,onSelect:n.searchValueSelected},ie({suffixIcon:a(()=>[t(C)]),default:a(()=>[(_(!0),b(P,null,$(n.products,c=>(_(),A(r,{key:c.xid,value:c.xid,label:c.name,product:c},{default:a(()=>[k(y(c.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[n.fetching?{name:"notFoundContent",fn:a(()=>[t(w,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onChange","onSelect"])}const Fe=Y($e,[["render",He]]),Ue={components:{EyeOutlined:ce,PlusOutlined:se,DeleteOutlined:de,ExclamationCircleOutlined:j,SearchOutlined:Q,SaveOutlined:De,LoadingOutlined:ue,BarcodeOutlined:Ae,PrinterOutlined:ze,LinkOutlined:G,BarcodeGenerator:Pe,AdminPageHeader:Ie,ProductSearchInput:Fe},setup(){const{appSetting:n,permsArray:o,formatAmountCurrency:i}=pe(),{t:e}=me(),s=v([]),f=v(40),C=v(""),w=v(""),r=v([]),d=v({}),c=v({}),T=v(null),O=v(!1),B=v(!1),H=v([{label:"40 per sheet (a4) (1.799 * 1.003)",value:40},{label:"30 per sheet (2.625 * 1)",value:30},{label:"24 per sheet (a4) (2.48 * 1.334)",value:24},{label:"20 per sheet (4 * 1)",value:20},{label:"18 per sheet (a4) (2.5 * 1.835)",value:18},{label:"14 per sheet (4 * 1.33)",value:14},{label:"12 per sheet (a4) (2.5 * 2.834)",value:12},{label:"10 per sheet (4 * 2)",value:10}]),F=[{title:"#",dataIndex:"sn"},{title:e("print_barcode.name"),dataIndex:"name"},{title:e("print_barcode.quantity"),dataIndex:"unit_quantity"},{title:e("common.action"),dataIndex:"action"}],D=l=>{_e(s.value,p=>{p.xid==l.xid&&(p.quantity=l.quantity)}),L()},U=()=>{s.value=[],r.value=[]},z=l=>{fe.confirm({title:e("common.delete")+"?",icon:t(j),content:e("print_barcode.delete_message"),centered:!0,okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){const p=[];let m=1;s.value.map(g=>{g.xid!=l.xid&&(p.push({...g,sn:m}),m++)}),s.value=p,L()}})},E=l=>{he(s.value,{xid:l.product.xid})===void 0&&(s.value=[...s.value,{sn:s.value.length+1,xid:l.product.xid,name:l.product.name,item_code:l.product.item_code,price:l.product&&l.product.details&&l.product.details.sales_price?l.product.details.sales_price:"",quantity:10,barcode_symbology:l.product.barcode_symbology}]),L()},M=(l,p)=>{const m=[];let g=0;for(;g<l.length;)m.push(l.slice(g,g+p)),g+=p;return m},L=()=>{const l={height:"11.6in",padding:".1in 0 0 .1in",width:"8.25in",display:"block",margin:"10px auto",pageBreakAfter:"always"},p={height:"10.3in",paddingTop:".1in",width:"8.45in",display:"block",margin:"10px auto",pageBreakAfter:"always"},m={border:"1px dotted #ccc",display:"block",float:"left",fontSize:"12px",lineHeight:"14px",overflow:"hidden",textAlign:"center",textTransform:"uppercase"};f.value==40?(d.value={height:"1.003in",margin:"0 .07in",paddingTop:".05in",width:"1.799in",...m},c.value=l):f.value==30?(d.value={height:"1in",margin:"0 .07in",paddingTop:".05in",width:"2.625in",...m},c.value=p):f.value==24?(d.value={height:"1.335in",marginLeft:".079in",paddingTop:".05in",width:"2.48in",...m},c.value=l):f.value==20?(d.value={height:"1in",margin:"0 .1in",paddingTop:".05in",width:"4in",...m},c.value=p):f.value==18?(d.value={fontSize:"13px",height:"1.835in",lineHeight:"20px",marginLeft:".079in",paddingTop:".05in",width:"2.5in",...m},c.value=l):f.value==14?(d.value={height:"1.33in",margin:"0 .1in",paddingTop:".1in",width:"4in",...m},c.value=p):f.value==12?(d.value={fontSize:"14px",height:"2.834in",lineHeight:"20px",marginLeft:".079in",paddingTop:".05in",width:"2.5in",...m},c.value=l):f.value==10&&(d.value={fontSize:"14px",height:"2in",lineHeight:"20px",margin:"0 .1in",paddingTop:".1in",width:"4in",...m},c.value=p);var g=[];s.value.map(x=>{for(let q=0;q<x.quantity;q++)g.push({xid:x.xid,name:x.name,item_code:x.item_code,barcode_symbology:x.barcode_symbology,price:x.price})}),r.value=M(g,f.value)};return{appSetting:n,formatAmountCurrency:i,orderItemColumns:F,permsArray:o,selectedProducts:s,reset:U,showDeleteConfirm:z,quantityChanged:D,productSelected:E,barcodePerSheetSelected:L,perSheetBarcode:f,a4SheetClassName:C,barcodeClassName:w,allBarcodes:r,barcodeStyleObject:d,a4pageStyleObject:c,paperSizeArray:H,contentToPrint:T,printBarcodes:()=>{const l=document.createElement("iframe");l.style.display="none",document.body.appendChild(l),l.contentDocument.body.innerHTML=`<body>${T.value.innerHTML}</body>`,l.contentWindow.print()},selectPrice:B,selectName:O}}},Ee={class:"mt-30",ref:"contentToPrint"},Me={style:{"padding-left":"10px","font-weight":"bold"}},Ve={key:0,style:{"text-align":"center"}},Ge={key:1,style:{"text-align":"center"}},Re={key:0};function je(n,o,i,e,s,f){const C=ge,w=S("router-link"),r=ve,d=be,c=S("AdminPageHeader"),T=S("ProductSearchInput"),O=ye,B=Se,H=ke,F=S("DeleteOutlined"),D=xe,U=Ce,z=we,E=J,M=Z,L=Oe,R=Te,l=S("LinkOutlined"),p=S("PrinterOutlined"),m=Be,g=S("BarcodeGenerator"),x=Le,q=S("admin-page-table-content");return _(),b(P,null,[t(c,null,{header:a(()=>[t(C,{title:n.$t("menu.print_barcodes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(d,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(r,null,{default:a(()=>[t(w,{to:{name:"admin.dashboard.index"}},{default:a(()=>[k(y(n.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(r,null,{default:a(()=>[k(y(n.$t("menu.print_barcodes")),1)]),_:1})]),_:1})]),_:1}),t(q,null,{default:a(()=>[t(x,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(R,{layout:"vertical"},{default:a(()=>[t(B,{gutter:16,class:"mb-20"},{default:a(()=>[t(O,{xs:24,sm:24,md:12,lg:24,xl:24},{default:a(()=>[t(T,{onValueChanged:e.productSelected},null,8,["onValueChanged"])]),_:1})]),_:1}),t(B,{gutter:16},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(U,{"row-key":u=>u.xid,dataSource:e.selectedProducts,columns:e.orderItemColumns,pagination:!1},{bodyCell:a(({column:u,record:h})=>[u.dataIndex==="name"?(_(),b(P,{key:0},[k(y(h.name)+" ",1),o[3]||(o[3]=N("br",null,null,-1))],64)):I("",!0),u.dataIndex==="unit_quantity"?(_(),A(H,{key:1,id:"inputNumber",value:h.quantity,"onUpdate:value":V=>h.quantity=V,min:1,onChange:V=>e.quantityChanged(h)},null,8,["value","onUpdate:value","onChange"])):I("",!0),u.dataIndex==="action"?(_(),A(D,{key:2,type:"primary",onClick:V=>e.showDeleteConfirm(h),style:{"margin-left":"4px"}},{icon:a(()=>[t(F)]),_:2},1032,["onClick"])):I("",!0)]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1}),t(B,{gutter:16,class:"mt-20"},{default:a(()=>[t(O,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(z,{checked:e.selectName,"onUpdate:checked":o[0]||(o[0]=u=>e.selectName=u)},{default:a(()=>[k(y(n.$t("print_barcode.select_name")),1)]),_:1},8,["checked"])]),_:1}),t(O,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(z,{checked:e.selectPrice,"onUpdate:checked":o[1]||(o[1]=u=>e.selectPrice=u)},{default:a(()=>[k(y(n.$t("print_barcode.select_price")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),t(B,{gutter:16,class:"mt-20"},{default:a(()=>[t(O,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(L,{label:n.$t("print_barcode.paper_size"),name:"paper_size"},{default:a(()=>[t(M,{value:e.perSheetBarcode,"onUpdate:value":o[2]||(o[2]=u=>e.perSheetBarcode=u),placeholder:n.$t("common.select_default_text",[n.$t("print_barcode.paper_size")]),onChange:e.barcodePerSheetSelected},{default:a(()=>[(_(!0),b(P,null,$(e.paperSizeArray,u=>(_(),A(E,{key:`size-${u.value}`,value:u.value},{default:a(()=>[k(y(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),N("div",null,[t(m,null,{default:a(()=>[t(D,{style:{color:"white","background-color":"#e81515"},onClick:e.reset},{icon:a(()=>[t(l)]),default:a(()=>[k(y(n.$t("common.reset"))+" ",1)]),_:1},8,["onClick"]),t(D,{type:"primary",onClick:e.printBarcodes,block:""},{icon:a(()=>[t(p)]),default:a(()=>[k(" "+y(n.$t("product.print_barcode")),1)]),_:1},8,["onClick"])]),_:1})]),N("div",Ee,[(_(!0),b(P,null,$(e.allBarcodes,u=>(_(),b("div",{class:"give-border",style:W(e.a4pageStyleObject),key:u.xid},[(_(!0),b(P,null,$(u,h=>(_(),b("div",{style:W(e.barcodeStyleObject),key:h.xid},[N("div",Me,[e.selectName==!0?(_(),b("div",Ve,y(h.name),1)):I("",!0),h&&h.price!=""?(_(),b("div",Ge,[e.selectPrice==!0?(_(),b("div",Re,y(e.formatAmountCurrency(h.price)),1)):I("",!0)])):I("",!0),t(g,{value:h.item_code+"",format:h.barcode_symbology,height:18,width:1,fontSize:16,elementTag:"svg"},null,8,["value","format"])])],4))),128))],4))),128))],512)]),_:1})]),_:1})],64)}const et=Y(Ue,[["render",je],["__scopeId","data-v-ceedb865"]]);export{et as default};
