import{_ as k,r as I,o as n,g as C,w as c,a as m,bJ as q,a0 as G,d as D,b as N,h as t,j as u,t as o,c as i,s as p,i as l,D as $,L as b,p as g,B as S,X as V}from"./app-OikDM5Kw.js";import{_ as z}from"./BarcodeGenerator-DMTKYGMo.js";import{P as L}from"./PrinterOutlined-DKHuCtDd.js";const M={props:["text"],setup(e){return I(""),{text:e.text}}};function Q(e,r,y,h,v,w){const _=q,d=G;return n(),C(d,{direction:"vertical",align:"center"},{default:c(()=>[m(_,{value:h.text,size:100},null,8,["value"])]),_:1})}const R=k(M,[["render",Q]]),T=window.config.pos_invoice_css,E=D({props:["visible","order"],emits:["closed","success"],components:{PrinterOutlined:L,BarcodeGenerator:z,QRcodeGenerator:R},setup(e,{emit:r}){const{formatAmountCurrency:y,formatDate:h,selectedWarehouse:v}=N();return{onClose:()=>{r("closed")},formatDate:h,selectedWarehouse:v,formatAmountCurrency:y,printInvoice:()=>{var d=document.getElementById("pos-invoice").innerHTML,a=window.open("","","height=500, width=500");a.document.write(`<link rel="stylesheet" href="${T}"><html><body>`),a.document.write(d),a.document.write("</body></html>"),a.document.close(),a.print()}}}}),j={id:"pos-invoice"},F={key:0,style:{"max-width":"400px",margin:"0px auto"}},H={class:"invoice-header"},J=["src","alt"],U={class:"company-details"},X={class:"company-address"},K={style:{"margin-bottom":"0px"}},Y={class:"tax-invoice-details"},Z={class:"tax-invoice-title"},P={class:"invoice-customer-details"},O={style:{width:"50%"}},x={style:{width:"50%"}},ee={style:{width:"50%"}},te={style:{width:"50%"}},oe={class:"tax-invoice-items"},se={style:{width:"100%"}},ne={style:{background:"#eee"}},ie={style:{width:"25%"}},re={key:0},ae={style:{"text-align":"right"}},de={class:"item-row-other"},le=["colspan"],ce={colspan:"2",style:{"text-align":"right"}},me={class:"item-row-other"},he=["colspan"],_e={colspan:"2",style:{"text-align":"right"}},ue={class:"item-row-other"},pe=["colspan"],ye={colspan:"2",style:{"text-align":"right"}},ve={class:"tax-invoice-totals"},ge={style:{width:"100%"}},we={style:{width:"30%"}},fe={style:{"margin-bottom":"0px"}},$e={style:{width:"30%"}},be={style:{"margin-bottom":"0px"}},ke={style:{width:"40%","text-align":"center"}},Ce={style:{"margin-bottom":"0px"}},We={class:"paid-amount-deatils"},Ae={style:{width:"100%"}},Be={style:{background:"#eee"}},Ie={style:{width:"50%"}},qe={style:{width:"50%"}},Ge={class:"paid-amount-row"},De={style:{width:"100%"}},Ne={style:{"text-align":"center"}},Se={style:{width:"100%"}},Ve={key:0,style:{"margin-bottom":"0px"}},ze={key:0},Le={key:1,style:{"margin-bottom":"0px"}},Me={key:0,class:"discount-details"},Qe={key:1,class:"barcode-details"},Re={key:2,style:{"text-align":"center"},class:"qrcode-details"},Te={class:"thanks-details"},Ee={class:"footer-button"};function je(e,r,y,h,v,w){const _=g("BarcodeGenerator"),d=g("QRcodeGenerator"),a=g("PrinterOutlined"),W=S,A=V;return n(),C(A,{open:e.visible,centered:!0,maskClosable:!1,title:e.$t("common.print_invoice"),width:"400px",onCancel:e.onClose},{footer:c(()=>[t("div",Ee,[m(W,{type:"primary",onClick:e.printInvoice},{icon:c(()=>[m(a)]),default:c(()=>[u(" "+o(e.$t("common.print_invoice")),1)]),_:1},8,["onClick"])])]),default:c(()=>[t("div",j,[e.order&&e.order.xid?(n(),i("div",F,[t("div",H,[t("img",{class:"invoice-logo",src:e.selectedWarehouse.logo_url,alt:e.selectedWarehouse.name},null,8,J)]),t("div",U,[t("h2",null,o(e.selectedWarehouse.name),1),t("p",X,o(e.selectedWarehouse.address),1),t("h4",K,o(e.$t("common.phone"))+": "+o(e.selectedWarehouse.phone),1),t("h4",null,o(e.$t("common.email"))+": "+o(e.selectedWarehouse.email),1)]),t("div",Y,[t("h3",Z,o(e.$t("sales.tax_invoice")),1),t("table",P,[t("tr",null,[t("td",O,o(e.$t("sales.invoice"))+"     : "+o(e.order.invoice_number),1),t("td",x,o(e.$t("common.date"))+" : "+o(e.formatDate(e.order.order_date)),1)]),t("tr",null,[t("td",ee,o(e.$t("stock.customer"))+" : "+o(e.order.user.name),1),t("td",te,o(e.$t("stock.sold_by"))+" : "+o(e.order.staff_member.name),1)])])]),t("div",oe,[t("table",se,[t("thead",ne,[r[0]||(r[0]=t("td",{style:{width:"5%"}},"#",-1)),t("td",ie,o(e.$t("common.item")),1),t("td",{style:p({width:e.selectedWarehouse.show_mrp_on_invoice?"10%":"25%"})},o(e.$t("common.qty")),5),e.selectedWarehouse.show_mrp_on_invoice?(n(),i("td",{key:0,style:p({width:(e.selectedWarehouse.show_mrp_on_invoice,"20%")})},o(e.$t("product.mrp")),5)):l("",!0),t("td",{style:p({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%"})},o(e.$t("common.rate")),5),t("td",{style:p({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%",textAlign:"right"})},o(e.$t("common.total")),5)]),t("tbody",null,[(n(!0),i($,null,b(e.order.items,(s,B)=>{var f;return n(),i("tr",{class:"item-row",key:s.xid},[t("td",null,o(B+1),1),t("td",null,o(s.product.name),1),t("td",null,o(s.quantity+""+((f=s.unit)==null?void 0:f.short_name)),1),e.selectedWarehouse.show_mrp_on_invoice?(n(),i("td",re,o(s.mrp?e.formatAmountCurrency(s.mrp):"-"),1)):l("",!0),t("td",null,o(e.formatAmountCurrency(s.unit_price)),1),t("td",ae,o(e.formatAmountCurrency(s.subtotal)),1)])}),128)),t("tr",de,[t("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},o(e.$t("stock.order_tax")),9,le),t("td",ce,o(e.formatAmountCurrency(e.order.tax_amount)),1)]),t("tr",me,[t("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},o(e.$t("stock.discount")),9,he),t("td",_e,o(e.formatAmountCurrency(e.order.discount)),1)]),t("tr",ue,[t("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},o(e.$t("stock.shipping")),9,pe),t("td",ye,o(e.formatAmountCurrency(e.order.shipping)),1)])])])]),t("div",ve,[t("table",ge,[t("tr",null,[t("td",we,[t("h3",fe,o(e.$t("common.items"))+": "+o(e.order.total_items),1)]),t("td",$e,[t("h3",be,o(e.$t("common.qty"))+": "+o(e.order.total_quantity),1)]),t("td",ke,[t("h3",Ce,o(e.$t("common.total"))+": "+o(e.formatAmountCurrency(e.order.total)),1)])])])]),t("div",We,[t("table",Ae,[t("thead",Be,[t("td",Ie,o(e.$t("payments.paid_amount")),1),t("td",qe,o(e.$t("payments.due_amount")),1)]),t("tbody",null,[t("tr",Ge,[t("td",null,o(e.formatAmountCurrency(e.order.paid_amount)),1),t("td",null,o(e.formatAmountCurrency(e.order.due_amount)),1)])])])]),t("div",null,[t("table",De,[t("tr",Ne,[t("td",Se,[e.order.order_payments?(n(),i("h4",Ve,[u(o(e.$t("invoice.payment_mode"))+": ",1),(n(!0),i($,null,b(e.order.order_payments,s=>(n(),i("span",{key:s.xid,style:{"margin-right":"5px"}},[u(o(e.formatAmountCurrency(s.amount))+" (",1),s.payment&&s.payment.payment_mode&&s.payment.payment_mode.name?(n(),i("span",ze,o(s.payment.payment_mode.name),1)):l("",!0),r[1]||(r[1]=u(" ) "))]))),128))])):(n(),i("h3",Le,o(e.$t("invoice.payment_mode"))+": - ",1))])])])]),e.selectedWarehouse.show_discount_tax_on_invoice?(n(),i("div",Me,[t("p",null,o(e.$t("invoice.total_discount_on_mrp"))+" : "+o(e.formatAmountCurrency(e.order.saving_on_mrp)),1),t("p",null,o(e.$t("invoice.total_discount"))+" : "+o(e.order.saving_percentage)+"% ",1),t("p",null,o(e.$t("invoice.total_tax"))+" : "+o(e.formatAmountCurrency(e.order.total_tax_on_items)),1)])):l("",!0),e.selectedWarehouse.barcode_type=="barcode"?(n(),i("div",Qe,[m(_,{value:e.order.invoice_number+"",height:25,width:1,fontSize:15,elementTag:"svg"},null,8,["value"])])):(n(),i("div",Re,[m(d,{text:e.order.invoice_number+""},null,8,["text"])])),t("div",Te,[t("h3",null,o(e.$t("invoice.thanks_message")),1)])])):l("",!0)])]),_:1},8,["open","title","onCancel"])}const Ue=k(E,[["render",je]]);export{Ue as I};
