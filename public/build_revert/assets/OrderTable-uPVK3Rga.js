import{_ as b,d as v,aw as x,r as E,bI as V,p as r,o as d,c as I,a as o,w as s,j as u,t as k,D as C,N as D,X as $,aA as j,bj as F,Y as R,b as z,g as m,i as c,aH as G,ax as H,O as Q,P as U,G as X}from"./app-OikDM5Kw.js";import{P as g}from"./PaymentStatus-CjQCOJGj.js";import{S as M,b as Y,a as J,M as K,O as L}from"./OrderDetails-mKqlHQPv.js";import{c as T}from"./cart--15qoxZn.js";const W=v({props:["order"],components:{EyeOutlined:x,StopOutlined:M,OrderStatus:Y,PaymentStatus:g,OrderDetails:J},setup(){const{formatAmountCurrency:e}=T(),t=E(!1);return{visible:t,showModal:()=>{t.value=!0},columns:[{title:"#",dataIndex:"id"},{title:"Product",dataIndex:"product_id"},{title:"Quantity",dataIndex:"quantity"},{title:"Price",dataIndex:"unit_price"},{title:"Total",dataIndex:"subtotal"}],formatAmountCurrency:e,buildAddress:V}}});function Z(e,t,n,p,w,S){const _=r("eye-outlined"),f=D,l=r("OrderDetails"),y=$;return d(),I(C,null,[o(f,{onClick:e.showModal},{default:s(()=>[o(_),u(" "+k(e.$t("stock.view_order")),1)]),_:1},8,["onClick"]),o(y,{open:e.visible,"onUpdate:open":t[0]||(t[0]=O=>e.visible=O),width:"70%",footer:!1},{title:s(()=>[u(k(e.order.invoice_number),1)]),default:s(()=>[o(l,{order:e.order},null,8,["order"])]),_:1},8,["open"])],64)}const ee=b(W,[["render",Z]]),te=v({props:["data"],emits:["reloadOrders"],components:{EyeOutlined:x,DeleteOutlined:j,MoreOutlined:K,StopOutlined:M,DownloadOutlined:F,PaymentStatus:g,OrderStatus:L,OrderDetailsModal:ee},setup(e,{emit:t}){const{t:n}=R(),{formatDateTime:p}=z(),{formatAmountCurrency:w}=T();return{columns:[{title:"Date",dataIndex:"order_date"},{title:"Total",dataIndex:"total"},{title:"Order Status",dataIndex:"order_status"},{title:"Payment Status",dataIndex:"payment_status"},{title:"Action",dataIndex:"action"}],cancelOrder:l=>{$.confirm({title:n("common.delete")+"?",icon:o(G),content:n("stock.order_cancel_message"),centered:!0,okText:n("common.yes"),okType:"danger",cancelText:n("common.no"),onOk(){axiosFront.post(`front/self/cancel-order/${l}`).then(y=>{t("reloadOrders"),H.success({message:n("common.success"),description:n("stock.order_canceled"),placement:"bottomRight"})})},onCancel(){}})},downloadInvoice:l=>{window.location.href=window.config.path+"/api/v1/pdf/"+l},formatAmountCurrency:w,formatDateTime:p}}});function oe(e,t,n,p,w,S){const _=r("PaymentStatus"),f=r("OrderStatus"),l=r("OrderDetailsModal"),y=r("stop-outlined"),O=D,P=r("download-outlined"),h=Q,A=r("more-outlined"),N=U,q=X;return d(),m(q,{columns:e.columns,"row-key":i=>i.id,"data-source":e.data,pagination:!1},{bodyCell:s(({column:i,record:a})=>[i.dataIndex==="order_date"?(d(),I(C,{key:0},[u(k(e.formatDateTime(a.order_date)),1)],64)):c("",!0),i.dataIndex==="total"?(d(),I(C,{key:1},[u(k(e.formatAmountCurrency(a.total)),1)],64)):c("",!0),i.dataIndex==="payment_status"?(d(),m(_,{key:2,paymentStatus:a.payment_status},null,8,["paymentStatus"])):c("",!0),i.dataIndex==="order_status"?(d(),m(f,{key:3,data:a},null,8,["data"])):c("",!0),i.dataIndex==="action"?(d(),m(N,{key:4,placement:"bottomRight"},{overlay:s(()=>[o(h,null,{default:s(()=>[o(l,{order:a},null,8,["order"]),a.order_status=="ordered"&&!a.cancelled?(d(),m(O,{key:0,onClick:B=>e.cancelOrder(a.unique_id)},{default:s(()=>[o(y),t[0]||(t[0]=u(" Cancel Order "))]),_:2},1032,["onClick"])):c("",!0),o(O,{onClick:B=>e.downloadInvoice(a.unique_id)},{default:s(()=>[o(P),t[1]||(t[1]=u(" Download Invoice "))]),_:2},1032,["onClick"])]),_:2},1024)]),default:s(()=>[o(A,{style:{fontSize:"16px"}})]),_:2},1024)):c("",!0)]),_:1},8,["columns","row-key","data-source"])}const re=b(te,[["render",oe]]);export{re as O};
