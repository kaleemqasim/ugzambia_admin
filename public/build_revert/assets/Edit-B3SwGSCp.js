import{S as Y}from"./SettingSidebar-D526a_C1.js";import{A as J}from"./AdminPageHeader-MbAN4P4t.js";import{_ as M,d as K,r as $,Y as A,p as v,o as p,c as w,g as S,w as a,a as e,j as n,t as s,i as k,D as I,au as q,ax as L,B as R,l as j,q as U,f as O,I as N,m as V,F,X as Q,bb as Z,E as x,z as H,h as ee,b6 as ae,T as te,a$ as le,v as ne,bw as se,C as P,b as oe,aG as me,aD as re,n as ie,a0 as ue,ay as de,aB as _e,aC as ce}from"./app-OikDM5Kw.js";import{a as T}from"./apiAdmin-yFrp6bZq.js";import{S as pe}from"./SendOutlined-BDuYMtDj.js";import"./index-CaGusbUe.js";import{S as W}from"./SaveOutlined-BSR-wlKo.js";import"./TranslationOutlined-CEPKXLet.js";import"./UserOutlined-6nf3lw0h.js";import"./ShoppingCartOutlined-BldUIlX-.js";import"./ScheduleOutlined-Dj7wWgnj.js";import"./AppstoreAddOutlined-BIf-P8Dc.js";import"./MailOutlined-DcsIPfhp.js";import"./FormOutlined-VUqFOjZT.js";const fe=K({props:["formData","verified"],components:{SendOutlined:pe},setup(){const{addEditRequestAdmin:t,loading:o,rules:b}=T(),l=$(!1),f=$(""),_=$(""),{t:d}=A();return{loading:o,rules:b,email:f,visible:l,showModal:()=>{l.value=!0},sendMail:()=>{_.value="",t({url:q("settings/email/send-test-mail"),data:{email:f.value},success:r=>{_.value="",r.status=="success"?L.success({placement:"bottomRight",message:d("common.success"),description:d("mail_settings.test_mail_sent_successfully")}):_.value=r.message},error:r=>{_.value=""}})},handleCancel:()=>{l.value=!1,o.value=!1,f.value="",_.value="",b.value={}},errorMessage:_}}});function ge(t,o,b,l,f,_){const d=v("SendOutlined"),u=R,m=j,i=U,r=O,g=N,h=V,C=F,D=Q;return p(),w(I,null,[t.formData.mail_driver=="mail"||t.formData.mail_driver=="smtp"?(p(),S(u,{key:0,onClick:t.showModal,disabled:!t.verified},{icon:a(()=>[e(d)]),default:a(()=>[n(" "+s(t.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):k("",!0),e(D,{open:t.visible,"onUpdate:open":o[1]||(o[1]=y=>t.visible=y),maskClosable:!1,title:t.$t("mail_settings.send_test_mail"),onCancel:t.handleCancel},{footer:a(()=>[e(u,{key:"submit",type:"primary",loading:t.loading,onClick:t.sendMail},{icon:a(()=>[e(d)]),default:a(()=>[n(" "+s(t.$t("common.send")),1)]),_:1},8,["loading","onClick"]),e(u,{key:"back",onClick:t.handleCancel},{default:a(()=>[n(s(t.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[e(C,{layout:"vertical"},{default:a(()=>[t.errorMessage!=""?(p(),S(r,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[e(i,{span:24},{default:a(()=>[e(m,{message:t.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):k("",!0),e(r,{gutter:16},{default:a(()=>[e(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e(h,{label:t.$t("mail_settings.email"),name:"email",help:t.rules.email?t.rules.email.message:null,validateStatus:t.rules.email?"error":null,class:"required"},{default:a(()=>[e(g,{value:t.email,"onUpdate:value":o[0]||(o[0]=y=>t.email=y),placeholder:t.$t("common.placeholder_default_text",[t.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const ve=M(fe,[["render",ge]]),be={components:{InfoCircleOutlined:Z}};function he(t,o,b,l,f,_){const d=v("InfoCircleOutlined"),u=x;return p(),S(u,null,{title:a(()=>[n(s(t.$t("mail_settings.notificaiton_will_be_sent_to_warehouse")),1)]),default:a(()=>[e(d)]),_:1})}const Se=M(be,[["render",he]]),ye={props:["sendMailSettings"],components:{TooltipWarehouse:Se},setup(t){const{addEditRequestAdmin:o}=T(),{t:b}=A(),l=$([]);return H(()=>{l.value=t.sendMailSettings.credentials}),{settings:l,settingsChanged:_=>{o({url:q("settings/email/send-mail-settings"),data:{name_key:"warehouse",settings:_},success:d=>{ae.success(b("mail_settings.send_mail_setting_saved"))}})}}}},ke={class:"notificaiton-setting-bar"},$e={style:{marginTop:"8px",paddingBottom:"14px"}};function De(t,o,b,l,f,_){const d=v("TooltipWarehouse"),u=te,m=U,i=le,r=ne,g=O,h=se,C=P,D=v("perfect-scrollbar");return p(),w("div",ke,[e(D,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[e(C,{class:"page-content-container"},{title:a(()=>[ee("div",$e,s(t.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[e(h,{value:l.settings,"onUpdate:value":o[0]||(o[0]=y=>l.settings=y),style:{width:"100%"},onChange:l.settingsChanged},{default:a(()=>[e(g,null,{default:a(()=>[e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.stock_adjustment"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"stock_adjustment_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"stock_adjustment_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"stock_adjustment_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.purchase_returns"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"purchase_returns_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"purchase_returns_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"purchase_returns_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.purchases"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"purchases_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"purchases_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"purchases_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.sales"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"sales_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"sales_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"sales_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.sales_returns"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"sales_returns_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"sales_returns_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"sales_returns_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.expenses"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"expense_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"expense_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"expense_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.staff_members"))+" ",1),e(d)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"staff_member_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"staff_member_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(m,{span:24,class:"mb-5"},{default:a(()=>[e(i,{value:"staff_member_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(r)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const Ce=M(ye,[["render",De]]),we={components:{SaveOutlined:W,TestMail:ve,SendMailSetting:Ce},setup(){const{addEditRequestAdmin:t,loading:o,rules:b}=T(),{appType:l}=oe();T();const{t:f}=A(),_=$({}),d=$(!1),u=$(""),m=$([]);return H(()=>{axiosAdmin.get(q("settings/email")).then(r=>{_.value=r.data.settings,m.value=r.data.sendMailSettings,d.value=r.data.verified,u.value=r.data.verified?f("messages.stmp_success_message"):f("messages.stmp_error_message")})}),{appType:l,formData:_,rules:b,loading:o,onSubmit:()=>{t({url:q("settings/email/update"),data:_.value,successMessage:f("mail_settings.updated"),success:r=>{d.value=r.verified,u.value=r.verified?f("messages.stmp_success_message"):r.message}})},verified:d,verifiedMessage:u,warehouseSendMailSettings:m}}},Me={key:0},qe={key:0},Te={key:1};function Ue(t,o,b,l,f,_){const d=j,u=me,m=re,i=V,r=U,g=O,h=N,C=ie,D=v("SaveOutlined"),y=R,B=v("TestMail"),E=ue,z=F,X=P,G=v("SendMailSetting");return p(),S(g,null,{default:a(()=>[e(r,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:l.appType=="saas"?24:18,xl:l.appType=="saas"?24:18},{default:a(()=>[l.formData.mail_driver=="smtp"?(p(),w("div",Me,[l.verified?(p(),S(d,{key:0,description:l.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(p(),S(d,{key:1,description:l.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):k("",!0),e(X,{class:"settings-sidebar-content-container"},{default:a(()=>[e(z,{layout:"vertical"},{default:a(()=>[e(g,{gutter:16},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(i,{label:t.$t("mail_settings.mail_driver"),name:"mail_driver",help:l.rules.mail_driver?l.rules.mail_driver.message:null,validateStatus:l.rules.mail_driver?"error":null},{default:a(()=>[e(m,{value:l.formData.mail_driver,"onUpdate:value":o[0]||(o[0]=c=>l.formData.mail_driver=c),placeholder:t.$t("common.select_default_text",[t.$t("mail_settings.mail_driver")])},{default:a(()=>[e(u,{key:"none",value:"none"},{default:a(()=>[n(s(t.$t("mail_settings.none")),1)]),_:1}),e(u,{key:"smtp",value:"smtp"},{default:a(()=>[n(s(t.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.formData.mail_driver=="mail"||l.formData.mail_driver=="smtp"?(p(),w("div",qe,[e(g,{gutter:16},{default:a(()=>[e(r,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(i,{label:t.$t("mail_settings.from_name"),name:"from_name",help:l.rules.from_name?l.rules.from_name.message:null,validateStatus:l.rules.from_name?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.from_name,"onUpdate:value":o[1]||(o[1]=c=>l.formData.from_name=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e(r,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(i,{label:t.$t("mail_settings.from_email"),name:"from_email",help:l.rules.from_email?l.rules.from_email.message:null,validateStatus:l.rules.from_email?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.from_email,"onUpdate:value":o[2]||(o[2]=c=>l.formData.from_email=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):k("",!0),l.formData.mail_driver=="smtp"?(p(),w("div",Te,[e(g,{gutter:16},{default:a(()=>[l.formData.mail_driver=="smtp"?(p(),S(r,{key:0,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:a(()=>[e(i,{label:t.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:l.rules.enable_mail_queue?l.rules.enable_mail_queue.message:null,validateStatus:l.rules.enable_mail_queue?"error":null,class:"required"},{default:a(()=>[e(m,{value:l.formData.enable_mail_queue,"onUpdate:value":o[3]||(o[3]=c=>l.formData.enable_mail_queue=c),placeholder:t.$t("common.select_default_text",[t.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:a(()=>[e(u,{key:"yes",value:"yes"},{default:a(()=>[n(s(t.$t("common.yes")),1)]),_:1}),e(u,{key:"no",value:"no"},{default:a(()=>[n(s(t.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):k("",!0),l.formData.mail_driver=="smtp"?(p(),S(r,{key:1,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:a(()=>[e(i,{label:t.$t("mail_settings.host"),name:"host",help:l.rules.host?l.rules.host.message:null,validateStatus:l.rules.host?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.host,"onUpdate:value":o[4]||(o[4]=c=>l.formData.host=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):k("",!0)]),_:1}),e(g,{gutter:16},{default:a(()=>[e(r,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(i,{label:t.$t("mail_settings.port"),name:"port",help:l.rules.port?l.rules.port.message:null,validateStatus:l.rules.port?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.port,"onUpdate:value":o[5]||(o[5]=c=>l.formData.port=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e(r,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(i,{label:t.$t("mail_settings.encryption"),name:"encryption",help:l.rules.encryption?l.rules.encryption.message:null,validateStatus:l.rules.encryption?"error":null},{default:a(()=>[e(m,{value:l.formData.encryption,"onUpdate:value":o[6]||(o[6]=c=>l.formData.encryption=c),placeholder:t.$t("common.select_default_text",[t.$t("mail_settings.encryption")]),allowClear:!0},{default:a(()=>[e(u,{key:"tls",value:"tls"},{default:a(()=>o[9]||(o[9]=[n(" tls ")])),_:1}),e(u,{key:"ssl",value:"ssl"},{default:a(()=>o[10]||(o[10]=[n(" ssl ")])),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e(g,{gutter:16},{default:a(()=>[e(r,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(i,{label:t.$t("mail_settings.username"),name:"username",help:l.rules.username?l.rules.username.message:null,validateStatus:l.rules.username?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.username,"onUpdate:value":o[7]||(o[7]=c=>l.formData.username=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e(r,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(i,{label:t.$t("mail_settings.password"),name:"password",help:l.rules.password?l.rules.password.message:null,validateStatus:l.rules.password?"error":null,class:"required"},{default:a(()=>[e(C,{value:l.formData.password,"onUpdate:value":o[8]||(o[8]=c=>l.formData.password=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):k("",!0),e(g,{gutter:16},{default:a(()=>[e(r,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e(i,null,{default:a(()=>[e(E,null,{default:a(()=>[e(y,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:a(()=>[e(D)]),default:a(()=>[n(" "+s(t.$t("common.update")),1)]),_:1},8,["onClick","loading"]),e(B,{formData:l.formData,verified:l.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),l.appType=="non-saas"?(p(),S(r,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[l.warehouseSendMailSettings&&l.warehouseSendMailSettings.xid?(p(),S(G,{key:0,sendMailSettings:l.warehouseSendMailSettings},null,8,["sendMailSettings"])):k("",!0)]),_:1})):k("",!0)]),_:1})}const Oe=M(we,[["render",Ue]]),Be={components:{SettingSidebar:Y,AdminPageHeader:J,EmailSettings:Oe,SaveOutlined:W},setup(){const t=$(null);return{onSubmit:()=>{t.value.onSubmit()},settingRef:t}}};function Ee(t,o,b,l,f,_){const d=v("SaveOutlined"),u=R,m=de,i=v("router-link"),r=_e,g=ce,h=v("AdminPageHeader"),C=v("SettingSidebar"),D=U,y=v("EmailSettings"),B=v("admin-page-table-content"),E=O;return p(),w(I,null,[e(h,null,{header:a(()=>[e(m,{title:t.$t("menu.email_settings"),class:"p-0"},{extra:a(()=>[e(u,{type:"primary",onClick:l.onSubmit,loading:!!(l.settingRef&&l.settingRef.loading)},{icon:a(()=>[e(d)]),default:a(()=>[n(" "+s(t.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[e(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[e(r,null,{default:a(()=>[e(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[n(s(t.$t("menu.dashboard")),1)]),_:1})]),_:1}),e(r,null,{default:a(()=>[n(s(t.$t("menu.settings")),1)]),_:1}),e(r,null,{default:a(()=>[n(s(t.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),e(E,null,{default:a(()=>[e(D,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[e(C)]),_:1}),e(D,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[e(B,null,{default:a(()=>[e(y,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const Je=M(Be,[["render",Ee]]);export{Je as default};
