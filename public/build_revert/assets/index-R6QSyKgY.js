import{cs as R,a as t,ct as J,cu as X,cv as Z,_ as Q,o as p,g as w,w as a,h as i,p as C,Q as K,az as N,aA as ee,b0 as te,a5 as ne,cp as ae,Y as le,b as oe,r as F,e as re,z as se,ak as ie,c as z,D as H,f as de,j as g,t as o,L as V,i as W,ay as ue,aB as ce,aC as _e,q as pe,v as fe,a0 as me,aD as ge,bc as ve,E as ye,G as he,aG as be}from"./app-OikDM5Kw.js";import{h as Ce}from"./hrmManagement-CoX4Drh7.js";import{A as ke}from"./AdminPageHeader-MbAN4P4t.js";import{A as xe}from"./AttendanceSidebar-Ba6R-0y8.js";import{C as we}from"./CalendarFilled-DiMswy-R.js";import{C as Oe}from"./CarOutlined-8tSqqfhd.js";import{C as Se}from"./CalculatorOutlined-DvmKEJFz.js";import"./index-CaGusbUe.js";import"./ScheduleOutlined-Dj7wWgnj.js";import"./TabletOutlined-vCKQCqfa.js";var Pe=["class","component","viewBox","spin","rotate","tabindex","onClick"];function Y(n){for(var l=1;l<arguments.length;l++){var d=arguments[l]!=null?Object(arguments[l]):{},e=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(u){return Object.getOwnPropertyDescriptor(d,u).enumerable}))),e.forEach(function(u){U(n,u,d[u])})}return n}function U(n,l,d){return l in n?Object.defineProperty(n,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[l]=d,n}function Ae(n,l){if(n==null)return{};var d=Be(n,l),e,u;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(n);for(u=0;u<v.length;u++)e=v[u],!(l.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(n,e)&&(d[e]=n[e])}return d}function Be(n,l){if(n==null)return{};var d={},e=Object.keys(n),u,v;for(v=0;v<e.length;v++)u=e[v],!(l.indexOf(u)>=0)&&(d[u]=n[u]);return d}var G=function(l,d){var e,u=d.attrs,v=d.slots,_=Y({},l,u),L=_.class,b=_.component,f=_.viewBox,j=_.spin,$=_.rotate,h=_.tabindex,k=_.onClick,A=Ae(_,Pe),y=R(),x=y.prefixCls,O=y.rootClassName,m=v.default&&v.default(),D=m&&m.length,S=v.component,B=(e={},U(e,O.value,!!O.value),U(e,x.value,!0),e),M=U({},"".concat(x.value,"-spin"),j===""||!!j),P=$?{msTransform:"rotate(".concat($,"deg)"),transform:"rotate(".concat($,"deg)")}:void 0,T=Y({},X,{viewBox:f,class:M,style:P});f||delete T.viewBox;var I=function(){return b?t(b,T,{default:function(){return[m]}}):S?S(T):D?(Z(!!f||m.length===1&&m[0]&&m[0].type==="use"),t("svg",Y({},T,{viewBox:f}),[m])):null},E=h;return E===void 0&&k&&(E=-1,A.tabindex=E),t("span",Y({role:"img"},A,{onClick:k,class:[B,L]}),[I(),t(J,null,null)])};G.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String};G.inheritAttrs=!1;G.displayName="Icon";const Ie={components:{Icon:G}};function je(n,l,d,e,u,v){const _=C("icon");return p(),w(_,{style:{width:"16px"}},{component:a(()=>l[0]||(l[0]=[i("svg",{height:"24",viewBox:"0 0 24 24",width:"24"},[i("defs",null,[i("linearGradient",{id:"grad"},[i("stop",{offset:"50%","stop-color":"red"}),i("stop",{offset:"50%","stop-color":"white"})])]),i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{fill:"url(#grad)",stroke:"red","stroke-width":"1.5",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),i("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1})}const $e=Q(Ie,[["render",je]]),ze={components:{PlusOutlined:K,EditOutlined:N,DeleteOutlined:ee,CheckOutlined:te,CloseOutlined:ne,CalendarFilled:we,ArrowRightOutlined:ae,CarOutlined:Oe,CalculatorOutlined:Se,HalfStar:$e,AdminPageHeader:ke,AttendanceSidebar:xe},setup(){const{t:n}=le(),{getMonthNameByNumber:l,monthArrays:d}=Ce(),{dayjs:e,formatTime:u,permsArray:v}=oe(),_=F({month:e().format("MM"),year:e(),user_id:void 0}),L=F([]),b=F(1),f=re({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1}),j=F([]),$="users?limit=10000";se(()=>{const y=axiosAdmin.get($);Promise.all([y]).then(([x])=>{j.value=x.data}),k()});const h=()=>{b.value=1,k()},k=()=>{f.loading=!0;var y=_.value.month,x=_.value.year.format("YYYY");const O=f.pagination.pageSize,m=(b.value-1)*O;var D=`attendances/summary?month=${y}&year=${x}&offset=${m}&limit=${O}`;_.value.user_id&&(D+=`&user_id=${_.value.user_id}`),axiosAdmin.get(D).then(S=>{const B=[{title:"",dataIndex:"name"}];ie(S.data.columns,P=>{B.push({title:P,dataIndex:P})}),B.push({title:n("common.total"),dataIndex:"total"});const M={...f.pagination};M.total=S.data.meta.paging.total,f.data=[...S.data.data],f.pagination=M,L.value=B,f.loading=!1})};return{table:f,currentPage:b,handleTableChange:(y,x,O)=>{const m={...f.pagination};m.current=y.current,m.pageSize=y.pageSize,f.pagination=m,b.value=y.current,k()},columns:L,getMonthNameByNumber:l,filters:_,filterData:h,monthArrays:d,permsArray:v,setUrlData:k,formatTime:u,allUsers:j}}},Le={style:{marginLeft:"10px"}},De={style:{marginLeft:"10px"}},Me={style:{marginLeft:"10px"}},Te={style:{marginLeft:"10px"}},He={class:"table-responsive"},Ee={key:5};function Fe(n,l,d,e,u,v){const _=ue,L=C("router-link"),b=ce,f=_e,j=C("AdminPageHeader"),$=C("AttendanceSidebar"),h=pe,k=C("HalfStar"),A=fe,y=C("CloseOutlined"),x=C("CarOutlined"),O=C("CheckOutlined"),m=C("CalendarFilled"),D=me,S=be,B=ge,M=ve,P=de,T=C("admin-page-filters"),I=ye,E=he,q=C("admin-page-table-content");return p(),z(H,null,[t(j,null,{header:a(()=>[t(_,{title:n.$t("menu.remaining_leaves"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(b,null,{default:a(()=>[t(L,{to:{name:"admin.dashboard.index"}},{default:a(()=>[g(o(n.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(b,null,{default:a(()=>[g(o(n.$t("menu.hrm")),1)]),_:1}),t(b,null,{default:a(()=>[g(o(n.$t("menu.remaining_leaves")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(h,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t($)]),_:1}),t(h,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(T,null,{default:a(()=>[t(P,{gutter:[16,16],align:"middle"},{default:a(()=>[t(h,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[t(k,{style:{color:"green"}}),g(" "+o(n.$t("attendance.half_day"))+" ",1),t(A,{type:"vertical"}),i("span",null,[t(y,{style:{color:"red"}}),i("span",Le,o(n.$t("attendance.absent")),1)]),t(A,{type:"vertical"}),i("span",null,[t(x,{style:{color:"red"}}),i("span",De,o(n.$t("attendance.on_leave")),1)]),t(A,{type:"vertical"}),i("span",null,[t(O,{style:{color:"green"}}),i("span",Me,o(n.$t("attendance.present")),1)]),t(A,{type:"vertical"}),i("span",null,[t(m,{style:{color:"green"}}),i("span",Te,o(n.$t("attendance.holiday")),1)])]),_:1})]),_:1}),t(h,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[e.permsArray.includes("attendances_view")||e.permsArray.includes("admin")?(p(),w(h,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(B,{value:e.filters.user_id,"onUpdate:value":l[0]||(l[0]=c=>e.filters.user_id=c),onChange:e.filterData,"show-search":"",style:{width:"100%"},placeholder:n.$t("common.select_default_text",[n.$t("leave.user")]),allowClear:!0},{default:a(()=>[(p(!0),z(H,null,V(e.allUsers,c=>(p(),w(S,{key:c.xid,value:c.xid,title:c.name},{default:a(()=>[g(o(c.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):W("",!0),t(h,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(M,{value:e.filters.year,"onUpdate:value":l[1]||(l[1]=c=>e.filters.year=c),placeholder:n.$t("common.select_default_text",[n.$t("holiday.year")]),picker:"year",onChange:e.filterData,style:{width:"100%"},allowClear:!1},null,8,["value","placeholder","onChange"])]),_:1}),t(h,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(B,{value:e.filters.month,"onUpdate:value":l[2]||(l[2]=c=>e.filters.month=c),placeholder:n.$t("common.select_default_text",[n.$t("holiday.month")]),allowClear:!1,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.filterData},{default:a(()=>[(p(!0),z(H,null,V(e.monthArrays,c=>(p(),w(S,{key:c.name,value:c.value},{default:a(()=>[g(o(c.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(q,null,{default:a(()=>[t(P,null,{default:a(()=>[t(h,{span:24},{default:a(()=>[i("div",He,[t(E,{columns:e.columns,"row-key":c=>c.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,size:"middle"},{bodyCell:a(({column:c,record:r})=>[(p(),z(H,null,V(31,s=>(p(),z(H,{key:s},[c.dataIndex==s?(p(),z(H,{key:0},[r[s].status=="present"?(p(),w(I,{key:0},{title:a(()=>[g(o(n.$t("leave.clock_in"))+" : "+o(r[s].clock_in?e.formatTime(r[s].clock_in):""),1),l[3]||(l[3]=i("br",null,null,-1)),g(" "+o(n.$t("leave.clock_out"))+" : "+o(r[s].clock_out?e.formatTime(r[s].clock_out):""),1),l[4]||(l[4]=i("br",null,null,-1))]),default:a(()=>[t(O,{style:{color:"green"}})]),_:2},1024)):r[s].status=="half_day"&&r[s].is_leave?(p(),w(I,{key:1},{title:a(()=>[g(o(r[s].leave_name)+" ",1),l[5]||(l[5]=i("br",null,null,-1)),g(" "+o(n.$t("leave.clock_in"))+" : "+o(r[s].clock_in?e.formatTime(r[s].clock_in):""),1),l[6]||(l[6]=i("br",null,null,-1)),g(" "+o(n.$t("leave.clock_out"))+" : "+o(r[s].clock_out?e.formatTime(r[s].clock_out):""),1),l[7]||(l[7]=i("br",null,null,-1))]),default:a(()=>[t(k)]),_:2},1024)):r[s].status=="holiday"&&r[s].is_holiday?(p(),w(I,{key:2},{title:a(()=>[g(o(r[s].holiday_name),1)]),default:a(()=>[t(m,{style:{color:"green"}})]),_:2},1024)):r[s].status=="absent"&&r[s].is_leave?(p(),w(I,{key:3},{title:a(()=>[g(o(r[s].leave_name)+" : "+o(r[s].leave_reason),1)]),default:a(()=>[t(x,{style:{color:"red"}})]),_:2},1024)):r[s].status=="absent"?(p(),w(I,{key:4},{title:a(()=>[g(o(n.$t("attendance.absent")),1)]),default:a(()=>[t(y,{style:{color:"red"}})]),_:1})):(p(),z("span",Ee,"-"))],64)):W("",!0)],64))),64)),c.dataIndex=="total"?(p(),w(I,{key:0},{title:a(()=>[g(o(n.$t("attendance.present_working_days")),1)]),default:a(()=>[g(" "+o(r.present_days)+" / "+o(r.working_days),1)]),_:2},1024)):W("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Ze=Q(ze,[["render",Fe]]);export{Ze as default};
