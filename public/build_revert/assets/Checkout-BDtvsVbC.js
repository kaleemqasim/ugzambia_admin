import{a as s,x as te,_ as z,d as I,r as b,Y as R,z as U,a6 as ae,p as C,o as O,g as q,w as t,j as p,t as i,ax as F,b6 as le,I as oe,m as ne,q as M,f as j,b3 as de,F as re,B as T,X as V,u as N,bI as ue,c as H,h as A,D as ie,aH as w,bs as L,bt as me,bk as X,bl as Y,cx as G,aA as pe,b2 as ce,cA as fe,i as _e,k as ve,aB as ge,aC as he,l as be,T as $e,v as ye,C as Se,a1 as ke,a_ as Ae}from"./app-OikDM5Kw.js";import{c as Ce}from"./cart--15qoxZn.js";import{p as Ee}from"./processRequestFront-Dnsx5iTh.js";import{S as Oe}from"./SaveOutlined-BSR-wlKo.js";import{a as we}from"./apiFront-BuqbrQgz.js";import{W as ze}from"./WalletOutlined-CcOLOtgU.js";import"./index-CaGusbUe.js";import"./filter-CQCFHrIe.js";var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};function D(e){for(var a=1;a<arguments.length;a++){var d=arguments[a]!=null?Object(arguments[a]):{},f=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(d).filter(function(_){return Object.getOwnPropertyDescriptor(d,_).enumerable}))),f.forEach(function(_){Re(e,_,d[_])})}return e}function Re(e,a,d){return a in e?Object.defineProperty(e,a,{value:d,enumerable:!0,configurable:!0,writable:!0}):e[a]=d,e}var P=function(a,d){var f=D({},a,d.attrs);return s(te,D({},f,{icon:Ie}),null)};P.displayName="RollbackOutlined";P.inheritAttrs=!1;const Ue=I({props:["formData","addEditVisible","addEditId"],emits:["addEditSuccess"],components:{SaveOutlined:Oe},setup(e,{emit:a}){const d=b(!1),f=b({}),_=b({}),g=b(null),{t:l}=R();U(()=>{d.value=e.addEditVisible,f.value=e.formData,g.value=e.addEditId});const n=()=>{var u="front/self/address";e.addEditId!=null&&(u=`front/self/address/${e.addEditId}`),Ee({url:u,data:f.value,success:m=>{F.success({placement:"bottomRight",message:l("common.success"),description:l("front.address_saved")}),a("addEditSuccess"),_.value={},d.value=!1},error:m=>{_.value=m,le.error(l("common.fix_errors"))}})},r=()=>{d.value=!1};return ae(e,(u,m)=>{d.value=u.addEditVisible,f.value=u.formData,g.value=u.addEditId}),{address:f,rules:_,visible:d,onSubmit:n,onClose:r}}});function Te(e,a,d,f,_,g){const l=oe,n=ne,r=M,u=j,m=de,h=re,$=C("SaveOutlined"),v=T,y=V;return O(),q(y,{open:e.visible,"onUpdate:open":a[9]||(a[9]=o=>e.visible=o),width:"700px",title:e.addEditId==null?e.$t("front.add_new_address"):e.$t("front.edit_address")},{footer:t(()=>[s(v,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"}},{icon:t(()=>[s($)]),default:t(()=>[p(" "+i(e.$t("common.save")),1)]),_:1},8,["onClick"]),s(v,{onClick:e.onClose},{default:t(()=>[p(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:t(()=>[s(h,{layout:"vertical"},{default:t(()=>[s(u,{gutter:16},{default:t(()=>[s(r,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[s(n,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:t(()=>[s(l,{value:e.address.name,"onUpdate:value":a[0]||(a[0]=o=>e.address.name=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),s(u,{gutter:16},{default:t(()=>[s(r,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[s(n,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:t(()=>[s(l,{value:e.address.email,"onUpdate:value":a[1]||(a[1]=o=>e.address.email=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),s(r,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[s(n,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null},{default:t(()=>[s(l,{value:e.address.phone,"onUpdate:value":a[2]||(a[2]=o=>e.address.phone=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),s(u,{gutter:16},{default:t(()=>[s(r,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[s(n,{label:e.$t("user.billing_address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:t(()=>[s(m,{value:e.address.address,"onUpdate:value":a[3]||(a[3]=o=>e.address.address=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.billing_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),s(u,{gutter:16},{default:t(()=>[s(r,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[s(n,{label:e.$t("user.shipping_address"),name:"shipping_address",help:e.rules.shipping_address?e.rules.shipping_address.message:null,validateStatus:e.rules.shipping_address?"error":null},{default:t(()=>[s(m,{value:e.address.shipping_address,"onUpdate:value":a[4]||(a[4]=o=>e.address.shipping_address=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.shipping_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),s(u,{gutter:16},{default:t(()=>[s(r,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[s(n,{label:e.$t("user.city"),name:"city",help:e.rules.city?e.rules.city.message:null,validateStatus:e.rules.city?"error":null},{default:t(()=>[s(l,{value:e.address.city,"onUpdate:value":a[5]||(a[5]=o=>e.address.city=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.city")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),s(r,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[s(n,{label:e.$t("user.state"),name:"state",help:e.rules.state?e.rules.state.message:null,validateStatus:e.rules.state?"error":null},{default:t(()=>[s(l,{value:e.address.state,"onUpdate:value":a[6]||(a[6]=o=>e.address.state=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.state")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),s(u,{gutter:16},{default:t(()=>[s(r,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[s(n,{label:e.$t("user.country"),name:"country",help:e.rules.country?e.rules.country.message:null,validateStatus:e.rules.country?"error":null},{default:t(()=>[s(l,{value:e.address.country,"onUpdate:value":a[7]||(a[7]=o=>e.address.country=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.country")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),s(r,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[s(n,{label:e.$t("user.zipcode"),name:"zipcode",help:e.rules.zipcode?e.rules.zipcode.message:null,validateStatus:e.rules.zipcode?"error":null},{default:t(()=>[s(l,{value:e.address.zipcode,"onUpdate:value":a[8]||(a[8]=o=>e.address.zipcode=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.zipcode")]),type:"number"},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])}const Ve=z(Ue,[["render",Te]]),Pe=I({props:[],emits:["onAddressSelection"],components:{AddEdit:Ve},setup(e,{emit:a}){const d=b(null),f=b([]),_=N(),{t:g}=R(),l=_.state.front.user,n="front/self/address?fields=id,xid,name,email,phone,address,shipping_address,city,state,country,zipcode",r=b(!1),u=b({}),m=b(null);U(()=>{h(),d.value=e.selectedAddress});const h=()=>{axiosFront.get(n).then(c=>{f.value=c.data})};return{userAddresses:f,addAddress:()=>{u.value={name:l.name,phone:l.phone,email:l.email,address:l.address,shipping_address:l.shipping_address,city:l.city,state:l.state,country:l.country,zipcode:l.zipcode},m.value=null,r.value=!0},editAddress:c=>{u.value={name:c.name,email:c.email,phone:c.phone,address:c.address,shipping_address:c.shipping_address,city:c.city,state:c.state,country:c.country,zipcode:c.zipcode,_method:"PUT"},m.value=c.xid,r.value=!0},selectedAddress:d,addressSelected:()=>{a("onAddressSelection",d.value)},buildAddress:ue,addEditVisible:r,addEditAddress:u,addEditId:m,addEditSuccess:()=>{h()},deleteAddress:c=>{V.confirm({title:g("common.delete")+"?",icon:s(w),content:g("front.address_delete_message"),centered:!0,okText:g("common.yes"),okType:"danger",cancelText:g("common.no"),onOk(){axiosFront.delete(`front/self/address/${c}`).then(E=>{h(),F.success({message:g("common.success"),description:g("front.address_deleted"),placement:"bottomRight"})})},onCancel(){}})}}}});function We(e,a,d,f,_,g){const l=T,n=L,r=me,u=X,m=Y,h=G,$=C("AddEdit");return O(),H(ie,null,[s(h,{"item-layout":"horizontal","data-source":e.userAddresses},{renderItem:t(({item:v})=>[s(m,null,{actions:t(()=>[s(l,{onClick:y=>e.editAddress(v),class:"p-0",type:"link"},{default:t(()=>[p(i(e.$t("common.edit")),1)]),_:2},1032,["onClick"]),s(l,{onClick:y=>e.deleteAddress(v.xid),class:"p-0",type:"link"},{default:t(()=>[p(i(e.$t("common.delete")),1)]),_:2},1032,["onClick"])]),default:t(()=>[s(u,null,{title:t(()=>[s(r,{value:e.selectedAddress,"onUpdate:value":a[0]||(a[0]=y=>e.selectedAddress=y),name:"addressCheckbox",onChange:e.addressSelected},{default:t(()=>[s(n,{value:v.xid},{default:t(()=>[p(i(v.name),1)]),_:2},1032,["value"])]),_:2},1032,["value","onChange"])]),description:t(()=>[p(i(e.buildAddress(v)),1),a[1]||(a[1]=A("br",null,null,-1)),p(" "+i(e.$t("user.phone"))+": "+i(v.phone),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),s(l,{class:"pl-0",type:"link",onClick:e.addAddress},{default:t(()=>[p(i(e.$t("front.add_new_address")),1)]),_:1},8,["onClick"]),s($,{addEditVisible:e.addEditVisible,formData:e.addEditAddress,addEditId:e.addEditId,onAddEditSuccess:e.addEditSuccess},null,8,["addEditVisible","formData","addEditId","onAddEditSuccess"])],64)}const Be=z(Pe,[["render",We]]),De=I({components:{DeleteOutlined:pe,WalletOutlined:ze,RollbackOutlined:P,RightOutlined:ce,UserAddress:Be,ExclamationCircleOutlined:w},setup(){const{products:e,updateCart:a,removeItem:d,subtotal:f,totalTax:_,total:g,formatAmountCurrency:l,frontWarehouse:n}=Ce(),r=b(null),u=b(!0),{t:m}=R(),h=ve(),$=N(),{loading:v,addEditRequestFront:y}=we();return U(()=>{}),{products:e,removeItem:d,updateCart:a,formatAmountCurrency:l,subtotal:f,total:g,totalTax:_,selectedAddress:r,addressSelected:c=>{r.value=c},addressMethod:u,getSalesPriceWithTax:fe,confirmOrder:()=>{V.confirm({title:m("front.confirm_order"),icon:s(w),content:m("front.confirm_order_message"),okText:m("common.yes"),cancelText:m("common.no"),onOk(){y({url:`front/self/checkout-orders/${n.value.slug}`,data:{products:e.value,address_id:r.value,warehouse:n.value.slug},successMessage:m("front.order_placed_message"),success:c=>{$.commit("front/addCartItems",[]),h.push({name:"front.checkout.success",params:{uniqueId:c.unique_id,warehouse:n.value.slug}})}})},onCancel(){v.value=!1}})},loading:v,frontWarehouse:n}}}),qe={class:"mt-30 mb-30"},Fe={class:"payment-methods"},Me={class:"cod"},je={class:"icon-text"},Ne={style:{color:"rgba(0, 0, 0, 0.45)"}},He={class:"item-total pd-10"};function Le(e,a,d,f,_,g){const l=C("router-link"),n=ge,r=he,u=be,m=$e,h=C("UserAddress"),$=ye,v=C("wallet-outlined"),y=L,o=M,k=j,c=C("RollbackOutlined"),E=T,J=C("RightOutlined"),W=Se,Q=ke,Z=X,K=Ae,x=C("delete-outlined"),ee=Y,se=G;return O(),H("div",qe,[s(k,{type:"flex",justify:"center"},{default:t(()=>[s(o,{span:20},{default:t(()=>[s(r,null,{default:t(()=>[s(n,null,{default:t(()=>[s(l,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:t(()=>[p(i(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),s(n,null,{default:t(()=>[s(l,{to:{name:"front.dashboard",params:{warehouse:e.frontWarehouse.slug}}},{default:t(()=>[p(i(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),s(n,null,{default:t(()=>[s(l,{to:{name:"front.orders",params:{warehouse:e.frontWarehouse.slug}}},{default:t(()=>[p(i(e.$t("front.my_orders")),1)]),_:1},8,["to"])]),_:1}),s(n,null,{default:t(()=>[p(i(e.$t("front.checkout_page")),1)]),_:1})]),_:1}),s(k,{gutter:[30,30],class:"mt-30"},{default:t(()=>[s(o,{xs:24,sm:24,md:24,lg:16,xl:16},{default:t(()=>[s(W,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:t(()=>[s(k,null,{default:t(()=>[s(o,{span:24},{default:t(()=>[e.selectedAddress==null?(O(),q(u,{key:0,message:e.$t("front.select_shipping_address"),type:"error",class:"mb-10","show-icon":""},null,8,["message"])):_e("",!0),s(m,{level:3},{default:t(()=>[p(" 1. "+i(e.$t("front.address_details")),1)]),_:1}),s(h,{onOnAddressSelection:e.addressSelected},null,8,["onOnAddressSelection"]),s($),s(m,{level:3},{default:t(()=>[p(" 2. "+i(e.$t("front.payment_details")),1)]),_:1}),s(k,{gutter:30,class:"mt-20"},{default:t(()=>[s(o,{xs:24,sm:24,md:24,lg:12,xl:12},{default:t(()=>[A("div",Fe,[A("div",Me,[A("div",je,[s(v,{class:"mr-5"}),p(" "+i(e.$t("front.cash_on_delivery")),1)]),s(y,{checked:e.addressMethod,"onUpdate:checked":a[0]||(a[0]=S=>e.addressMethod=S)},null,8,["checked"])])])]),_:1})]),_:1}),s($),s(k,{gutter:[30,10],class:"mt-40"},{default:t(()=>[s(o,{xs:24,sm:24,md:24,lg:12,xl:12},{default:t(()=>[s(E,{type:"primary",size:"large",block:""},{default:t(()=>[s(l,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:t(()=>[s(c),p(" "+i(e.$t("front.continue_shopping")),1)]),_:1},8,["to"])]),_:1})]),_:1}),s(o,{xs:24,sm:24,md:24,lg:12,xl:12},{default:t(()=>[s(E,{type:"primary",size:"large",onClick:e.confirmOrder,disabled:e.products.length==0||e.selectedAddress==null,loading:e.loading,block:""},{default:t(()=>[p(i(e.$t("front.confirm_order"))+" ",1),s(J)]),_:1},8,["onClick","disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(o,{xs:24,sm:24,md:24,lg:8,xl:8},{default:t(()=>[s(W,{title:null,bordered:!1,style:{borderRadius:"10px"}},{default:t(()=>[s(se,{class:"demo-loadmore-list","item-layout":"horizontal","data-source":e.products},{renderItem:t(({item:S})=>[s(ee,null,{actions:t(()=>[s(E,{type:"link",onClick:B=>e.removeItem(S.xid)},{default:t(()=>[s(x,{style:{fontSize:"20px",color:"#f87171"}})]),_:2},1032,["onClick"])]),default:t(()=>[s(Z,null,{title:t(()=>[p(i(S.name)+" ",1),a[1]||(a[1]=A("br",null,null,-1)),A("small",Ne," Price: "+i(e.formatAmountCurrency(e.getSalesPriceWithTax(S))),1)]),avatar:t(()=>[s(Q,{src:S.image_url,size:"large"},null,8,["src"])]),description:t(()=>[p(i(e.formatAmountCurrency(e.getSalesPriceWithTax(S)*S.cart_quantity)),1)]),_:2},1024),A("div",null,[s(K,{value:S.cart_quantity,"onUpdate:value":B=>S.cart_quantity=B,min:1,style:{width:"60px"},onChange:e.updateCart},null,8,["value","onUpdate:value","onChange"])])]),_:2},1024)]),_:1},8,["data-source"]),s($),A("div",He,[s(k,{class:"mt-10"},{default:t(()=>[s(o,{span:12},{default:t(()=>[p(i(e.$t("stock.grand_total")),1)]),_:1}),s(o,{span:12,class:"text-right"},{default:t(()=>[p(i(e.formatAmountCurrency(e.total)),1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const es=z(De,[["render",Le]]);export{es as default};
