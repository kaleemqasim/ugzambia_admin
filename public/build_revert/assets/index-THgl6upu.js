import{S as Q}from"./SettingSidebar-D526a_C1.js";import{A as Z}from"./AdminPageHeader-MbAN4P4t.js";import{_ as H,d as B,r as V,u as F,Y as R,z as E,o as t,c as v,a as o,ab as x,w as n,h as O,au as ee,ax as ne,J as oe,E as te,b0 as j,bb as ae,p as r,j as l,t as u,g as i,i as k,D as I,bi as se,B as G,aM as J,l as le,q as D,f as N,ar as W,bh as de,m as ie,I as ue,F as re,X as z,bj as ce,cz as me,at as _e,cn as pe,k as fe,aH as q,bA as ge,L as he,s as ye,cC as ke,a1 as ve,bk as be,bl as $e,cx as Ce,G as we,ay as Me,aB as Se,aC as Oe}from"./app-OikDM5Kw.js";import{m as X}from"./modules-oOKQghj_.js";import{S as Ie}from"./ShoppingCartOutlined-BldUIlX-.js";import{I as Te}from"./InfoOutlined-B8OSZUb9.js";import{L as Y,R as K}from"./RightCircleOutlined-D90Hj84Q.js";import"./TranslationOutlined-CEPKXLet.js";import"./UserOutlined-6nf3lw0h.js";import"./ScheduleOutlined-Dj7wWgnj.js";import"./AppstoreAddOutlined-BIf-P8Dc.js";import"./MailOutlined-DcsIPfhp.js";import"./FormOutlined-VUqFOjZT.js";import"./index-CaGusbUe.js";const Ae=B({props:["module"],emits:["updateSuccess"],setup(e,{emit:a}){const s=V(!1),p=V(!1),g=F(),{t:h}=R();return E(()=>{!e.module.verified||e.module.other_domain_verified?s.value=!1:s.value=e.module.status}),{checked:s,loading:p,updateStatus:(d,c)=>{axiosAdmin.post(ee("modules/update-status"),{verified_name:e.module.verified_name,checked:d}).then(_=>{ne.success({placement:"bottomRight",message:h("common.success"),description:h("module.module_status_updated")}),g.commit("auth/updateActiveModules",_.data.enabled_modules),window.config.modules=_.data.enabled_modules,a("updateSuccess")})}}}}),Le={key:0},Pe=["innerHTML"],Ue={key:1};function Ve(e,a,s,p,g,h){const f=oe,d=te;return e.module.verified&&e.module.installed?(t(),v("span",Le,[o(d,null,x({default:n(()=>[o(f,{checked:e.checked,"onUpdate:checked":a[0]||(a[0]=c=>e.checked=c),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified,size:"small"},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:n(()=>[O("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,Pe)]),key:"0"}:void 0]),1024)])):(t(),v("span",Ue," - "))}const He=H(Ae,[["render",Ve]]),Be=B({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:j,InfoCircleOutlined:ae},setup(e,{emit:a}){const s=V(!1),p=window.location.host,{rules:g,purchaseCode:h,errorMessage:f,successMessage:d,loading:c,verifyPurchase:_,productName:m,version:y}=X();return E(()=>{m.value=e.module.verified_name,y.value=e.module.current_version}),{visible:s,showModal:()=>{s.value=!0},handleCancel:()=>{h.value="",s.value=!1},domain:p,rules:g,purchaseCode:h,loading:c,verify:()=>_({success:M=>{a("verifySuccess"),h.value="",s.value=!1}}),errorMessage:f,successMessage:d}}}),ze={key:0},De=["innerHTML"],Ne=["innerHTML"];function Re(e,a,s,p,g,h){const f=se,d=G,c=J,_=le,m=D,y=N,b=r("InfoCircleOutlined"),$=W,C=de,M=ie,T=ue,A=re,L=r("CheckOutlined"),P=z;return t(),v(I,null,[e.module.other_domain_verified?(t(),v("div",ze,[o(f,{color:"red"},{default:n(()=>[l(u(e.$t("messages.other_domain_linked")),1)]),_:1}),a[2]||(a[2]=O("br",null,null,-1)),o(d,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:n(()=>[l(u(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(t(),i(c,{key:1,type:"success",strong:""},{default:n(()=>[l(u(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(t(),i(c,{key:2,type:"success",strong:""},{default:n(()=>a[3]||(a[3]=[l(" - ")])),_:1})):(t(),i(d,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:n(()=>[l(u(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),o(P,{open:e.visible,"onUpdate:open":a[1]||(a[1]=U=>e.visible=U),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:n(()=>[o(d,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:n(()=>[o(L)]),default:n(()=>[l(" "+u(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),o(d,{key:"back",onClick:e.handleCancel},{default:n(()=>[l(u(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[e.successMessage!=""?(t(),i(_,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.successMessage},null,8,De)]),_:1})):k("",!0),e.errorMessage!=""?(t(),i(_,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.errorMessage},null,8,Ne)]),_:1})):k("",!0),e.module.other_domain_verified&&e.errorMessage==""?(t(),i(y,{key:2,class:"mb-10"},{default:n(()=>[o(m,{span:24},{default:n(()=>[o(_,{type:"error","show-icon":""},{message:n(()=>[l(u(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):k("",!0),o(y,{class:"mb-10"},{default:n(()=>[o(m,{span:24},{default:n(()=>[o(C,null,{default:n(()=>[O("blockquote",null,[o($,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:n(()=>[o(b),l(" "+u(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),o(A,{layout:"vertical"},{default:n(()=>[o(M,{label:e.$t("common.domain"),name:"domain"},{default:n(()=>[o(c,{strong:""},{default:n(()=>[l(u(e.domain),1)]),_:1})]),_:1},8,["label"]),o(M,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:n(()=>[o(T,{value:e.purchaseCode,"onUpdate:value":a[0]||(a[0]=U=>e.purchaseCode=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Ee=H(Be,[["render",Re]]),qe=B({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:ce,ShoppingCartOutlined:Ie,ReloadOutlined:me,SyncOutlined:_e,CheckCircleOutlined:pe,InfoOutlined:Te,CheckOutlined:j},setup(e,{emit:a}){const{t:s}=R(),p=V(!1),g=V("");return fe(),{install:()=>{z.confirm({title:s("common.install"),icon:o(q),content:s("messages.are_you_sure_install_message"),okText:s("common.yes"),okType:"danger",cancelText:s("common.no"),onOk(){g.value=s("common.installing")+"...",a("install",e.module.verified_name),p.value=!0},onCancel(){}})},update:()=>{z.confirm({title:s("common.update"),icon:o(q),content:s("messages.are_you_sure_update_message"),okText:s("common.yes"),okType:"danger",cancelText:s("common.no"),onOk(){g.value=s("common.updating")+"...",a("install",e.module.verified_name),p.value=!0},onCancel(){}})},installUpdateModalVisible:p,closeInstallUpdateModal:()=>{p.value=!1,window.location.reload()}}}});function Fe(e,a,s,p,g,h){const f=r("DownloadOutlined"),d=G,c=r("ReloadOutlined"),_=r("ShoppingCartOutlined"),m=J,y=r("SyncOutlined"),b=r("CheckCircleOutlined"),$=ge,C=D,M=N,T=r("InfoOutlined"),A=r("CheckOutlined"),L=z;return t(),v(I,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(t(),i(d,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:n(()=>[o(f)]),default:n(()=>[l(" "+u(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(t(),i(d,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:n(()=>[o(c)]),default:n(()=>[l(" "+u(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(t(),i(d,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:n(()=>[o(_)]),default:n(()=>[l(" "+u(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(t(),i(m,{key:3,type:"success",strong:""},{default:n(()=>a[1]||(a[1]=[l(" - ")])),_:1})),o(L,{open:e.installUpdateModalVisible,"onUpdate:open":a[0]||(a[0]=P=>e.installUpdateModalVisible=P),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:n(()=>[o(M,{class:"mb-10"},{default:n(()=>[o(C,{span:24},{default:n(()=>[e.downloadPercentage<100?(t(),i(m,{key:0},{default:n(()=>[o(y,{spin:""}),l(" "+u(e.$t("messages.downloading_started_message")),1)]),_:1})):(t(),i(m,{key:1,strong:"",type:"success"},{default:n(()=>[o(b),l(" "+u(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(t(),i($,{key:2,percent:e.downloadPercentage},null,8,["percent"])):k("",!0)]),_:1})]),_:1}),o(M,{class:"mb-10"},{default:n(()=>[o(C,{span:24},{default:n(()=>[e.extracting==""?(t(),i(m,{key:0,type:"secondary"},{default:n(()=>[o(T),l(" "+u(e.$t("module.extract_zip_file")),1)]),_:1})):k("",!0),e.extracting=="started"?(t(),i(m,{key:1},{default:n(()=>[o(y,{spin:""}),l(" "+u(e.$t("messages.file_extracting_message")),1)]),_:1})):k("",!0),e.extracting=="completed"?(t(),i(m,{key:2,strong:"",type:"success"},{default:n(()=>[o(b),l(" "+u(e.$t("module.file_extracted")),1)]),_:1})):k("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(t(),i(M,{key:0,class:"mt-10 mb-10"},{default:n(()=>[o(C,{span:24},{default:n(()=>[o(d,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:n(()=>[o(A),l(" "+u(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):k("",!0)]),_:1},8,["open","title"])],64)}const je=H(qe,[["render",Fe]]),Ge=B({components:{ModuleStatus:He,VerifyModule:Ee,ModuleAction:je,LeftCircleOutlined:Y,RightCircleOutlined:K},setup(){const{t:e}=R();F();const a=window.config.app_env,{allModules:s,dataLoading:p,getModuleData:g,offers:h,settings:f,install:d,downloading:c,downloadPercentage:_,extracting:m}=X(),y=[{title:e("module.name"),dataIndex:"name",width:"25%",sorter:!0},{title:e("module.verified"),dataIndex:"verified",width:"15%",sorter:!0},{title:e("module.current_version"),dataIndex:"current_version",sorter:!0},{title:e("module.latest_version"),dataIndex:"version",sorter:!0},{title:e("module.status"),dataIndex:"status",sorter:!0},{title:e("common.action"),dataIndex:"action"}];return E(()=>{g()}),{modulesTableColumns:y,allModules:s,getModuleData:g,installModule:$=>{d($)},dataLoading:p,offers:h,settings:f,downloading:c,downloadPercentage:_,extracting:m,appEnv:a}}}),Je={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},We={class:"custom-slick-arrow",style:{right:"10px"}},Xe=["src"],Ye={key:0,class:"table-responsive"},Ke={key:1};function Qe(e,a,s,p,g,h){const f=r("left-circle-outlined"),d=r("right-circle-outlined"),c=W,_=ke,m=D,y=N,b=ve,$=be,C=$e,M=Ce,T=r("VerifyModule"),A=r("ModuleStatus"),L=r("ModuleAction"),P=we,U=r("admin-page-table-content");return t(),v(I,null,[e.offers&&e.offers.length>0?(t(),i(y,{key:0},{default:n(()=>[o(m,{span:24},{default:n(()=>[o(_,{arrows:""},{prevArrow:n(()=>[O("div",Je,[o(f)])]),nextArrow:n(()=>[O("div",We,[o(d)])]),default:n(()=>[(t(!0),v(I,null,he(e.offers,w=>(t(),v("div",{key:w.id},[o(c,{href:w.url,target:"_blank"},{default:n(()=>[O("img",{src:w.image_url,style:ye({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,Xe)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):k("",!0),o(U,null,{default:n(()=>[o(y,{class:"mt-20 mb-20"},{default:n(()=>[o(m,{span:24},{default:n(()=>[e.allModules?(t(),v("div",Ye,[o(P,{columns:e.modulesTableColumns,"row-key":w=>w.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:n(({column:w,record:S})=>[w.dataIndex=="name"?(t(),i(M,{key:0},{default:n(()=>[o(C,null,{default:n(()=>[o($,{description:S.description},{title:n(()=>[l(u(S.name),1)]),avatar:n(()=>[o(b,{src:S.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):k("",!0),w.dataIndex=="verified"?(t(),i(T,{key:1,module:S,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):k("",!0),w.dataIndex=="status"?(t(),i(A,{key:2,module:S,status:S.status,moduleName:S.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):k("",!0),w.dataIndex=="action"?(t(),v(I,{key:3},[e.appEnv=="envato"?(t(),i(L,{key:0,module:S,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(t(),v("span",Ke,"-"))],64)):k("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):k("",!0)]),_:1})]),_:1})]),_:1})],64)}const Ze=H(Ge,[["render",Qe]]),xe=B({components:{LeftCircleOutlined:Y,RightCircleOutlined:K,SettingSidebar:Q,AdminPageHeader:Z,ModuleSetting:Ze},setup(){return{}}});function en(e,a,s,p,g,h){const f=Me,d=r("router-link"),c=Se,_=Oe,m=r("AdminPageHeader"),y=r("SettingSidebar"),b=D,$=r("ModuleSetting"),C=N;return t(),v(I,null,[o(m,null,{header:n(()=>[o(f,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[o(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[o(c,null,{default:n(()=>[o(d,{to:{name:"admin.dashboard.index"}},{default:n(()=>[l(u(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),o(c,null,{default:n(()=>[l(u(e.$t("menu.settings")),1)]),_:1}),o(c,null,{default:n(()=>[l(u(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),o(C,null,{default:n(()=>[o(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[o(y)]),_:1}),o(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[o($)]),_:1})]),_:1})],64)}const gn=H(xe,[["render",en]]);export{gn as default};
