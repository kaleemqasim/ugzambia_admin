import{_ as A,d as H,b as D,z as V,V as z,a6 as T,o as u,g as $,w as a,a as e,h as F,c as x,j as _,t as d,D as S,i as h,p as c,aL as L,aM as j,E as G,aN as q,G as O,q as I,f as E,e as W,r as J,cg as K,k as Q,L as X,ay as Y,aB as Z,aC as ee,aD as te,aG as ae}from"./app-OikDM5Kw.js";import{d as B}from"./datatable-DjynKO_7.js";import{U as M}from"./UserInfo-4wSQ2hbz.js";import{D as ne}from"./DateRangePicker-S2EeC5bP.js";import{A as se}from"./AdminPageHeader-MbAN4P4t.js";import{b as oe,E as re}from"./ExportTable-CioT-h8X.js";import{P as le}from"./PaymentStatus-CjQCOJGj.js";import"./filter-CQCFHrIe.js";import"./index-CaGusbUe.js";import"./PrinterOutlined-DKHuCtDd.js";import"./fields-Bh473hAH.js";const me=H({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:M,PaymentStatus:le},setup(t){const{salesSummaryColumns:o,orderHashableColumns:k}=oe(),{formatDateTime:r,formatAmountCurrency:b,selectedWarehouse:C}=D(),s=B();V(()=>{i(t)});const i=n=>{const l={};n.user_id&&n.user_id!=null&&(l.staff_user_id=n.user_id),s.tableUrl.value={url:"sales?fields=id,xid,order_date,invoice_number,total,payment_status,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},staff_user_id,x_staff_user_id,staffMember{id,xid,name,profile_image,profile_image_url,user_type}",filters:l,extraFilters:{dates:n.dates}},s.hashable.value=[...k],s.table.sorter={field:"order_date",order:"desc"},s.exportDetails.value={allowExport:!0,exportType:"sales_summary_reports"},s.fetch({page:1})},y=z(()=>{let n=0;return s.table.data.forEach(l=>{n+=l.total}),{totalAmount:n}});return T(t,(n,l)=>{i(n)}),T(C,(n,l)=>{i(t)}),{salesSummaryColumns:o,...s,formatDateTime:r,formatAmountCurrency:b,totals:y}}}),ue={class:"table-responsive"};function _e(t,o,k,r,b,C){const s=c("UserInfo"),i=c("PaymentStatus"),y=L,n=j,l=G,v=q,g=O,w=I,P=E;return u(),$(P,null,{default:a(()=>[e(w,{span:24},{default:a(()=>[F("div",ue,[e(g,{columns:t.salesSummaryColumns,"row-key":m=>m.xid,"data-source":t.table.data,pagination:t.table.pagination,loading:t.table.loading,onChange:t.handleTableChange,id:"sales-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:m,record:p})=>[m.dataIndex==="order_date"?(u(),x(S,{key:0},[_(d(t.formatDateTime(p.order_date)),1)],64)):h("",!0),m.dataIndex==="payment_type"?(u(),x(S,{key:1},[_(d(p.payment_type=="in"?t.$t("menu.payment_in"):t.$t("menu.payment_out")),1)],64)):h("",!0),m.dataIndex==="user_id"?(u(),$(s,{key:2,user:p.user},null,8,["user"])):h("",!0),m.dataIndex==="amount"?(u(),x(S,{key:3},[_(d(t.formatAmountCurrency(p.total)),1)],64)):h("",!0),m.dataIndex==="payment_status"?(u(),$(i,{key:4,paymentStatus:p.payment_status},null,8,["paymentStatus"])):h("",!0),m.dataIndex==="staff_user_id"?(u(),x(S,{key:5},[_(d(p.staff_member.name),1)],64)):h("",!0)]),summary:a(()=>[e(v,null,{default:a(()=>[e(y,{"col-span":2}),e(y,{"col-span":1},{default:a(()=>[e(n,{strong:""},{default:a(()=>[_(d(t.$t("common.total")),1)]),_:1})]),_:1}),e(y,{"col-span":1},{default:a(()=>[e(n,{strong:""},{default:a(()=>[e(l,null,{default:a(()=>[_(d(t.formatAmountCurrency(t.totals.totalAmount)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})}const de=A(me,[["render",_e]]),ie={components:{UserInfo:M,DateRangePicker:ne,AdminPageHeader:se,SalesSummary:de,ExprotTable:re},setup(){const t=B(),{permsArray:o,willSubscriptionModuleVisible:k}=D(),r=W({user_id:void 0,payment_mode_id:void 0,dates:[]}),b=J({}),C=Q();return K(()=>{(!(o.value.includes("users_view")||o.value.includes("admin"))||!k("reports"))&&C.push("admin.dashboard.index")}),V(()=>{const s=axiosAdmin.get("users?limit=10000");Promise.all([s]).then(([i])=>{b.value=i.data})}),{...t,filters:r,users:b,permsArray:o}}};function pe(t,o,k,r,b,C){const s=c("ExprotTable"),i=Y,y=c("router-link"),n=Z,l=ee,v=c("AdminPageHeader"),g=I,w=ae,P=te,m=c("DateRangePicker"),p=E,N=c("admin-page-filters"),U=c("SalesSummary"),R=c("admin-page-table-content");return u(),x(S,null,[e(v,null,{header:a(()=>[e(i,{title:t.$t("menu.sales_summary"),class:"p-0"},{extra:a(()=>[e(s,{exportType:"sales_summary_reports",tableName:"sales-summary-reports-table",title:`${t.$t("menu.sales_summary")} ${t.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[e(l,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[e(n,null,{default:a(()=>[e(y,{to:{name:"admin.dashboard.index"}},{default:a(()=>[_(d(t.$t("menu.dashboard")),1)]),_:1})]),_:1}),e(n,null,{default:a(()=>[_(d(t.$t("menu.reports")),1)]),_:1}),e(n,null,{default:a(()=>[_(d(t.$t("menu.sales_summary")),1)]),_:1})]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(p,{gutter:[16,16]},{default:a(()=>[e(g,{xs:24,sm:24,md:12,lg:10,xl:10}),e(g,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[e(p,{gutter:[16,16],justify:"end"},{default:a(()=>[e(g,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[e(P,{value:r.filters.user_id,"onUpdate:value":o[0]||(o[0]=f=>r.filters.user_id=f),placeholder:t.$t("common.select_default_text",[t.$t("staff_member.staff_member")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(u(!0),x(S,null,X(r.users,f=>(u(),$(w,{key:f.xid,title:f.name,value:f.xid},{default:a(()=>[_(d(f.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),e(g,{xs:24,sm:24,md:10,lg:8,xl:8},{default:a(()=>[e(m,{onDateTimeChanged:o[1]||(o[1]=f=>{r.filters.dates=f})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(U,{user_id:r.filters.user_id,dates:r.filters.dates},null,8,["user_id","dates"])]),_:1})],64)}const ve=A(ie,[["render",pe]]);export{ve as default};
