import{S as Y}from"./SettingSidebar-Bq2E_4rK.js";import{A as J}from"./AdminPageHeader-Gv6zmnDo.js";import{_ as M,d as K,f as $,Y as A,r as v,o as p,c as w,i as S,w as a,a as e,l as n,t as s,k,G as I,au as q,ax as L,B as R,m as j,q as U,h as O,I as H,n as N,F as V,X as Q,bd as Z,H as x,E as F,j as ee,b8 as ae,v as te,a$ as le,x as ne,by as se,C as P,b as oe,aG as me,aD as re,p as ie,a0 as ue,ay as de,aB as _e,aC as ce}from"./app-Bqx6TROa.js";import{a as T}from"./apiAdmin-Bfx_qk4c.js";import{S as pe}from"./SendOutlined-Y3PFWckF.js";import"./index-ypCCJJJJ.js";import{S as W}from"./SaveOutlined-0z7ZR1B7.js";import"./MailOutlined-1QF7CSLg.js";import"./TranslationOutlined-AafaB5fp.js";import"./UserOutlined-DfdFSUz3.js";import"./ShoppingCartOutlined-BYWs7u71.js";import"./ScheduleOutlined-Ak5FP1vl.js";import"./AppstoreAddOutlined-dkM99jTL.js";import"./FormOutlined-CqwY0MoP.js";const fe=K({props:["formData","verified"],components:{SendOutlined:pe},setup(){const{addEditRequestAdmin:t,loading:i,rules:b}=T(),l=$(!1),f=$(""),_=$(""),{t:d}=A();return{loading:i,rules:b,email:f,visible:l,showModal:()=>{l.value=!0},sendMail:()=>{_.value="",t({url:q("settings/email/send-test-mail"),data:{email:f.value},success:m=>{_.value="",m.status=="success"?L.success({placement:"bottomRight",message:d("common.success"),description:d("mail_settings.test_mail_sent_successfully")}):_.value=m.message},error:m=>{_.value=""}})},handleCancel:()=>{l.value=!1,i.value=!1,f.value="",_.value="",b.value={}},errorMessage:_}}});function ge(t,i,b,l,f,_){const d=v("SendOutlined"),u=R,o=j,r=U,m=O,g=H,h=N,D=V,C=Q;return p(),w(I,null,[t.formData.mail_driver=="mail"||t.formData.mail_driver=="smtp"?(p(),S(u,{key:0,onClick:t.showModal,disabled:!t.verified},{icon:a(()=>[e(d)]),default:a(()=>[n(" "+s(t.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):k("",!0),e(C,{open:t.visible,"onUpdate:open":i[1]||(i[1]=y=>t.visible=y),maskClosable:!1,title:t.$t("mail_settings.send_test_mail"),onCancel:t.handleCancel},{footer:a(()=>[e(u,{key:"submit",type:"primary",loading:t.loading,onClick:t.sendMail},{icon:a(()=>[e(d)]),default:a(()=>[n(" "+s(t.$t("common.send")),1)]),_:1},8,["loading","onClick"]),e(u,{key:"back",onClick:t.handleCancel},{default:a(()=>[n(s(t.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[e(D,{layout:"vertical"},{default:a(()=>[t.errorMessage!=""?(p(),S(m,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[e(r,{span:24},{default:a(()=>[e(o,{message:t.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):k("",!0),e(m,{gutter:16},{default:a(()=>[e(r,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e(h,{label:t.$t("mail_settings.email"),name:"email",help:t.rules.email?t.rules.email.message:null,validateStatus:t.rules.email?"error":null,class:"required"},{default:a(()=>[e(g,{value:t.email,"onUpdate:value":i[0]||(i[0]=y=>t.email=y),placeholder:t.$t("common.placeholder_default_text",[t.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const ve=M(fe,[["render",ge]]),be={components:{InfoCircleOutlined:Z}};function he(t,i,b,l,f,_){const d=v("InfoCircleOutlined"),u=x;return p(),S(u,null,{title:a(()=>[n(s(t.$t("mail_settings.notificaiton_will_be_sent_to_warehouse")),1)]),default:a(()=>[e(d)]),_:1})}const Se=M(be,[["render",he]]),ye={props:["sendMailSettings"],components:{TooltipWarehouse:Se},setup(t){const{addEditRequestAdmin:i}=T(),{t:b}=A(),l=$([]);return F(()=>{l.value=t.sendMailSettings.credentials}),{settings:l,settingsChanged:_=>{i({url:q("settings/email/send-mail-settings"),data:{name_key:"warehouse",settings:_},success:d=>{ae.success(b("mail_settings.send_mail_setting_saved"))}})}}}},ke={class:"notificaiton-setting-bar"},$e={style:{marginTop:"8px",paddingBottom:"14px"}};function Ce(t,i,b,l,f,_){const d=v("TooltipWarehouse"),u=te,o=U,r=le,m=ne,g=O,h=se,D=P,C=v("perfect-scrollbar");return p(),w("div",ke,[e(C,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[e(D,{class:"page-content-container"},{title:a(()=>[ee("div",$e,s(t.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[e(h,{value:l.settings,"onUpdate:value":i[0]||(i[0]=y=>l.settings=y),style:{width:"100%"},onChange:l.settingsChanged},{default:a(()=>[e(g,null,{default:a(()=>[e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.stock_adjustment"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"stock_adjustment_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"stock_adjustment_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"stock_adjustment_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.purchase_returns"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"purchase_returns_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"purchase_returns_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"purchase_returns_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.purchases"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"purchases_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"purchases_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"purchases_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.sales"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"sales_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"sales_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"sales_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.sales_returns"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"sales_returns_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"sales_returns_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"sales_returns_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.expenses"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"expense_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"expense_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"expense_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(u,{level:5},{default:a(()=>[n(s(t.$t("menu.staff_members"))+" ",1),e(d)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"staff_member_create"},{default:a(()=>[n(s(t.$t("common.on_create")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"staff_member_update"},{default:a(()=>[n(s(t.$t("common.on_update")),1)]),_:1})]),_:1}),e(o,{span:24,class:"mb-5"},{default:a(()=>[e(r,{value:"staff_member_delete"},{default:a(()=>[n(s(t.$t("common.on_delete")),1)]),_:1})]),_:1}),e(m)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const De=M(ye,[["render",Ce]]),we={components:{SaveOutlined:W,TestMail:ve,SendMailSetting:De},setup(){const{addEditRequestAdmin:t,loading:i,rules:b}=T(),{appType:l}=oe();T();const{t:f}=A(),_=$({}),d=$(!1),u=$(""),o=$([]);return F(()=>{axiosAdmin.get(q("settings/email")).then(m=>{_.value=m.data.settings,o.value=m.data.sendMailSettings,d.value=m.data.verified,u.value=m.data.verified?f("messages.stmp_success_message"):f("messages.stmp_error_message")})}),{appType:l,formData:_,rules:b,loading:i,onSubmit:()=>{t({url:q("settings/email/update"),data:_.value,successMessage:f("mail_settings.updated"),success:m=>{d.value=m.verified,u.value=m.verified?f("messages.stmp_success_message"):m.message}})},verified:d,verifiedMessage:u,warehouseSendMailSettings:o}}},Me={key:0},qe={key:0},Te={key:1};function Ue(t,i,b,l,f,_){const d=j,u=me,o=re,r=N,m=U,g=O,h=H,D=ie,C=v("SaveOutlined"),y=R,B=v("TestMail"),E=ue,G=V,X=P,z=v("SendMailSetting");return p(),S(g,null,{default:a(()=>[e(m,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:l.appType=="saas"?24:18,xl:l.appType=="saas"?24:18},{default:a(()=>[l.formData.mail_driver=="smtp"?(p(),w("div",Me,[l.verified?(p(),S(d,{key:0,description:l.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(p(),S(d,{key:1,description:l.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):k("",!0),e(X,{class:"settings-sidebar-content-container"},{default:a(()=>[e(G,{layout:"vertical"},{default:a(()=>[e(g,{gutter:16},{default:a(()=>[e(m,{span:24},{default:a(()=>[e(r,{label:t.$t("mail_settings.mail_driver"),name:"mail_driver",help:l.rules.mail_driver?l.rules.mail_driver.message:null,validateStatus:l.rules.mail_driver?"error":null},{default:a(()=>[e(o,{value:l.formData.mail_driver,"onUpdate:value":i[0]||(i[0]=c=>l.formData.mail_driver=c),placeholder:t.$t("common.select_default_text",[t.$t("mail_settings.mail_driver")])},{default:a(()=>[e(u,{key:"none",value:"none"},{default:a(()=>[n(s(t.$t("mail_settings.none")),1)]),_:1}),e(u,{key:"smtp",value:"smtp"},{default:a(()=>[n(s(t.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l.formData.mail_driver=="mail"||l.formData.mail_driver=="smtp"?(p(),w("div",qe,[e(g,{gutter:16},{default:a(()=>[e(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(r,{label:t.$t("mail_settings.from_name"),name:"from_name",help:l.rules.from_name?l.rules.from_name.message:null,validateStatus:l.rules.from_name?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.from_name,"onUpdate:value":i[1]||(i[1]=c=>l.formData.from_name=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(r,{label:t.$t("mail_settings.from_email"),name:"from_email",help:l.rules.from_email?l.rules.from_email.message:null,validateStatus:l.rules.from_email?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.from_email,"onUpdate:value":i[2]||(i[2]=c=>l.formData.from_email=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):k("",!0),l.formData.mail_driver=="smtp"?(p(),w("div",Te,[e(g,{gutter:16},{default:a(()=>[l.formData.mail_driver=="smtp"?(p(),S(m,{key:0,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:a(()=>[e(r,{label:t.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:l.rules.enable_mail_queue?l.rules.enable_mail_queue.message:null,validateStatus:l.rules.enable_mail_queue?"error":null,class:"required"},{default:a(()=>[e(o,{value:l.formData.enable_mail_queue,"onUpdate:value":i[3]||(i[3]=c=>l.formData.enable_mail_queue=c),placeholder:t.$t("common.select_default_text",[t.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:a(()=>[e(u,{key:"yes",value:"yes"},{default:a(()=>[n(s(t.$t("common.yes")),1)]),_:1}),e(u,{key:"no",value:"no"},{default:a(()=>[n(s(t.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):k("",!0),l.formData.mail_driver=="smtp"?(p(),S(m,{key:1,xs:24,sm:24,md:24,lg:l.formData.mail_driver=="smtp"?12:24},{default:a(()=>[e(r,{label:t.$t("mail_settings.host"),name:"host",help:l.rules.host?l.rules.host.message:null,validateStatus:l.rules.host?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.host,"onUpdate:value":i[4]||(i[4]=c=>l.formData.host=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):k("",!0)]),_:1}),e(g,{gutter:16},{default:a(()=>[e(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(r,{label:t.$t("mail_settings.port"),name:"port",help:l.rules.port?l.rules.port.message:null,validateStatus:l.rules.port?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.port,"onUpdate:value":i[5]||(i[5]=c=>l.formData.port=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(r,{label:t.$t("mail_settings.encryption"),name:"encryption",help:l.rules.encryption?l.rules.encryption.message:null,validateStatus:l.rules.encryption?"error":null},{default:a(()=>[e(o,{value:l.formData.encryption,"onUpdate:value":i[6]||(i[6]=c=>l.formData.encryption=c),placeholder:t.$t("common.select_default_text",[t.$t("mail_settings.encryption")]),allowClear:!0},{default:a(()=>[e(u,{key:"tls",value:"tls"},{default:a(()=>[n(" tls ")]),_:1}),e(u,{key:"ssl",value:"ssl"},{default:a(()=>[n(" ssl ")]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e(g,{gutter:16},{default:a(()=>[e(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(r,{label:t.$t("mail_settings.username"),name:"username",help:l.rules.username?l.rules.username.message:null,validateStatus:l.rules.username?"error":null,class:"required"},{default:a(()=>[e(h,{value:l.formData.username,"onUpdate:value":i[7]||(i[7]=c=>l.formData.username=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),e(m,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[e(r,{label:t.$t("mail_settings.password"),name:"password",help:l.rules.password?l.rules.password.message:null,validateStatus:l.rules.password?"error":null,class:"required"},{default:a(()=>[e(D,{value:l.formData.password,"onUpdate:value":i[8]||(i[8]=c=>l.formData.password=c),placeholder:t.$t("common.placeholder_default_text",[t.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):k("",!0),e(g,{gutter:16},{default:a(()=>[e(m,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[e(r,null,{default:a(()=>[e(E,null,{default:a(()=>[e(y,{type:"primary",onClick:l.onSubmit,loading:l.loading},{icon:a(()=>[e(C)]),default:a(()=>[n(" "+s(t.$t("common.update")),1)]),_:1},8,["onClick","loading"]),e(B,{formData:l.formData,verified:l.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),l.appType=="non-saas"?(p(),S(m,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[l.warehouseSendMailSettings&&l.warehouseSendMailSettings.xid?(p(),S(z,{key:0,sendMailSettings:l.warehouseSendMailSettings},null,8,["sendMailSettings"])):k("",!0)]),_:1})):k("",!0)]),_:1})}const Oe=M(we,[["render",Ue]]),Be={components:{SettingSidebar:Y,AdminPageHeader:J,EmailSettings:Oe,SaveOutlined:W},setup(){const t=$(null);return{onSubmit:()=>{t.value.onSubmit()},settingRef:t}}};function Ee(t,i,b,l,f,_){const d=v("SaveOutlined"),u=R,o=de,r=v("router-link"),m=_e,g=ce,h=v("AdminPageHeader"),D=v("SettingSidebar"),C=U,y=v("EmailSettings"),B=v("admin-page-table-content"),E=O;return p(),w(I,null,[e(h,null,{header:a(()=>[e(o,{title:t.$t("menu.email_settings"),class:"p-0"},{extra:a(()=>[e(u,{type:"primary",onClick:l.onSubmit,loading:!!(l.settingRef&&l.settingRef.loading)},{icon:a(()=>[e(d)]),default:a(()=>[n(" "+s(t.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[e(g,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[e(m,null,{default:a(()=>[e(r,{to:{name:"admin.dashboard.index"}},{default:a(()=>[n(s(t.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),e(m,null,{default:a(()=>[n(s(t.$t("menu.settings")),1)]),_:1}),e(m,null,{default:a(()=>[n(s(t.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),e(E,null,{default:a(()=>[e(C,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[e(D)]),_:1}),e(C,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[e(B,null,{default:a(()=>[e(y,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const Je=M(Be,[["render",Ee]]);export{Je as default};
