import{a as n,y as K,_ as Y,d as ee,aV as J,g as te,f as v,E as ne,aW as ae,a6 as oe,aX as le,r as k,o as _,i as D,ab as ie,w as a,c as b,M as N,G as P,aY as re,aD as Z,l as S,t as y,aG as Q,aw as ce,R as se,aA as de,aH as j,aT as ue,b as pe,Y as me,ak as _e,X as he,aZ as fe,k as B,j as $,ay as ge,aB as ve,aC as be,q as ye,h as ke,a_ as Se,B as xe,J as Ce,a$ as we,n as Oe,F as Te,a0 as Le,C as Ie,s as W,b0 as Be,b1 as Pe}from"./app-CXajSIJN.js";import{A as Ae}from"./AdminPageHeader-CLpphX8z.js";import{_ as De}from"./BarcodeGenerator-Da8dEgpg.js";import"./index-CDZHKPbx.js";import{S as ze}from"./SaveOutlined-Ba1zpIZL.js";import{B as qe}from"./BarcodeOutlined-CAyFaXy9.js";import{P as Ne}from"./PrinterOutlined-oLRqAQtu.js";var $e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};const He=$e;function X(t){for(var l=1;l<arguments.length;l++){var i=arguments[l]!=null?Object(arguments[l]):{},e=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable}))),e.forEach(function(s){Ee(t,s,i[s])})}return t}function Ee(t,l,i){return l in t?Object.defineProperty(t,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[l]=i,t}var V=function(l,i){var e=X({},l,i.attrs);return n(K,X({},e,{icon:He}),null)};V.displayName="LinkOutlined";V.inheritAttrs=!1;const Fe=V,Me=ee({props:["productData"],emits:["valueSuccess","valueChanged","showProduct"],components:{SearchOutlined:J},setup(t,{emit:l}){const i=te({searchTerm:[],fetching:!1,products:[]}),e=v({});ne(()=>{s(t)});const s=r=>{r.productData&&r.productData.product?(i.products=[{xid:r.productData.x_product_id,name:r.productData.product.name}],i.searchTerm=r.productData.x_product_id):(i.searchTerm=[],i.products=[]),l("valueSuccess")},h=(r,d)=>{l("valueChanged",d),l("valueSuccess")},C=ae(r=>{if(i.products=[],r!=""){i.fetching=!0;const d=`name lk "%${r}%" or item_code lk "%${r}%"`;let c=`products?fields=xid,name,item_code,barcode_symbology,details{sales_price}&filters=${encodeURIComponent(d)}&limit=10`;axiosAdmin.get(c).then(T=>{i.products=T.data,i.fetching=!1})}},300),w=(r,d)=>{e.value=d.product,l("showProduct",e.value),i.searchTerm=[],i.products=[]};return oe(t,(r,d)=>{s(r)}),{...le(i),fetchProducts:C,valueChanged:h,searchValueSelected:w}}});function Ue(t,l,i,e,s,h){const C=k("SearchOutlined"),w=re,r=Q,d=Z;return _(),D(d,{value:t.searchTerm,"onUpdate:value":l[0]||(l[0]=c=>t.searchTerm=c),"show-search":"","filter-option":!1,placeholder:t.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":t.fetching?void 0:null,onSearch:t.fetchProducts,"option-label-prop":"label",onChange:t.valueChanged,allowClear:!0,onSelect:t.searchValueSelected},ie({suffixIcon:a(()=>[n(C)]),default:a(()=>[(_(!0),b(P,null,N(t.products,c=>(_(),D(r,{key:c.xid,value:c.xid,label:c.name,product:c},{default:a(()=>[S(y(c.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[t.fetching?{name:"notFoundContent",fn:a(()=>[n(w,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onChange","onSelect"])}const Re=Y(Me,[["render",Ue]]),Ve={components:{EyeOutlined:ce,PlusOutlined:se,DeleteOutlined:de,ExclamationCircleOutlined:j,SearchOutlined:J,SaveOutlined:ze,LoadingOutlined:ue,BarcodeOutlined:qe,PrinterOutlined:Ne,LinkOutlined:Fe,BarcodeGenerator:De,AdminPageHeader:Ae,ProductSearchInput:Re},setup(){const{appSetting:t,permsArray:l,formatAmountCurrency:i}=pe(),{t:e}=me(),s=v([]),h=v(40),C=v(""),w=v(""),r=v([]),d=v({}),c=v({}),T=v(null),O=v(!1),L=v(!1),H=v([{label:"40 per sheet (a4) (1.799 * 1.003)",value:40},{label:"30 per sheet (2.625 * 1)",value:30},{label:"24 per sheet (a4) (2.48 * 1.334)",value:24},{label:"20 per sheet (4 * 1)",value:20},{label:"18 per sheet (a4) (2.5 * 1.835)",value:18},{label:"14 per sheet (4 * 1.33)",value:14},{label:"12 per sheet (a4) (2.5 * 2.834)",value:12},{label:"10 per sheet (4 * 2)",value:10}]),E=[{title:"#",dataIndex:"sn"},{title:e("print_barcode.name"),dataIndex:"name"},{title:e("print_barcode.quantity"),dataIndex:"unit_quantity"},{title:e("common.action"),dataIndex:"action"}],A=o=>{_e(s.value,p=>{p.xid==o.xid&&(p.quantity=o.quantity)}),I()},F=()=>{s.value=[],r.value=[]},z=o=>{he.confirm({title:e("common.delete")+"?",icon:n(j),content:e("print_barcode.delete_message"),centered:!0,okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){const p=[];let m=1;s.value.map(g=>{g.xid!=o.xid&&(p.push({...g,sn:m}),m++)}),s.value=p,I()}})},M=o=>{fe(s.value,{xid:o.product.xid})===void 0&&(s.value=[...s.value,{sn:s.value.length+1,xid:o.product.xid,name:o.product.name,item_code:o.product.item_code,price:o.product&&o.product.details&&o.product.details.sales_price?o.product.details.sales_price:"",quantity:10,barcode_symbology:o.product.barcode_symbology}]),I()},U=(o,p)=>{const m=[];let g=0;for(;g<o.length;)m.push(o.slice(g,g+p)),g+=p;return m},I=()=>{const o={height:"11.6in",padding:".1in 0 0 .1in",width:"8.25in",display:"block",margin:"10px auto",pageBreakAfter:"always"},p={height:"10.3in",paddingTop:".1in",width:"8.45in",display:"block",margin:"10px auto",pageBreakAfter:"always"},m={border:"1px dotted #ccc",display:"block",float:"left",fontSize:"12px",lineHeight:"14px",overflow:"hidden",textAlign:"center",textTransform:"uppercase"};h.value==40?(d.value={height:"1.003in",margin:"0 .07in",paddingTop:".05in",width:"1.799in",...m},c.value=o):h.value==30?(d.value={height:"1in",margin:"0 .07in",paddingTop:".05in",width:"2.625in",...m},c.value=p):h.value==24?(d.value={height:"1.335in",marginLeft:".079in",paddingTop:".05in",width:"2.48in",...m},c.value=o):h.value==20?(d.value={height:"1in",margin:"0 .1in",paddingTop:".05in",width:"4in",...m},c.value=p):h.value==18?(d.value={fontSize:"13px",height:"1.835in",lineHeight:"20px",marginLeft:".079in",paddingTop:".05in",width:"2.5in",...m},c.value=o):h.value==14?(d.value={height:"1.33in",margin:"0 .1in",paddingTop:".1in",width:"4in",...m},c.value=p):h.value==12?(d.value={fontSize:"14px",height:"2.834in",lineHeight:"20px",marginLeft:".079in",paddingTop:".05in",width:"2.5in",...m},c.value=o):h.value==10&&(d.value={fontSize:"14px",height:"2in",lineHeight:"20px",margin:"0 .1in",paddingTop:".1in",width:"4in",...m},c.value=p);var g=[];s.value.map(x=>{for(let q=0;q<x.quantity;q++)g.push({xid:x.xid,name:x.name,item_code:x.item_code,barcode_symbology:x.barcode_symbology,price:x.price})}),r.value=U(g,h.value)};return{appSetting:t,formatAmountCurrency:i,orderItemColumns:E,permsArray:l,selectedProducts:s,reset:F,showDeleteConfirm:z,quantityChanged:A,productSelected:M,barcodePerSheetSelected:I,perSheetBarcode:h,a4SheetClassName:C,barcodeClassName:w,allBarcodes:r,barcodeStyleObject:d,a4pageStyleObject:c,paperSizeArray:H,contentToPrint:T,printBarcodes:()=>{const o=document.createElement("iframe");o.style.display="none",document.body.appendChild(o),o.contentDocument.body.innerHTML=`<body>${T.value.innerHTML}</body>`,o.contentWindow.print()},selectPrice:L,selectName:O}}},Ge=t=>(Be("data-v-ceedb865"),t=t(),Pe(),t),je=Ge(()=>$("br",null,null,-1)),We={class:"mt-30",ref:"contentToPrint"},Xe={style:{"padding-left":"10px","font-weight":"bold"}},Ye={key:0,style:{"text-align":"center"}},Je={key:1,style:{"text-align":"center"}},Ze={key:0};function Qe(t,l,i,e,s,h){const C=ge,w=k("router-link"),r=ve,d=be,c=k("AdminPageHeader"),T=k("ProductSearchInput"),O=ye,L=ke,H=Se,E=k("DeleteOutlined"),A=xe,F=Ce,z=we,M=Q,U=Z,I=Oe,G=Te,o=k("LinkOutlined"),p=k("PrinterOutlined"),m=Le,g=k("BarcodeGenerator"),x=Ie,q=k("admin-page-table-content");return _(),b(P,null,[n(c,null,{header:a(()=>[n(C,{title:t.$t("menu.print_barcodes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[n(d,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[n(r,null,{default:a(()=>[n(w,{to:{name:"admin.dashboard.index"}},{default:a(()=>[S(y(t.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),n(r,null,{default:a(()=>[S(y(t.$t("menu.print_barcodes")),1)]),_:1})]),_:1})]),_:1}),n(q,null,{default:a(()=>[n(x,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[n(G,{layout:"vertical"},{default:a(()=>[n(L,{gutter:16,class:"mb-20"},{default:a(()=>[n(O,{xs:24,sm:24,md:12,lg:24,xl:24},{default:a(()=>[n(T,{onValueChanged:e.productSelected},null,8,["onValueChanged"])]),_:1})]),_:1}),n(L,{gutter:16},{default:a(()=>[n(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[n(F,{"row-key":u=>u.xid,dataSource:e.selectedProducts,columns:e.orderItemColumns,pagination:!1},{bodyCell:a(({column:u,record:f})=>[u.dataIndex==="name"?(_(),b(P,{key:0},[S(y(f.name)+" ",1),je],64)):B("",!0),u.dataIndex==="unit_quantity"?(_(),D(H,{key:1,id:"inputNumber",value:f.quantity,"onUpdate:value":R=>f.quantity=R,min:1,onChange:R=>e.quantityChanged(f)},null,8,["value","onUpdate:value","onChange"])):B("",!0),u.dataIndex==="action"?(_(),D(A,{key:2,type:"primary",onClick:R=>e.showDeleteConfirm(f),style:{"margin-left":"4px"}},{icon:a(()=>[n(E)]),_:2},1032,["onClick"])):B("",!0)]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1}),n(L,{gutter:16,class:"mt-20"},{default:a(()=>[n(O,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[n(z,{checked:e.selectName,"onUpdate:checked":l[0]||(l[0]=u=>e.selectName=u)},{default:a(()=>[S(y(t.$t("print_barcode.select_name")),1)]),_:1},8,["checked"])]),_:1}),n(O,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[n(z,{checked:e.selectPrice,"onUpdate:checked":l[1]||(l[1]=u=>e.selectPrice=u)},{default:a(()=>[S(y(t.$t("print_barcode.select_price")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),n(L,{gutter:16,class:"mt-20"},{default:a(()=>[n(O,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[n(I,{label:t.$t("print_barcode.paper_size"),name:"paper_size"},{default:a(()=>[n(U,{value:e.perSheetBarcode,"onUpdate:value":l[2]||(l[2]=u=>e.perSheetBarcode=u),placeholder:t.$t("common.select_default_text",[t.$t("print_barcode.paper_size")]),onChange:e.barcodePerSheetSelected},{default:a(()=>[(_(!0),b(P,null,N(e.paperSizeArray,u=>(_(),D(M,{key:`size-${u.value}`,value:u.value},{default:a(()=>[S(y(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),$("div",null,[n(m,null,{default:a(()=>[n(A,{style:{color:"white","background-color":"#e81515"},onClick:e.reset},{icon:a(()=>[n(o)]),default:a(()=>[S(y(t.$t("common.reset"))+" ",1)]),_:1},8,["onClick"]),n(A,{type:"primary",onClick:e.printBarcodes,block:""},{icon:a(()=>[n(p)]),default:a(()=>[S(" "+y(t.$t("product.print_barcode")),1)]),_:1},8,["onClick"])]),_:1})]),$("div",We,[(_(!0),b(P,null,N(e.allBarcodes,u=>(_(),b("div",{class:"give-border",style:W(e.a4pageStyleObject),key:u.xid},[(_(!0),b(P,null,N(u,f=>(_(),b("div",{style:W(e.barcodeStyleObject),key:f.xid},[$("div",Xe,[e.selectName==!0?(_(),b("div",Ye,y(f.name),1)):B("",!0),f&&f.price!=""?(_(),b("div",Je,[e.selectPrice==!0?(_(),b("div",Ze,y(e.formatAmountCurrency(f.price)),1)):B("",!0)])):B("",!0),n(g,{value:f.item_code+"",format:f.barcode_symbology,height:18,width:1,fontSize:16,elementTag:"svg"},null,8,["value","format"])])],4))),128))],4))),128))],512)]),_:1})]),_:1})],64)}const it=Y(Ve,[["render",Qe],["__scopeId","data-v-ceedb865"]]);export{it as default};
