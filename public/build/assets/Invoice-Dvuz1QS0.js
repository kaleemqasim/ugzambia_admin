import{_ as k,f as G,o as n,i as C,w as l,a as c,bO as I,a0 as q,d as M,b as N,r as g,j as t,l as _,t as o,c as i,s as u,k as d,G as $,M as b,B as V,X as z}from"./app-HsD_dz6z.js";import{_ as D}from"./BarcodeGenerator-DcEs3Mq1.js";import{P as Q}from"./PrinterOutlined-2C1xj10B.js";const R={props:["text"],setup(e){return G(""),{text:e.text}}};function S(e,p,y,m,v,w){const h=I,a=q;return n(),C(a,{direction:"vertical",align:"center"},{default:l(()=>[c(h,{value:m.text,size:100},null,8,["value"])]),_:1})}const T=k(R,[["render",S]]),E=window.config.pos_invoice_css,L=M({props:["visible","order"],emits:["closed","success"],components:{PrinterOutlined:Q,BarcodeGenerator:D,QRcodeGenerator:T},setup(e,{emit:p}){const{formatAmountCurrency:y,formatDate:m,selectedWarehouse:v}=N();return{onClose:()=>{p("closed")},formatDate:m,selectedWarehouse:v,formatAmountCurrency:y,printInvoice:()=>{var a=document.getElementById("pos-invoice").innerHTML,r=window.open("","","height=500, width=500");r.document.write(`<link rel="stylesheet" href="${E}"><html><body>`),r.document.write(a),r.document.write("</body></html>"),r.document.close(),r.print()}}}}),j={id:"pos-invoice"},F={key:0,style:{"max-width":"400px",margin:"0px auto"}},H={class:"invoice-header"},U=["src","alt"],X={class:"company-details"},J={class:"company-address"},K={style:{"margin-bottom":"0px"}},Y={class:"tax-invoice-details"},Z={class:"tax-invoice-title"},O={class:"invoice-customer-details"},P={style:{width:"50%"}},x={style:{width:"50%"}},ee={style:{width:"50%"}},te={style:{width:"50%"}},oe={class:"tax-invoice-items"},se={style:{width:"100%"}},ne={style:{background:"#eee"}},ie=t("td",{style:{width:"5%"}},"#",-1),re={style:{width:"25%"}},ae={key:0},de={style:{"text-align":"right"}},le={class:"item-row-other"},ce=["colspan"],me={colspan:"2",style:{"text-align":"right"}},he={class:"item-row-other"},_e=["colspan"],ue={colspan:"2",style:{"text-align":"right"}},pe={class:"item-row-other"},ye=["colspan"],ve={colspan:"2",style:{"text-align":"right"}},ge={class:"tax-invoice-totals"},we={style:{width:"100%"}},fe={style:{width:"30%"}},$e={style:{"margin-bottom":"0px"}},be={style:{width:"30%"}},ke={style:{"margin-bottom":"0px"}},Ce={style:{width:"40%","text-align":"center"}},We={style:{"margin-bottom":"0px"}},Ae={class:"paid-amount-deatils"},Be={style:{width:"100%"}},Ge={style:{background:"#eee"}},Ie={style:{width:"50%"}},qe={style:{width:"50%"}},Me={class:"paid-amount-row"},Ne={style:{width:"100%"}},Ve={style:{"text-align":"center"}},ze={style:{width:"100%"}},De={key:0,style:{"margin-bottom":"0px"}},Qe={key:0},Re={key:1,style:{"margin-bottom":"0px"}},Se={key:0,class:"discount-details"},Te={key:1,class:"barcode-details"},Ee={key:2,style:{"text-align":"center"},class:"qrcode-details"},Le={class:"thanks-details"},je={class:"footer-button"};function Fe(e,p,y,m,v,w){const h=g("BarcodeGenerator"),a=g("QRcodeGenerator"),r=g("PrinterOutlined"),W=V,A=z;return n(),C(A,{open:e.visible,centered:!0,maskClosable:!1,title:e.$t("common.print_invoice"),width:"400px",onCancel:e.onClose},{footer:l(()=>[t("div",je,[c(W,{type:"primary",onClick:e.printInvoice},{icon:l(()=>[c(r)]),default:l(()=>[_(" "+o(e.$t("common.print_invoice")),1)]),_:1},8,["onClick"])])]),default:l(()=>[t("div",j,[e.order&&e.order.xid?(n(),i("div",F,[t("div",H,[t("img",{class:"invoice-logo",src:e.selectedWarehouse.logo_url,alt:e.selectedWarehouse.name},null,8,U)]),t("div",X,[t("h2",null,o(e.selectedWarehouse.name),1),t("p",J,o(e.selectedWarehouse.address),1),t("h4",K,o(e.$t("common.phone"))+": "+o(e.selectedWarehouse.phone),1),t("h4",null,o(e.$t("common.email"))+": "+o(e.selectedWarehouse.email),1)]),t("div",Y,[t("h3",Z,o(e.$t("sales.tax_invoice")),1),t("table",O,[t("tr",null,[t("td",P,o(e.$t("sales.invoice"))+"     : "+o(e.order.invoice_number),1),t("td",x,o(e.$t("common.date"))+" : "+o(e.formatDate(e.order.order_date)),1)]),t("tr",null,[t("td",ee,o(e.$t("stock.customer"))+" : "+o(e.order.user.name),1),t("td",te,o(e.$t("stock.sold_by"))+" : "+o(e.order.staff_member.name),1)])])]),t("div",oe,[t("table",se,[t("thead",ne,[ie,t("td",re,o(e.$t("common.item")),1),t("td",{style:u({width:e.selectedWarehouse.show_mrp_on_invoice?"10%":"25%"})},o(e.$t("common.qty")),5),e.selectedWarehouse.show_mrp_on_invoice?(n(),i("td",{key:0,style:u({width:(e.selectedWarehouse.show_mrp_on_invoice,"20%")})},o(e.$t("product.mrp")),5)):d("",!0),t("td",{style:u({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%"})},o(e.$t("common.rate")),5),t("td",{style:u({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%",textAlign:"right"})},o(e.$t("common.total")),5)]),t("tbody",null,[(n(!0),i($,null,b(e.order.items,(s,B)=>{var f;return n(),i("tr",{class:"item-row",key:s.xid},[t("td",null,o(B+1),1),t("td",null,o(s.product.name),1),t("td",null,o(s.quantity+""+((f=s.unit)==null?void 0:f.short_name)),1),e.selectedWarehouse.show_mrp_on_invoice?(n(),i("td",ae,o(s.mrp?e.formatAmountCurrency(s.mrp):"-"),1)):d("",!0),t("td",null,o(e.formatAmountCurrency(s.unit_price)),1),t("td",de,o(e.formatAmountCurrency(s.subtotal)),1)])}),128)),t("tr",le,[t("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},o(e.$t("stock.order_tax")),9,ce),t("td",me,o(e.formatAmountCurrency(e.order.tax_amount)),1)]),t("tr",he,[t("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},o(e.$t("stock.discount")),9,_e),t("td",ue,o(e.formatAmountCurrency(e.order.discount)),1)]),t("tr",pe,[t("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},o(e.$t("stock.shipping")),9,ye),t("td",ve,o(e.formatAmountCurrency(e.order.shipping)),1)])])])]),t("div",ge,[t("table",we,[t("tr",null,[t("td",fe,[t("h3",$e,o(e.$t("common.items"))+": "+o(e.order.total_items),1)]),t("td",be,[t("h3",ke,o(e.$t("common.qty"))+": "+o(e.order.total_quantity),1)]),t("td",Ce,[t("h3",We,o(e.$t("common.total"))+": "+o(e.formatAmountCurrency(e.order.total)),1)])])])]),t("div",Ae,[t("table",Be,[t("thead",Ge,[t("td",Ie,o(e.$t("payments.paid_amount")),1),t("td",qe,o(e.$t("payments.due_amount")),1)]),t("tbody",null,[t("tr",Me,[t("td",null,o(e.formatAmountCurrency(e.order.paid_amount)),1),t("td",null,o(e.formatAmountCurrency(e.order.due_amount)),1)])])])]),t("div",null,[t("table",Ne,[t("tr",Ve,[t("td",ze,[e.order.order_payments?(n(),i("h4",De,[_(o(e.$t("invoice.payment_mode"))+": ",1),(n(!0),i($,null,b(e.order.order_payments,s=>(n(),i("span",{key:s.xid,style:{"margin-right":"5px"}},[_(o(e.formatAmountCurrency(s.amount))+" (",1),s.payment&&s.payment.payment_mode&&s.payment.payment_mode.name?(n(),i("span",Qe,o(s.payment.payment_mode.name),1)):d("",!0),_(" ) ")]))),128))])):(n(),i("h3",Re,o(e.$t("invoice.payment_mode"))+": - ",1))])])])]),e.selectedWarehouse.show_discount_tax_on_invoice?(n(),i("div",Se,[t("p",null,o(e.$t("invoice.total_discount_on_mrp"))+" : "+o(e.formatAmountCurrency(e.order.saving_on_mrp)),1),t("p",null,o(e.$t("invoice.total_discount"))+" : "+o(e.order.saving_percentage)+"% ",1),t("p",null,o(e.$t("invoice.total_tax"))+" : "+o(e.formatAmountCurrency(e.order.total_tax_on_items)),1)])):d("",!0),e.selectedWarehouse.barcode_type=="barcode"?(n(),i("div",Te,[c(h,{value:e.order.invoice_number+"",height:25,width:1,fontSize:15,elementTag:"svg"},null,8,["value"])])):(n(),i("div",Ee,[c(a,{text:e.order.invoice_number+""},null,8,["text"])])),t("div",Le,[t("h3",null,o(e.$t("invoice.thanks_message")),1)])])):d("",!0)])]),_:1},8,["open","title","onCancel"])}const Je=k(L,[["render",Fe]]);export{Je as I};
