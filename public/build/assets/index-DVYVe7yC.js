import{cs as J,a as t,ct as Q,cu as X,cv as Z,_ as q,r as C,o as p,i as w,w as a,j as i,R as K,az as N,aA as ee,b2 as te,a5 as ne,cp as ae,Y as le,b as oe,f as F,g as se,E as re,ak as ie,c as M,G as H,h as de,l as g,t as l,M as V,k as R,ay as ce,aB as ue,aC as _e,q as pe,x as fe,a0 as me,aD as ge,be as he,H as ve,J as ye,aG as be}from"./app-yQu0_bFn.js";import{h as Ce}from"./hrmManagement-74JMDqgv.js";import{A as ke}from"./AdminPageHeader-BhKFwWP2.js";import{A as xe}from"./AttendanceSidebar-B5iYYMWR.js";import{C as we}from"./CalendarFilled-BJVNkz2p.js";import{C as Oe}from"./CarOutlined-BRATTg8s.js";import{C as Se}from"./CalculatorOutlined-DOl8JHn5.js";import"./index-CNNFGL0_.js";import"./ScheduleOutlined-BsWffWuw.js";import"./TabletOutlined-CZfTkFxr.js";var Pe=["class","component","viewBox","spin","rotate","tabindex","onClick"];function Y(n){for(var o=1;o<arguments.length;o++){var d=arguments[o]!=null?Object(arguments[o]):{},e=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(c){return Object.getOwnPropertyDescriptor(d,c).enumerable}))),e.forEach(function(c){U(n,c,d[c])})}return n}function U(n,o,d){return o in n?Object.defineProperty(n,o,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[o]=d,n}function Ie(n,o){if(n==null)return{};var d=Ae(n,o),e,c;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(n);for(c=0;c<h.length;c++)e=h[c],!(o.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(n,e)&&(d[e]=n[e])}return d}function Ae(n,o){if(n==null)return{};var d={},e=Object.keys(n),c,h;for(h=0;h<e.length;h++)c=e[h],!(o.indexOf(c)>=0)&&(d[c]=n[c]);return d}var G=function(o,d){var e,c=d.attrs,h=d.slots,_=Y({},o,c),z=_.class,b=_.component,f=_.viewBox,$=_.spin,j=_.rotate,y=_.tabindex,k=_.onClick,I=Ie(_,Pe),v=J(),x=v.prefixCls,O=v.rootClassName,m=h.default&&h.default(),L=m&&m.length,S=h.component,A=(e={},U(e,O.value,!!O.value),U(e,x.value,!0),e),T=U({},"".concat(x.value,"-spin"),$===""||!!$),P=j?{msTransform:"rotate(".concat(j,"deg)"),transform:"rotate(".concat(j,"deg)")}:void 0,D=Y({},X,{viewBox:f,class:T,style:P});f||delete D.viewBox;var B=function(){return b?t(b,D,{default:function(){return[m]}}):S?S(D):L?(Z(!!f||m.length===1&&m[0]&&m[0].type==="use"),t("svg",Y({},D,{viewBox:f}),[m])):null},E=y;return E===void 0&&k&&(E=-1,I.tabindex=E),t("span",Y({role:"img"},I,{onClick:k,class:[A,z]}),[B(),t(Q,null,null)])};G.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String};G.inheritAttrs=!1;G.displayName="Icon";const Be=G,$e={components:{Icon:Be}},je=i("svg",{height:"24",viewBox:"0 0 24 24",width:"24"},[i("defs",null,[i("linearGradient",{id:"grad"},[i("stop",{offset:"50%","stop-color":"red"}),i("stop",{offset:"50%","stop-color":"white"})])]),i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{fill:"url(#grad)",stroke:"red","stroke-width":"1.5",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),i("path",{d:"M0 0h24v24H0z",fill:"none"})],-1);function Me(n,o,d,e,c,h){const _=C("icon");return p(),w(_,{style:{width:"16px"}},{component:a(()=>[je]),_:1})}const ze=q($e,[["render",Me]]),Le={components:{PlusOutlined:K,EditOutlined:N,DeleteOutlined:ee,CheckOutlined:te,CloseOutlined:ne,CalendarFilled:we,ArrowRightOutlined:ae,CarOutlined:Oe,CalculatorOutlined:Se,HalfStar:ze,AdminPageHeader:ke,AttendanceSidebar:xe},setup(){const{t:n}=le(),{getMonthNameByNumber:o,monthArrays:d}=Ce(),{dayjs:e,formatTime:c,permsArray:h}=oe(),_=F({month:e().format("MM"),year:e(),user_id:void 0}),z=F([]),b=F(1),f=se({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1}),$=F([]),j="users?limit=10000";re(()=>{const v=axiosAdmin.get(j);Promise.all([v]).then(([x])=>{$.value=x.data}),k()});const y=()=>{b.value=1,k()},k=()=>{f.loading=!0;var v=_.value.month,x=_.value.year.format("YYYY");const O=f.pagination.pageSize,m=(b.value-1)*O;var L=`attendances/summary?month=${v}&year=${x}&offset=${m}&limit=${O}`;_.value.user_id&&(L+=`&user_id=${_.value.user_id}`),axiosAdmin.get(L).then(S=>{const A=[{title:"",dataIndex:"name"}];ie(S.data.columns,P=>{A.push({title:P,dataIndex:P})}),A.push({title:n("common.total"),dataIndex:"total"});const T={...f.pagination};T.total=S.data.meta.paging.total,f.data=[...S.data.data],f.pagination=T,z.value=A,f.loading=!1})};return{table:f,currentPage:b,handleTableChange:(v,x,O)=>{const m={...f.pagination};m.current=v.current,m.pageSize=v.pageSize,f.pagination=m,b.value=v.current,k()},columns:z,getMonthNameByNumber:o,filters:_,filterData:y,monthArrays:d,permsArray:h,setUrlData:k,formatTime:c,allUsers:$}}},Te={style:{marginLeft:"10px"}},De={style:{marginLeft:"10px"}},He={style:{marginLeft:"10px"}},Ee={style:{marginLeft:"10px"}},Fe={class:"table-responsive"},Ye=i("br",null,null,-1),Ue=i("br",null,null,-1),Ge=i("br",null,null,-1),Ve=i("br",null,null,-1),Re=i("br",null,null,-1),We={key:5};function qe(n,o,d,e,c,h){const _=ce,z=C("router-link"),b=ue,f=_e,$=C("AdminPageHeader"),j=C("AttendanceSidebar"),y=pe,k=C("HalfStar"),I=fe,v=C("CloseOutlined"),x=C("CarOutlined"),O=C("CheckOutlined"),m=C("CalendarFilled"),L=me,S=be,A=ge,T=he,P=de,D=C("admin-page-filters"),B=ve,E=ye,W=C("admin-page-table-content");return p(),M(H,null,[t($,null,{header:a(()=>[t(_,{title:n.$t("menu.remaining_leaves"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(b,null,{default:a(()=>[t(z,{to:{name:"admin.dashboard.index"}},{default:a(()=>[g(l(n.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(b,null,{default:a(()=>[g(l(n.$t("menu.hrm")),1)]),_:1}),t(b,null,{default:a(()=>[g(l(n.$t("menu.remaining_leaves")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(j)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(D,null,{default:a(()=>[t(P,{gutter:[16,16],align:"middle"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(L,null,{default:a(()=>[t(k,{style:{color:"green"}}),g(" "+l(n.$t("attendance.half_day"))+" ",1),t(I,{type:"vertical"}),i("span",null,[t(v,{style:{color:"red"}}),i("span",Te,l(n.$t("attendance.absent")),1)]),t(I,{type:"vertical"}),i("span",null,[t(x,{style:{color:"red"}}),i("span",De,l(n.$t("attendance.on_leave")),1)]),t(I,{type:"vertical"}),i("span",null,[t(O,{style:{color:"green"}}),i("span",He,l(n.$t("attendance.present")),1)]),t(I,{type:"vertical"}),i("span",null,[t(m,{style:{color:"green"}}),i("span",Ee,l(n.$t("attendance.holiday")),1)])]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(P,{gutter:[16,16],justify:"end"},{default:a(()=>[e.permsArray.includes("attendances_view")||e.permsArray.includes("admin")?(p(),w(y,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(A,{value:e.filters.user_id,"onUpdate:value":o[0]||(o[0]=u=>e.filters.user_id=u),onChange:e.filterData,"show-search":"",style:{width:"100%"},placeholder:n.$t("common.select_default_text",[n.$t("leave.user")]),allowClear:!0},{default:a(()=>[(p(!0),M(H,null,V(e.allUsers,u=>(p(),w(S,{key:u.xid,value:u.xid,title:u.name},{default:a(()=>[g(l(u.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):R("",!0),t(y,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(T,{value:e.filters.year,"onUpdate:value":o[1]||(o[1]=u=>e.filters.year=u),placeholder:n.$t("common.select_default_text",[n.$t("holiday.year")]),picker:"year",onChange:e.filterData,style:{width:"100%"},allowClear:!1},null,8,["value","placeholder","onChange"])]),_:1}),t(y,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(A,{value:e.filters.month,"onUpdate:value":o[2]||(o[2]=u=>e.filters.month=u),placeholder:n.$t("common.select_default_text",[n.$t("holiday.month")]),allowClear:!1,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.filterData},{default:a(()=>[(p(!0),M(H,null,V(e.monthArrays,u=>(p(),w(S,{key:u.name,value:u.value},{default:a(()=>[g(l(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(P,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[i("div",Fe,[t(E,{columns:e.columns,"row-key":u=>u.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,size:"middle"},{bodyCell:a(({column:u,record:s})=>[(p(),M(H,null,V(31,r=>(p(),M(H,{key:r},[u.dataIndex==r?(p(),M(H,{key:0},[s[r].status=="present"?(p(),w(B,{key:0},{title:a(()=>[g(l(n.$t("leave.clock_in"))+" : "+l(s[r].clock_in?e.formatTime(s[r].clock_in):""),1),Ye,g(" "+l(n.$t("leave.clock_out"))+" : "+l(s[r].clock_out?e.formatTime(s[r].clock_out):""),1),Ue]),default:a(()=>[t(O,{style:{color:"green"}})]),_:2},1024)):s[r].status=="half_day"&&s[r].is_leave?(p(),w(B,{key:1},{title:a(()=>[g(l(s[r].leave_name)+" ",1),Ge,g(" "+l(n.$t("leave.clock_in"))+" : "+l(s[r].clock_in?e.formatTime(s[r].clock_in):""),1),Ve,g(" "+l(n.$t("leave.clock_out"))+" : "+l(s[r].clock_out?e.formatTime(s[r].clock_out):""),1),Re]),default:a(()=>[t(k)]),_:2},1024)):s[r].status=="holiday"&&s[r].is_holiday?(p(),w(B,{key:2},{title:a(()=>[g(l(s[r].holiday_name),1)]),default:a(()=>[t(m,{style:{color:"green"}})]),_:2},1024)):s[r].status=="absent"&&s[r].is_leave?(p(),w(B,{key:3},{title:a(()=>[g(l(s[r].leave_name)+" : "+l(s[r].leave_reason),1)]),default:a(()=>[t(x,{style:{color:"red"}})]),_:2},1024)):s[r].status=="absent"?(p(),w(B,{key:4},{title:a(()=>[g(l(n.$t("attendance.absent")),1)]),default:a(()=>[t(v,{style:{color:"red"}})]),_:1})):(p(),M("span",We,"-"))],64)):R("",!0)],64))),64)),u.dataIndex=="total"?(p(),w(B,{key:0},{title:a(()=>[g(l(n.$t("attendance.present_working_days")),1)]),default:a(()=>[g(" "+l(s.present_days)+" / "+l(s.working_days),1)]),_:2},1024)):R("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const lt=q(Le,[["render",qe]]);export{lt as default};
