import{S as Q}from"./SettingSidebar-CpTHvp9n.js";import{A as Z}from"./AdminPageHeader-BkRYIxZf.js";import{_ as L,d as B,f as H,u as q,Y as R,E,o as t,c as v,a as o,ab as x,w as n,j as O,au as ee,ax as ne,K as oe,H as te,b2 as j,bd as ae,r,l as s,t as i,i as d,k,G as I,bk as se,B as G,aM as J,m as le,q as D,h as N,ar as K,bj as de,n as ie,I as ue,F as re,X as z,bl as ce,cz as me,at as _e,cn as pe,e as fe,aH as F,bF as ge,M as he,s as ye,cC as ke,a1 as ve,bm as be,bn as $e,cx as Ce,J as we,ay as Me,aB as Se,aC as Oe}from"./app-D3eloUX2.js";import{m as W}from"./modules-CSiTkqMT.js";import{I as Ie}from"./InfoOutlined-Dz8RNpRZ.js";import{S as Te}from"./ShoppingCartOutlined-C6DkMrsg.js";import{L as X,R as Y}from"./RightCircleOutlined-BNnSx3M8.js";import"./MailOutlined-z9N90-KW.js";import"./TranslationOutlined-BEVsmZYL.js";import"./UserOutlined-ChVJDHUT.js";import"./ScheduleOutlined-Mcdb3Gik.js";import"./AppstoreAddOutlined-Dup79U6R.js";import"./FormOutlined-8iFm7etH.js";import"./index-Cm_k0kzj.js";const Ue=B({props:["module"],emits:["updateSuccess"],setup(e,{emit:u}){const a=H(!1),p=H(!1),g=q(),{t:h}=R();return E(()=>{!e.module.verified||e.module.other_domain_verified?a.value=!1:a.value=e.module.status}),{checked:a,loading:p,updateStatus:(l,c)=>{axiosAdmin.post(ee("modules/update-status"),{verified_name:e.module.verified_name,checked:l}).then(_=>{ne.success({placement:"bottomRight",message:h("common.success"),description:h("module.module_status_updated")}),g.commit("auth/updateActiveModules",_.data.enabled_modules),window.config.modules=_.data.enabled_modules,u("updateSuccess")})}}}}),Ae={key:0},Pe=["innerHTML"],Ve={key:1};function He(e,u,a,p,g,h){const f=oe,l=te;return e.module.verified&&e.module.installed?(t(),v("span",Ae,[o(l,null,x({default:n(()=>[o(f,{checked:e.checked,"onUpdate:checked":u[0]||(u[0]=c=>e.checked=c),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified,size:"small"},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:n(()=>[O("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,Pe)]),key:"0"}:void 0]),1024)])):(t(),v("span",Ve," - "))}const Le=L(Ue,[["render",He]]),Be=B({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:j,InfoCircleOutlined:ae},setup(e,{emit:u}){const a=H(!1),p=window.location.host,{rules:g,purchaseCode:h,errorMessage:f,successMessage:l,loading:c,verifyPurchase:_,productName:m,version:y}=W();return E(()=>{m.value=e.module.verified_name,y.value=e.module.current_version}),{visible:a,showModal:()=>{a.value=!0},handleCancel:()=>{h.value="",a.value=!1},domain:p,rules:g,purchaseCode:h,loading:c,verify:()=>_({success:M=>{u("verifySuccess"),h.value="",a.value=!1}}),errorMessage:f,successMessage:l}}}),ze={key:0},De=O("br",null,null,-1),Ne=["innerHTML"],Re=["innerHTML"];function Ee(e,u,a,p,g,h){const f=se,l=G,c=J,_=le,m=D,y=N,b=r("InfoCircleOutlined"),$=K,C=de,M=ie,T=ue,U=re,A=r("CheckOutlined"),P=z;return t(),v(I,null,[e.module.other_domain_verified?(t(),v("div",ze,[o(f,{color:"red"},{default:n(()=>[s(i(e.$t("messages.other_domain_linked")),1)]),_:1}),De,o(l,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:n(()=>[s(i(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(t(),d(c,{key:1,type:"success",strong:""},{default:n(()=>[s(i(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(t(),d(c,{key:2,type:"success",strong:""},{default:n(()=>[s(" - ")]),_:1})):(t(),d(l,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:n(()=>[s(i(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),o(P,{open:e.visible,"onUpdate:open":u[1]||(u[1]=V=>e.visible=V),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:n(()=>[o(l,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:n(()=>[o(A)]),default:n(()=>[s(" "+i(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),o(l,{key:"back",onClick:e.handleCancel},{default:n(()=>[s(i(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[e.successMessage!=""?(t(),d(_,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.successMessage},null,8,Ne)]),_:1})):k("",!0),e.errorMessage!=""?(t(),d(_,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:n(()=>[O("span",{innerHTML:e.errorMessage},null,8,Re)]),_:1})):k("",!0),e.module.other_domain_verified&&e.errorMessage==""?(t(),d(y,{key:2,class:"mb-10"},{default:n(()=>[o(m,{span:24},{default:n(()=>[o(_,{type:"error","show-icon":""},{message:n(()=>[s(i(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):k("",!0),o(y,{class:"mb-10"},{default:n(()=>[o(m,{span:24},{default:n(()=>[o(C,null,{default:n(()=>[O("blockquote",null,[o($,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:n(()=>[o(b),s(" "+i(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),o(U,{layout:"vertical"},{default:n(()=>[o(M,{label:e.$t("common.domain"),name:"domain"},{default:n(()=>[o(c,{strong:""},{default:n(()=>[s(i(e.domain),1)]),_:1})]),_:1},8,["label"]),o(M,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:n(()=>[o(T,{value:e.purchaseCode,"onUpdate:value":u[0]||(u[0]=V=>e.purchaseCode=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const Fe=L(Be,[["render",Ee]]),qe=B({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:ce,ShoppingCartOutlined:Te,ReloadOutlined:me,SyncOutlined:_e,CheckCircleOutlined:pe,InfoOutlined:Ie,CheckOutlined:j},setup(e,{emit:u}){const{t:a}=R(),p=H(!1),g=H("");return fe(),{install:()=>{z.confirm({title:a("common.install"),icon:o(F),content:a("messages.are_you_sure_install_message"),okText:a("common.yes"),okType:"danger",cancelText:a("common.no"),onOk(){g.value=a("common.installing")+"...",u("install",e.module.verified_name),p.value=!0},onCancel(){}})},update:()=>{z.confirm({title:a("common.update"),icon:o(F),content:a("messages.are_you_sure_update_message"),okText:a("common.yes"),okType:"danger",cancelText:a("common.no"),onOk(){g.value=a("common.updating")+"...",u("install",e.module.verified_name),p.value=!0},onCancel(){}})},installUpdateModalVisible:p,closeInstallUpdateModal:()=>{p.value=!1,window.location.reload()}}}});function je(e,u,a,p,g,h){const f=r("DownloadOutlined"),l=G,c=r("ReloadOutlined"),_=r("ShoppingCartOutlined"),m=J,y=r("SyncOutlined"),b=r("CheckCircleOutlined"),$=ge,C=D,M=N,T=r("InfoOutlined"),U=r("CheckOutlined"),A=z;return t(),v(I,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(t(),d(l,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:n(()=>[o(f)]),default:n(()=>[s(" "+i(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(t(),d(l,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:n(()=>[o(c)]),default:n(()=>[s(" "+i(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(t(),d(l,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:n(()=>[o(_)]),default:n(()=>[s(" "+i(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(t(),d(m,{key:3,type:"success",strong:""},{default:n(()=>[s(" - ")]),_:1})),o(A,{open:e.installUpdateModalVisible,"onUpdate:open":u[0]||(u[0]=P=>e.installUpdateModalVisible=P),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:n(()=>[o(M,{class:"mb-10"},{default:n(()=>[o(C,{span:24},{default:n(()=>[e.downloadPercentage<100?(t(),d(m,{key:0},{default:n(()=>[o(y,{spin:""}),s(" "+i(e.$t("messages.downloading_started_message")),1)]),_:1})):(t(),d(m,{key:1,strong:"",type:"success"},{default:n(()=>[o(b),s(" "+i(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(t(),d($,{key:2,percent:e.downloadPercentage},null,8,["percent"])):k("",!0)]),_:1})]),_:1}),o(M,{class:"mb-10"},{default:n(()=>[o(C,{span:24},{default:n(()=>[e.extracting==""?(t(),d(m,{key:0,type:"secondary"},{default:n(()=>[o(T),s(" "+i(e.$t("module.extract_zip_file")),1)]),_:1})):k("",!0),e.extracting=="started"?(t(),d(m,{key:1},{default:n(()=>[o(y,{spin:""}),s(" "+i(e.$t("messages.file_extracting_message")),1)]),_:1})):k("",!0),e.extracting=="completed"?(t(),d(m,{key:2,strong:"",type:"success"},{default:n(()=>[o(b),s(" "+i(e.$t("module.file_extracted")),1)]),_:1})):k("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(t(),d(M,{key:0,class:"mt-10 mb-10"},{default:n(()=>[o(C,{span:24},{default:n(()=>[o(l,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:n(()=>[o(U),s(" "+i(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):k("",!0)]),_:1},8,["open","title"])],64)}const Ge=L(qe,[["render",je]]),Je=B({components:{ModuleStatus:Le,VerifyModule:Fe,ModuleAction:Ge,LeftCircleOutlined:X,RightCircleOutlined:Y},setup(){const{t:e}=R();q();const u=window.config.app_env,{allModules:a,dataLoading:p,getModuleData:g,offers:h,settings:f,install:l,downloading:c,downloadPercentage:_,extracting:m}=W(),y=[{title:e("module.name"),dataIndex:"name",width:"25%",sorter:!0},{title:e("module.verified"),dataIndex:"verified",width:"15%",sorter:!0},{title:e("module.current_version"),dataIndex:"current_version",sorter:!0},{title:e("module.latest_version"),dataIndex:"version",sorter:!0},{title:e("module.status"),dataIndex:"status",sorter:!0},{title:e("common.action"),dataIndex:"action"}];return E(()=>{g()}),{modulesTableColumns:y,allModules:a,getModuleData:g,installModule:$=>{l($)},dataLoading:p,offers:h,settings:f,downloading:c,downloadPercentage:_,extracting:m,appEnv:u}}}),Ke={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},We={class:"custom-slick-arrow",style:{right:"10px"}},Xe=["src"],Ye={key:0,class:"table-responsive"},Qe={key:1};function Ze(e,u,a,p,g,h){const f=r("left-circle-outlined"),l=r("right-circle-outlined"),c=K,_=ke,m=D,y=N,b=ve,$=be,C=$e,M=Ce,T=r("VerifyModule"),U=r("ModuleStatus"),A=r("ModuleAction"),P=we,V=r("admin-page-table-content");return t(),v(I,null,[e.offers&&e.offers.length>0?(t(),d(y,{key:0},{default:n(()=>[o(m,{span:24},{default:n(()=>[o(_,{arrows:""},{prevArrow:n(()=>[O("div",Ke,[o(f)])]),nextArrow:n(()=>[O("div",We,[o(l)])]),default:n(()=>[(t(!0),v(I,null,he(e.offers,w=>(t(),v("div",{key:w.id},[o(c,{href:w.url,target:"_blank"},{default:n(()=>[O("img",{src:w.image_url,style:ye({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,Xe)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):k("",!0),o(V,null,{default:n(()=>[o(y,{class:"mt-20 mb-20"},{default:n(()=>[o(m,{span:24},{default:n(()=>[e.allModules?(t(),v("div",Ye,[o(P,{columns:e.modulesTableColumns,"row-key":w=>w.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:n(({column:w,record:S})=>[w.dataIndex=="name"?(t(),d(M,{key:0},{default:n(()=>[o(C,null,{default:n(()=>[o($,{description:S.description},{title:n(()=>[s(i(S.name),1)]),avatar:n(()=>[o(b,{src:S.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):k("",!0),w.dataIndex=="verified"?(t(),d(T,{key:1,module:S,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):k("",!0),w.dataIndex=="status"?(t(),d(U,{key:2,module:S,status:S.status,moduleName:S.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):k("",!0),w.dataIndex=="action"?(t(),v(I,{key:3},[e.appEnv=="envato"?(t(),d(A,{key:0,module:S,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(t(),v("span",Qe,"-"))],64)):k("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):k("",!0)]),_:1})]),_:1})]),_:1})],64)}const xe=L(Je,[["render",Ze]]),en=B({components:{LeftCircleOutlined:X,RightCircleOutlined:Y,SettingSidebar:Q,AdminPageHeader:Z,ModuleSetting:xe},setup(){return{}}});function nn(e,u,a,p,g,h){const f=Me,l=r("router-link"),c=Se,_=Oe,m=r("AdminPageHeader"),y=r("SettingSidebar"),b=D,$=r("ModuleSetting"),C=N;return t(),v(I,null,[o(m,null,{header:n(()=>[o(f,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[o(_,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[o(c,null,{default:n(()=>[o(l,{to:{name:"admin.dashboard.index"}},{default:n(()=>[s(i(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),o(c,null,{default:n(()=>[s(i(e.$t("menu.settings")),1)]),_:1}),o(c,null,{default:n(()=>[s(i(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),o(C,null,{default:n(()=>[o(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[o(y)]),_:1}),o(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[o($)]),_:1})]),_:1})],64)}const hn=L(en,[["render",nn]]);export{hn as default};
