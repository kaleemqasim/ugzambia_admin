import{Y as F,_ as P,d as q,R as H,aT as z,b as I,r as y,o as i,i as C,w as n,a,l as h,t as c,I as K,n as N,q as R,h as B,be as j,F as L,B as V,X as W,f as T,c as $,k as w,G as A,M as G,j as J,by as re,bH as ie,a$ as ue,az as me,aA as ce,z as pe,E as _e,a6 as fe,ay as ye,aB as he,aC as ge,a0 as ve,aE as be,aF as ke,aD as Ce,J as Se,aG as De}from"./app-ik9ULx9k.js";import{c as we}from"./crud-YvqADRef.js";import{a as X}from"./apiAdmin-Cy_t14Ak.js";import{S as Q}from"./SaveOutlined-Dcn72roW.js";import{h as O}from"./hrmManagement-Djms9mdh.js";import{D as $e}from"./DateRangePicker-spZaNK5I.js";import{A as Ae}from"./AdminPageHeader-DmcjEJo2.js";import{H as Me}from"./HolidaySidebar-Dg6kmJtD.js";import"./datatable-BR5DKnWq.js";import"./filter-CksJgR1o.js";import"./index-C1IQfHG_.js";import"./ScheduleOutlined-DpkLlm79.js";import"./TabletOutlined-DYRP33t2.js";const Te=()=>{const e="holidays",{t:l}=F(),v=[],o={name:"",year:"",month:"",date:void 0},p=[{title:l("holiday.name"),dataIndex:"name"},{title:l("holiday.date"),dataIndex:"date"},{title:l("common.action"),dataIndex:"action"}],r=[{key:"name",value:l("common.name")}];return{addEditUrl:e,initData:o,columns:p,filterableColumns:r,hashableColumns:v}},Ee=q({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:H,LoadingOutlined:z,SaveOutlined:Q},setup(e,{emit:l}){const{addEditRequestAdmin:v,loading:o,rules:p}=X(),{appSetting:r,disabledDate:b,permsArray:m}=I();return{loading:o,rules:p,onClose:()=>{p.value={},l("closed")},onSubmit:()=>{v({url:e.url,data:e.formData,successMessage:e.successMessage,success:s=>{l("addEditSuccess",s.xid)}})},appSetting:r,disabledDate:b,permsArray:m,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Oe(e,l,v,o,p,r){const b=K,m=N,_=R,t=B,s=j,S=L,d=y("SaveOutlined"),k=V,f=W;return i(),C(f,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(d)]),default:n(()=>[h(" "+c(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(k,{key:"back",onClick:e.onClose},{default:n(()=>[h(c(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(S,{layout:"vertical"},{default:n(()=>[a(t,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(m,{label:e.$t("holiday.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(b,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("holiday.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(t,{gutter:16},{default:n(()=>[a(_,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(m,{label:e.$t("holiday.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:n(()=>[a(s,{value:e.formData.date,"onUpdate:value":l[1]||(l[1]=D=>e.formData.date=D),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["value","format"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Ue=P(Ee,[["render",Oe]]),Ye=q({emits:["onSuccess"],components:{PlusOutlined:H,LoadingOutlined:z,SaveOutlined:Q,DateRangePicker:$e,hrmManagement:O},setup(e,{emit:l}){const{addEditRequestAdmin:v,loading:o,rules:p}=X(),{appSetting:r,permsArray:b}=I(),{weekDays:m}=O(),{t:_}=F(),t=T({date:void 0,ocassion_name:"",name:[]}),s=T(!1);return{onSubmit:()=>{v({url:"mark-holidays?fields=name,ocassion_name,date_from,date_to",data:{...t.value,date_from:t.value.date?t.value.date[0]:"",date_to:t.value.date?t.value.date[1]:""},successMessage:_("holiday.weekend_marked_successfully"),success:f=>{l("onSuccess"),s.value=!1,t.value={}}})},rules:p,appSetting:r,permsArray:b,formData:t,visible:s,openModel:()=>{s.value=!0},closeModel:()=>{s.value=!1,p.value={},t.value={date:void 0,ocassion_name:"",name:[]}},loading:o,weekDays:m}}}),Fe={key:0,style:{color:"red",marginTop:"5px"}},Pe={class:"ant-form-item-explain-error",style:{}};function He(e,l,v,o,p,r){const b=y("PlusOutlined"),m=V,_=ue,t=R,s=B,S=re,d=N,k=ie,f=K,D=L,M=y("SaveOutlined"),U=W;return i(),$(A,null,[e.permsArray.includes("mark_weekend_holiday")||e.permsArray.includes("admin")?(i(),C(m,{key:0,type:"primary",onClick:e.openModel},{default:n(()=>[a(b),h(" "+c(e.$t("holiday.mark_weekend_holiday")),1)]),_:1},8,["onClick"])):w("",!0),a(U,{open:e.visible,onOk:e.onSubmit,onClose:e.closeModel,title:"Mark Weekend Holiday",closable:!1},{footer:n(()=>[a(m,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(M)]),default:n(()=>[h(" "+c(e.$t("common.create")),1)]),_:1},8,["loading","onClick"]),a(m,{key:"back",onClick:e.closeModel},{default:n(()=>[h(c(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(D,{layout:"vertical"},{default:n(()=>[a(s,{gutter:16},{default:n(()=>[a(t,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(d,{label:e.$t("holiday.mark_weekend_holiday"),name:"name"},{default:n(()=>[a(S,{value:e.formData.name,"onUpdate:value":l[0]||(l[0]=g=>e.formData.name=g),style:{width:"100%"}},{default:n(()=>[a(s,null,{default:n(()=>[(i(!0),$(A,null,G(e.weekDays,g=>(i(),C(t,{span:6,key:g.name,value:g.name},{default:n(()=>[a(_,{value:g.name},{default:n(()=>[h(c(g.name),1)]),_:2},1032,["value"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),e.rules&&e.rules.name?(i(),$("div",Fe,[J("div",Pe,c(e.rules.name.message),1)])):w("",!0)]),_:1},8,["label"])]),_:1})]),_:1}),a(s,{gutter:16},{default:n(()=>[a(t,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(d,{label:e.$t("holiday.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:n(()=>[a(k,{format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD",value:e.formData.date,"onUpdate:value":l[1]||(l[1]=g=>e.formData.date=g),style:{width:"100%"}},null,8,["format","value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(s,{gutter:16},{default:n(()=>[a(t,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(d,{label:e.$t("holiday.ocassion_name"),name:"ocassion_name",help:e.rules.ocassion_name?e.rules.ocassion_name.message:null,validateStatus:e.rules.ocassion_name?"error":null,class:"required"},{default:n(()=>[a(f,{value:e.formData.ocassion_name,"onUpdate:value":l[2]||(l[2]=g=>e.formData.ocassion_name=g),placeholder:e.$t("common.placeholder_default_text",[e.$t("holiday.ocassion_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","onOk","onClose"])],64)}const Ie=P(Ye,[["render",He]]),Re={components:{PlusOutlined:H,EditOutlined:me,DeleteOutlined:ce,AddEdit:Ue,AdminPageHeader:Ae,MarkHoliday:Ie,HolidaySidebar:Me,hrmManagement:O},setup(){const e=pe();F();const{addEditUrl:l,initData:v,columns:o,filterableColumns:p}=Te(),r=we(),{permsArray:b,appSetting:m,formatDate:_,dayjs:t}=I(),s=T(e.meta.holidayType),{monthArrays:S}=O(),d=T(t()),k=T({year:d,month:void 0});_e(()=>{f(),r.crudUrl.value=l,r.langKey.value="holiday",r.initData.value={...v},r.formData.value={...v}});const f=()=>{r.tableUrl.value={url:"holidays?fields=id,xid,name,year,date,month,is_weekend",extraFilters:{...k.value,holiday_type:s.value,year:d.value.format("YYYY")}},r.table.filterableColumns=p,r.table.sorter={field:"date",order:"desc"},r.fetch({page:1})};return fe(()=>e.meta.holidayType,(D,M)=>{e.meta.holidayType&&(e.meta.holidayType=="holiday"||e.meta.holidayType=="weekend")&&(s.value=e.meta.holidayType,f())}),{columns:o,...r,filterableColumns:p,permsArray:b,appSetting:m,formatDate:_,setUrlData:f,monthArrays:S,filterMonthYear:d,extraFilters:k,holidayType:s}}},Be={class:"table-responsive"};function Ve(e,l,v,o,p,r){const b=ye,m=y("router-link"),_=he,t=ge,s=y("AdminPageHeader"),S=y("HolidaySidebar"),d=R,k=y("PlusOutlined"),f=V,D=y("MarkHoliday"),M=y("DeleteOutlined"),U=ve,g=be,Z=ke,x=j,ee=De,ae=Ce,E=B,ne=y("admin-page-filters"),oe=y("AddEdit"),le=y("EditOutlined"),te=Se,se=y("admin-page-table-content");return i(),$(A,null,[a(s,null,{header:n(()=>[a(b,{title:o.holidayType=="holiday"?e.$t("menu.holidays"):e.$t("menu.weekends"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(t,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(_,null,{default:n(()=>[a(m,{to:{name:"admin.dashboard.index"}},{default:n(()=>[h(c(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(_,null,{default:n(()=>[h(c(e.$t("menu.hrm")),1)]),_:1}),a(_,null,{default:n(()=>[h(c(o.holidayType=="holiday"?e.$t("menu.holidays"):e.$t("menu.weekends")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(d,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(S)]),_:1}),a(d,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(ne,null,{default:n(()=>[a(E,{gutter:[16,16]},{default:n(()=>[a(d,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(U,null,{default:n(()=>[o.permsArray.includes("holidays_create")||o.permsArray.includes("admin")?(i(),$(A,{key:0},[o.holidayType=="holiday"?(i(),C(f,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(k),h(" "+c(e.$t("holiday.add")),1)]),_:1},8,["onClick"])):(i(),C(D,{key:1,onOnSuccess:o.setUrlData},null,8,["onOnSuccess"]))],64)):w("",!0),e.table.selectedRowKeys.length>0&&(o.permsArray.includes("holidays_delete")||o.permsArray.includes("admin"))?(i(),C(f,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(M)]),default:n(()=>[h(" "+c(e.$t("common.delete")),1)]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1}),a(d,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(E,{gutter:[16,16],justify:"end"},{default:n(()=>[a(d,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(Z,{compact:""},{default:n(()=>[a(g,{style:{width:"100%"},value:e.table.searchString,"onUpdate:value":l[0]||(l[0]=u=>e.table.searchString=u),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading,placeholder:e.$t("common.placeholder_search_text",[e.$t("common.name")])},null,8,["value","onChange","onSearch","loading","placeholder"])]),_:1})]),_:1}),a(d,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(x,{value:o.extraFilters.year,"onUpdate:value":l[1]||(l[1]=u=>o.extraFilters.year=u),placeholder:e.$t("common.select_default_text",[e.$t("holiday.year")]),picker:"year",onChange:o.setUrlData,style:{width:"100%"},allowClear:!1},null,8,["value","placeholder","onChange"])]),_:1}),a(d,{xs:24,sm:24,md:8,lg:8,xl:6},{default:n(()=>[a(ae,{value:o.extraFilters.month,"onUpdate:value":l[2]||(l[2]=u=>o.extraFilters.month=u),placeholder:e.$t("common.select_default_text",[e.$t("holiday.month")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:o.setUrlData},{default:n(()=>[(i(!0),$(A,null,G(o.monthArrays,u=>(i(),C(ee,{key:u.name,value:u.value},{default:n(()=>[h(c(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(se,null,{default:n(()=>[a(oe,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(E,null,{default:n(()=>[a(d,{span:24},{default:n(()=>[J("div",Be,[a(te,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:u=>({disabled:!1,name:u.xid})},columns:o.columns,"row-key":u=>u.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:u,record:Y})=>[u.dataIndex==="date"?(i(),$(A,{key:0},[h(c(o.formatDate(Y.date)),1)],64)):w("",!0),u.dataIndex==="action"?(i(),$(A,{key:1},[o.permsArray.includes("holidays_edit")||o.permsArray.includes("admin")?(i(),C(f,{key:0,type:"primary",onClick:de=>e.editItem(Y),style:{"margin-left":"4px"}},{icon:n(()=>[a(le)]),_:2},1032,["onClick"])):w("",!0),o.permsArray.includes("holidays_delete")||o.permsArray.includes("admin")?(i(),C(f,{key:1,type:"primary",onClick:de=>e.showDeleteConfirm(Y.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(M)]),_:2},1032,["onClick"])):w("",!0)],64)):w("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ea=P(Re,[["render",Ve]]);export{ea as default};
