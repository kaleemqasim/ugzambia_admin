import{a as c,y as j,_ as z,W as H,b as P,u as N,f as p,V as C,E,r as I,o as s,i as d,c as T,w as n,l as f,t as i,j as L,D as q,v as W,q as $,h as F,B as G,a0 as J,aM as Q,bs as R}from"./app-Dj1Is9gq.js";import{L as U}from"./LogoutOutlined-BVgd2FW5.js";var X={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M275 281c19.9 0 36-16.1 36-36V36c0-19.9-16.1-36-36-36s-36 16.1-36 36v209c0 19.9 16.1 36 36 36zm613 144H768c0-39.8-32.2-72-72-72H200c-39.8 0-72 32.2-72 72v248c0 3.4.2 6.7.7 9.9-.5 7-.7 14-.7 21.1 0 176.7 143.3 320 320 320 160.1 0 292.7-117.5 316.3-271H888c39.8 0 72-32.2 72-72V497c0-39.8-32.2-72-72-72zM696 681h-1.1c.7 7.6 1.1 15.2 1.1 23 0 137-111 248-248 248S200 841 200 704c0-7.8.4-15.4 1.1-23H200V425h496v256zm192-8H776V497h112v176zM613 281c19.9 0 36-16.1 36-36V36c0-19.9-16.1-36-36-36s-36 16.1-36 36v209c0 19.9 16.1 36 36 36zm-170 0c19.9 0 36-16.1 36-36V36c0-19.9-16.1-36-36-36s-36 16.1-36 36v209c0 19.9 16.1 36 36 36z"}}]},name:"coffee",theme:"outlined"};const Y=X;function V(e){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?Object(arguments[o]):{},t=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(_){return Object.getOwnPropertyDescriptor(l,_).enumerable}))),t.forEach(function(_){Z(e,_,l[_])})}return e}function Z(e,o,l){return o in e?Object.defineProperty(e,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[o]=l,e}var S=function(o,l){var t=V({},o,l.attrs);return c(j,V({},t,{icon:Y}),null)};S.displayName="CoffeeOutlined";S.inheritAttrs=!1;const ct=S,K={components:{ClockCircleOutlined:H,LogoutOutlined:U},setup(e,{emit:o}){const{permsArray:l,dayjs:t,formatTime:_}=P(),r=N(),g=p(""),v=p(""),k=p({}),u=p(!1),m=p(!1),y=p(!1),h=C(()=>r.state.hrm.isSelfClocking),O=C(()=>r.state.hrm.showClockInButton),b=C(()=>r.state.hrm.showClockOutButton),w=C(()=>r.state.hrm.clockInDateTime),B=C(()=>r.state.hrm.clockOutDateTime);E(()=>{setInterval(M,1e3),y.value=!0,axiosAdmin.get("/hrm/today-attendance-details").then(a=>{k.value=a.data,g.value=a.data.ip_address,A(a),y.value=!1})});const x=a=>{a=="clock-in"?u.value=!0:a=="clock-out"&&(m.value=!0),axiosAdmin.post("/hrm/mark-attendance",{type:a}).then(D=>{g.value=D.data.ip_address,k.value=D.data,a=="clock-in"?u.value=!1:a=="clock-out"&&(m.value=!1),A(D)})},A=a=>{r.commit("hrm/updateSelfClocking",a.data.self_clocking),r.commit("hrm/updateShowClockInButton",a.data.show_clock_in_button),r.commit("hrm/updateShowClockOutButton",a.data.show_clock_out_button),r.commit("hrm/updateClockInDateTime",a.data.clock_in_date_time),r.commit("hrm/updateClockOutDateTime",a.data.clock_out_date_time)},M=()=>{v.value=t().format("hh:mm:ss a")};return{pageLoading:y,attendanceData:k,ipAddress:g,currentTime:v,markAttendance:x,clockInLoading:u,clockOutLoading:m,formatTime:_,isSelfClocking:h,showClockInButton:O,showClockOutButton:b,clockInDateTime:w,clockOutDateTime:B}}},tt={key:1},et={key:2};function ot(e,o,l,t,_,r){const g=R,v=q,k=W,u=$,m=F,y=I("ClockCircleOutlined"),h=G,O=I("LogoutOutlined"),b=J,w=Q;return t.pageLoading?(s(),d(g,{key:0,active:""})):(s(),T("div",tt,[t.attendanceData.is_on_full_day_leave?(s(),d(v,{key:0,title:e.$t("hrm_dashboard.you_are_on_leave")},null,8,["title"])):t.attendanceData.office_hours_expired?(s(),d(v,{key:1,title:e.$t("hrm_dashboard.office_hours_expired")},null,8,["title"])):(s(),T("div",et,[c(m,null,{default:n(()=>[c(u,{xs:12,sm:12,md:12,lg:12,xl:12},{default:n(()=>[c(k,{level:5},{default:n(()=>[f(i(e.$t("hrm_dashboard.current_ip_address")),1)]),_:1}),L("p",null,i(t.ipAddress),1)]),_:1}),c(u,{xs:12,sm:12,md:12,lg:12,xl:12},{default:n(()=>[c(k,{level:5},{default:n(()=>[f(i(e.$t("hrm_dashboard.current_time")),1)]),_:1}),L("p",null,i(t.currentTime),1)]),_:1})]),_:1}),t.isSelfClocking?(s(),d(m,{key:0,class:"mt-30",style:{textAlign:"center"}},{default:n(()=>[c(u,{span:24},{default:n(()=>[c(b,null,{default:n(()=>[t.showClockInButton?(s(),d(h,{key:0,type:"primary",onClick:o[0]||(o[0]=B=>t.markAttendance("clock-in")),loading:t.clockInLoading},{default:n(()=>[c(y),f(" "+i(e.$t("hrm_dashboard.clock_in")),1)]),_:1},8,["loading"])):(s(),d(h,{key:1,type:"primary",disabled:!0},{default:n(()=>[f(i(e.$t("hrm_dashboard.clocked_in"))+" : "+i(t.formatTime(t.clockInDateTime)),1)]),_:1})),t.showClockOutButton?(s(),d(h,{key:2,type:"primary",onClick:o[1]||(o[1]=B=>t.markAttendance("clock-out")),loading:t.clockOutLoading},{default:n(()=>[c(O),f(" "+i(e.$t("hrm_dashboard.clock_out")),1)]),_:1},8,["loading"])):(s(),d(h,{key:3,type:"primary",disabled:!0},{default:n(()=>[f(i(e.$t("hrm_dashboard.clocked_out"))+" : "+i(t.formatTime(t.clockOutDateTime)),1)]),_:1}))]),_:1})]),_:1})]),_:1})):(s(),d(m,{key:1,class:"mt-30",style:{textAlign:"center"}},{default:n(()=>[c(u,{span:24},{default:n(()=>[c(w,{type:"danger",strong:""},{default:n(()=>[f(i(e.$t("hrm_dashboard.self_clocking_is_disabled")),1)]),_:1})]),_:1})]),_:1}))]))]))}const lt=z(K,[["render",ot]]);export{ct as C,lt as M};
