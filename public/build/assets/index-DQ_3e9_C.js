import{_ as A,d as R,b as D,E as V,V as F,a6 as T,r as c,o as u,i as $,w as a,a as e,j,c as x,l as _,t as d,G as k,k as h,aL as z,aM as G,H as L,aN as q,J,q as I,h as E,g as O,f as W,e as K,cg as Q,M as X,ay as Y,aB as Z,aC as ee,aD as te,aG as ae}from"./app-CpSKehWv.js";import{d as B}from"./datatable-DLnnAqms.js";import{U as M}from"./UserInfo-BSesfJsz.js";import{D as ne}from"./DateRangePicker-CPOfE4-B.js";import{A as se}from"./AdminPageHeader-CUAYpmpF.js";import{b as oe,E as re}from"./ExportTable-Co-8MIMK.js";import{P as le}from"./PaymentStatus-CKpjah3a.js";import"./filter-BbLgboo9.js";import"./index-B2USgbpU.js";import"./PrinterOutlined-DvVYMoiI.js";import"./fields-C1ZxPcnQ.js";const me=R({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:M,PaymentStatus:le},setup(t){const{salesSummaryColumns:o,orderHashableColumns:C}=oe(),{formatDateTime:r,formatAmountCurrency:g,selectedWarehouse:S}=D(),s=B();V(()=>{i(t)});const i=n=>{const l={};n.user_id&&n.user_id!=null&&(l.staff_user_id=n.user_id),s.tableUrl.value={url:"sales?fields=id,xid,order_date,invoice_number,total,payment_status,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},staff_user_id,x_staff_user_id,staffMember{id,xid,name,profile_image,profile_image_url,user_type}",filters:l,extraFilters:{dates:n.dates}},s.hashable.value=[...C],s.table.sorter={field:"order_date",order:"desc"},s.exportDetails.value={allowExport:!0,exportType:"sales_summary_reports"},s.fetch({page:1})},y=F(()=>{let n=0;return s.table.data.forEach(l=>{n+=l.total}),{totalAmount:n}});return T(t,(n,l)=>{i(n)}),T(S,(n,l)=>{i(t)}),{salesSummaryColumns:o,...s,formatDateTime:r,formatAmountCurrency:g,totals:y}}}),ue={class:"table-responsive"};function _e(t,o,C,r,g,S){const s=c("UserInfo"),i=c("PaymentStatus"),y=z,n=G,l=L,v=q,b=J,w=I,P=E;return u(),$(P,null,{default:a(()=>[e(w,{span:24},{default:a(()=>[j("div",ue,[e(b,{columns:t.salesSummaryColumns,"row-key":m=>m.xid,"data-source":t.table.data,pagination:t.table.pagination,loading:t.table.loading,onChange:t.handleTableChange,id:"sales-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:m,record:p})=>[m.dataIndex==="order_date"?(u(),x(k,{key:0},[_(d(t.formatDateTime(p.order_date)),1)],64)):h("",!0),m.dataIndex==="payment_type"?(u(),x(k,{key:1},[_(d(p.payment_type=="in"?t.$t("menu.payment_in"):t.$t("menu.payment_out")),1)],64)):h("",!0),m.dataIndex==="user_id"?(u(),$(s,{key:2,user:p.user},null,8,["user"])):h("",!0),m.dataIndex==="amount"?(u(),x(k,{key:3},[_(d(t.formatAmountCurrency(p.total)),1)],64)):h("",!0),m.dataIndex==="payment_status"?(u(),$(i,{key:4,paymentStatus:p.payment_status},null,8,["paymentStatus"])):h("",!0),m.dataIndex==="staff_user_id"?(u(),x(k,{key:5},[_(d(p.staff_member.name),1)],64)):h("",!0)]),summary:a(()=>[e(v,null,{default:a(()=>[e(y,{"col-span":2}),e(y,{"col-span":1},{default:a(()=>[e(n,{strong:""},{default:a(()=>[_(d(t.$t("common.total")),1)]),_:1})]),_:1}),e(y,{"col-span":1},{default:a(()=>[e(n,{strong:""},{default:a(()=>[e(l,null,{default:a(()=>[_(d(t.formatAmountCurrency(t.totals.totalAmount)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})}const de=A(me,[["render",_e]]),ie={components:{UserInfo:M,DateRangePicker:ne,AdminPageHeader:se,SalesSummary:de,ExprotTable:re},setup(){const t=B(),{permsArray:o,willSubscriptionModuleVisible:C}=D(),r=O({user_id:void 0,payment_mode_id:void 0,dates:[]}),g=W({}),S=K();return Q(()=>{(!(o.value.includes("users_view")||o.value.includes("admin"))||!C("reports"))&&S.push("admin.dashboard.index")}),V(()=>{const s=axiosAdmin.get("users?limit=10000");Promise.all([s]).then(([i])=>{g.value=i.data})}),{...t,filters:r,users:g,permsArray:o}}};function pe(t,o,C,r,g,S){const s=c("ExprotTable"),i=Y,y=c("router-link"),n=Z,l=ee,v=c("AdminPageHeader"),b=I,w=ae,P=te,m=c("DateRangePicker"),p=E,N=c("admin-page-filters"),U=c("SalesSummary"),H=c("admin-page-table-content");return u(),x(k,null,[e(v,null,{header:a(()=>[e(i,{title:t.$t("menu.sales_summary"),class:"p-0"},{extra:a(()=>[e(s,{exportType:"sales_summary_reports",tableName:"sales-summary-reports-table",title:`${t.$t("menu.sales_summary")} ${t.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[e(l,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[e(n,null,{default:a(()=>[e(y,{to:{name:"admin.dashboard.index"}},{default:a(()=>[_(d(t.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),e(n,null,{default:a(()=>[_(d(t.$t("menu.reports")),1)]),_:1}),e(n,null,{default:a(()=>[_(d(t.$t("menu.sales_summary")),1)]),_:1})]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(p,{gutter:[16,16]},{default:a(()=>[e(b,{xs:24,sm:24,md:12,lg:10,xl:10}),e(b,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[e(p,{gutter:[16,16],justify:"end"},{default:a(()=>[e(b,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[e(P,{value:r.filters.user_id,"onUpdate:value":o[0]||(o[0]=f=>r.filters.user_id=f),placeholder:t.$t("common.select_default_text",[t.$t("staff_member.staff_member")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(u(!0),x(k,null,X(r.users,f=>(u(),$(w,{key:f.xid,title:f.name,value:f.xid},{default:a(()=>[_(d(f.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),e(b,{xs:24,sm:24,md:10,lg:8,xl:8},{default:a(()=>[e(m,{onDateTimeChanged:o[1]||(o[1]=f=>{r.filters.dates=f})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:a(()=>[e(U,{user_id:r.filters.user_id,dates:r.filters.dates},null,8,["user_id","dates"])]),_:1})],64)}const ve=A(ie,[["render",pe]]);export{ve as default};
