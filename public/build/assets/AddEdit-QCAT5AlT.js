import{Y as M,f as b,_ as q,d as B,R as P,aT as V,aU as R,u as W,b as H,a6 as L,r as O,o as I,i as A,w as a,a as l,l as _,t as m,c as N,M as j,G as z,ak as U,I as G,n as Y,q as J,co as K,h as Q,a_ as X,bx as Z,bv as x,B as ee,F as le,a0 as ae,ap as te}from"./app-CsgcGABr.js";import{a as oe}from"./apiAdmin-CdX65gtg.js";import{h as E}from"./hrmManagement-BSCF502h.js";import{S as ne}from"./SaveOutlined-sGOueZ_q.js";const me=()=>{const e="shifts",{t}=M(),k=[],h={name:"",clock_in_time:"",clock_out_time:"",late_mark_after:"",self_clocking:1,allowed_ip_address:"",early_clock_in_time:"",allow_clock_out_till:""},v=b([{title:t("shift.name"),dataIndex:"name"},{title:t("shift.clock_in_time"),dataIndex:"clock_in_time"},{title:t("shift.clock_out_time"),dataIndex:"clock_out_time"},{title:t("shift.late_mark_after"),dataIndex:"late_mark_after"},{title:t("shift.allow_clock_out_till"),dataIndex:"allow_clock_out_till"},{title:t("shift.early_clock_in_time"),dataIndex:"early_clock_in_time"},{title:t("shift.self_clocking"),dataIndex:"self_clocking"},{title:t("shift.allowed_ip_address"),dataIndex:"allowed_ip_address"}]),c=[{key:"name",value:t("common.name")}];return{addEditUrl:e,initData:h,columns:v,filterableColumns:c,hashableColumns:k}},se=B({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:P,LoadingOutlined:V,SaveOutlined:ne,hrmManagement:E,MinusSquareOutlined:R},setup(e,{emit:t}){const k=W(),{addEditRequestAdmin:h,loading:v,rules:c}=oe(),{appSetting:g,disabledDate:u,permsArray:i}=H(),$=b([]),n=b([]),s=b({}),{formatShiftTime24Hours:p,formatShiftTime12Hours:w}=E(),S=()=>{let d=p(s.value.time[0]),r=p(s.value.time[1]),o={...s.value,clock_in_time:s.value.time[0]?d:"",clock_out_time:s.value.time[1]?r:"",allowed_ip_address:D()};h({url:e.url,data:o,successMessage:e.successMessage,success:y=>{t("addEditSuccess",y.xid),k.dispatch("hrm/updateSelfClocking")}})},F=()=>{c.value={},t("closed")},f=()=>{n.value.push({allowed_ip_address:""})},C=d=>{let r=n.value.indexOf(d);r!==-1&&n.value.splice(r,1),d.id!=""&&$.value.push(d.id)},D=()=>{var d=[];return U(n.value,r=>{r.allowed_ip_address!=""&&d.push(r)}),d};return L(()=>e.visible,(d,r)=>{if(e.addEditType=="edit"){s.value={...e.formData,time:[w(e.data.clock_in_time),w(e.data.clock_out_time)]};var o=[];n.value=[],U(e.data.allowed_ip_address,y=>{o.push({allowed_ip_address:y.allowed_ip_address}),n.value=o})}else s.value={...e.formData,clock_in_time:"",clock_out_time:""},n.value=[]}),{loading:v,rules:c,onClose:F,onSubmit:S,appSetting:g,disabledDate:u,permsArray:i,addFormField:f,removeFormField:C,formFields:n,newFormData:s,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function ie(e,t,k,h,v,c){const g=G,u=Y,i=J,$=K,n=Q,s=X,p=Z,w=x,S=O("MinusSquareOutlined"),F=O("PlusOutlined"),f=ee,C=le,D=O("SaveOutlined"),d=ae,r=te;return I(),A(r,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[l(d,null,{default:a(()=>[l(f,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[l(D)]),default:a(()=>[_(" "+m(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),l(f,{key:"back",onClick:e.onClose},{default:a(()=>[_(m(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[l(C,{layout:"vertical"},{default:a(()=>[l(n,{gutter:16},{default:a(()=>[l(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("shift.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[l(g,{value:e.newFormData.name,"onUpdate:value":t[0]||(t[0]=o=>e.newFormData.name=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("shift.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("shift.clock_in_time"),name:"clock_in_time",help:e.rules.clock_in_time?e.rules.clock_in_time.message:null,validateStatus:e.rules.clock_in_time?"error":null,class:"required"},{default:a(()=>[l($,{value:e.newFormData.time,"onUpdate:value":t[1]||(t[1]=o=>e.newFormData.time=o),valueFormat:"hh:mm A",format:"h:mm a",style:{width:"100%"},"use12-hours":""},null,8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(n,{gutter:16},{default:a(()=>[l(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("shift.early_clock_in_time"),name:"early_clock_in_time",help:e.rules.early_clock_in_time?e.rules.early_clock_in_time.message:null,validateStatus:e.rules.early_clock_in_time?"error":null},{default:a(()=>[l(s,{value:e.newFormData.early_clock_in_time,"onUpdate:value":t[2]||(t[2]=o=>e.newFormData.early_clock_in_time=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("shift.early_clock_in_time")]),style:{width:"100%"}},{addonAfter:a(()=>[_(m(e.$t("common.minutes")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("shift.allow_clock_out_till"),name:"allow_clock_out_till",help:e.rules.allow_clock_out_till?e.rules.allow_clock_out_till.message:null,validateStatus:e.rules.allow_clock_out_till?"error":null},{default:a(()=>[l(s,{value:e.newFormData.allow_clock_out_till,"onUpdate:value":t[3]||(t[3]=o=>e.newFormData.allow_clock_out_till=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("shift.allow_clock_out_till")]),style:{width:"100%"}},{addonAfter:a(()=>[_(m(e.$t("common.minutes")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),l(n,{gutter:16},{default:a(()=>[l(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("shift.late_mark_after"),name:"late_mark_after",help:e.rules.late_mark_after?e.rules.late_mark_after.message:null,validateStatus:e.rules.late_mark_after?"error":null},{default:a(()=>[l(s,{value:e.newFormData.late_mark_after,"onUpdate:value":t[4]||(t[4]=o=>e.newFormData.late_mark_after=o),placeholder:e.$t("common.placeholder_default_text",[e.$t("shift.late_mark_after")]),style:{width:"100%"}},{addonAfter:a(()=>[_(m(e.$t("common.minutes")),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),l(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[l(u,{label:e.$t("shift.self_clocking"),name:"self_clocking",help:e.rules.self_clocking?e.rules.self_clocking.message:null,validateStatus:e.rules.self_clocking?"error":null},{default:a(()=>[l(w,{value:e.newFormData.self_clocking,"onUpdate:value":t[5]||(t[5]=o=>e.newFormData.self_clocking=o),"button-style":"solid",size:"small"},{default:a(()=>[l(p,{value:1},{default:a(()=>[_(m(e.$t("common.yes")),1)]),_:1}),l(p,{value:0},{default:a(()=>[_(m(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),(I(!0),N(z,null,j(e.formFields,(o,y)=>(I(),A(n,{gutter:16,key:o.id,style:{display:"flex","align-items":"center"}},{default:a(()=>[l(i,{xs:24,sm:24,md:23,lg:23},{default:a(()=>[l(u,{label:e.$t("shift.allowed_ip_address"),name:"allowed_ip_address"},{default:a(()=>[l(g,{value:o.allowed_ip_address,"onUpdate:value":T=>o.allowed_ip_address=T,placeholder:e.$t("common.placeholder_default_text",[e.$t("shift.allowed_ip_address")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label"])]),_:2},1024),l(i,{span:1,style:{"margin-top":"6px"}},{default:a(()=>[l(S,{onClick:T=>e.removeFormField(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[l(u,null,{default:a(()=>[l(f,{type:"dashed",block:"",onClick:e.addFormField},{default:a(()=>[l(F),_(" "+m(e.$t("shift.allowed_ip_address")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const ce=q(se,[["render",ie]]);export{ce as A,me as f};
