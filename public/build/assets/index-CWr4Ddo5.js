import{_ as H,b as q,f as D,e as M,cg as R,E as j,V as z,a6 as F,r as c,o as f,c as x,a as t,w as e,G as C,l as s,t as l,j as G,i as J,k as $,ay as L,aB as U,aC as W,q as K,h as O,a1 as Q,aR as X,aL as Y,aM as Z,H as tt,aN as et,J as at}from"./app-DOZnD-OU.js";import{P as ot}from"./ProductSearchInput-CpTC-vAn.js";import{d as nt}from"./datatable-BPHWgXYc.js";import{E as st,f as lt}from"./ExportTable-DQG5fBBn.js";import{A as rt}from"./AdminPageHeader-B5Kay2LS.js";import"./filter-Bu9dBJTo.js";import"./PrinterOutlined-DGlcOaEU.js";import"./fields-CoMvyoQp.js";import"./index-DrUOpbMf.js";const _t={components:{ProductSearchInput:ot,AdminPageHeader:rt,ExprotTable:st},setup(){const{permsArray:a,selectedWarehouse:m,willSubscriptionModuleVisible:v,formatAmountCurrency:_}=q(),{url:w,stockAlertColumns:T,stockAlertHashableColumns:b}=lt(),p=D(void 0),g=M(),o=nt();R(()=>{(!(a.value.includes("products_view")||a.value.includes("admin"))||!v("reports"))&&g.push("admin.dashboard.index")}),j(()=>{d()});const d=()=>{o.tableUrl.value={url:w,filters:{"products.id":p.value},extraFilters:{fetch_stock_alert:!0}},o.hashable.value=[...b],o.exportDetails.value={allowExport:!0,exportType:"stock_alert_reports"},o.fetch({page:1})},h=z(()=>{let n=0;return o.table.data.forEach(i=>{n+=i.details.current_stock}),{totalCurrentStock:n}});return F(m,(n,i)=>{d()}),{stockAlertColumns:T,...o,searchProductId:p,getTableData:d,permsArray:a,totals:h,formatAmountCurrency:_}}},ut={class:"table-responsive"};function ct(a,m,v,_,w,T){const b=c("ExprotTable"),p=L,g=c("router-link"),o=U,d=W,h=c("AdminPageHeader"),n=K,i=c("ProductSearchInput"),k=O,V=c("admin-page-filters"),P=Q,S=X,y=Y,A=Z,B=tt,E=et,I=at,N=c("admin-page-table-content");return f(),x(C,null,[t(h,null,{header:e(()=>[t(p,{title:a.$t("menu.stock_alert"),class:"p-0"},{extra:e(()=>[t(b,{exportType:"stock_alert_reports",tableName:"stock-alert-reports-table",title:`${a.$t("menu.stock_alert")} ${a.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:e(()=>[t(d,{separator:"-",style:{"font-size":"12px"}},{default:e(()=>[t(o,null,{default:e(()=>[t(g,{to:{name:"admin.dashboard.index"}},{default:e(()=>[s(l(a.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(o,null,{default:e(()=>[s(l(a.$t("menu.reports")),1)]),_:1}),t(o,null,{default:e(()=>[s(l(a.$t("menu.stock_alert")),1)]),_:1})]),_:1})]),_:1}),t(V,null,{default:e(()=>[t(k,{gutter:[16,16]},{default:e(()=>[t(n,{xs:24,sm:24,md:12,lg:10,xl:10}),t(n,{xs:24,sm:24,md:12,lg:14,xl:14},{default:e(()=>[t(k,{gutter:[16,16],justify:"end"},{default:e(()=>[t(n,{xs:24,sm:24,md:12,lg:10,xl:6},{default:e(()=>[t(i,{onValueChanged:m[0]||(m[0]=r=>{_.searchProductId=r,_.getTableData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(N,null,{default:e(()=>[t(k,null,{default:e(()=>[t(n,{span:24},{default:e(()=>[G("div",ut,[t(I,{columns:_.stockAlertColumns,"row-key":r=>r.xid,"data-source":a.table.data,pagination:a.table.pagination,loading:a.table.loading,onChange:a.handleTableChange,id:"stock-alert-reports-table",bordered:"",size:"middle"},{bodyCell:e(({column:r,record:u})=>[r.dataIndex==="name"?(f(),J(S,{key:0},{default:e(()=>[t(P,{shape:"square",src:u.image_url},null,8,["src"]),s(" "+l(u.name),1)]),_:2},1024)):$("",!0),r.dataIndex==="current_stock"?(f(),x(C,{key:1},[s(l(`${u.details.current_stock} ${u.unit.short_name}`),1)],64)):$("",!0),r.dataIndex==="stock_quantitiy_alert"?(f(),x(C,{key:2},[s(l(`${u.details.stock_quantitiy_alert} ${u.unit.short_name}`),1)],64)):$("",!0)]),summary:e(()=>[t(E,null,{default:e(()=>[t(y,{"col-span":1}),t(y,{"col-span":1},{default:e(()=>[t(A,{strong:""},{default:e(()=>[s(l(a.$t("common.total")),1)]),_:1})]),_:1}),t(y,{"col-span":1},{default:e(()=>[t(A,{strong:""},{default:e(()=>[t(B,null,{default:e(()=>[s(l(_.totals.totalCurrentStock),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const yt=H(_t,[["render",ct]]);export{yt as default};
