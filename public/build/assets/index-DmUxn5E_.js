import{Y as M,f as B,_ as T,d as F,R as P,aT as J,b as I,r as _,o as c,i as D,w as n,a,l as d,t as r,I as Y,n as Q,q as R,h as V,b5 as Z,bx as x,bv as ee,F as ae,B as q,X as ne,z as te,u as oe,E as z,a6 as le,c as h,O as se,P as de,az as re,aA as ie,G as A,k as w,j as ue,ay as me,aB as pe,aC as ce,a0 as _e,aE as fe,aF as ge,bk as ye,J as be}from"./app-BGT2rO3o.js";import{c as ve}from"./crud-CMCwfvrw.js";import{a as we}from"./apiAdmin-Dy0HBSub.js";import{S as he}from"./SaveOutlined-DE64dtuy.js";import{A as Ce}from"./AdminPageHeader-CJWz-FmB.js";import{S as Se}from"./ScheduleOutlined-BEaKI5M1.js";import{T as ke}from"./TabletOutlined-x6yQZdTT.js";import{F as $e}from"./FundViewOutlined-BXisUWWV.js";import{G as Ae,U as De}from"./UnderlineOutlined-fGl1wWwB.js";import"./datatable-kwYU4TZT.js";import"./filter-B3udfxQg.js";import"./index-DnH4K6FM.js";const Ee=()=>{const e="awards?fields=id,xid,name,description,award_price,active",t="awards",{t:i}=M(),o={name:"",description:"",award_price:"",active:1},f=B([{title:i("award.name"),dataIndex:"name"},{title:i("award.description"),dataIndex:"description"},{title:i("award.award_price"),dataIndex:"award_price"},{title:i("award.active"),dataIndex:"active"}]),u=[{key:"name",value:i("common.name")}];return{url:e,addEditUrl:t,initData:o,columns:f,filterableColumns:u}},Oe=F({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:P,LoadingOutlined:J,SaveOutlined:he},setup(e,{emit:t}){const{addEditRequestAdmin:i,loading:o,rules:f}=we(),{appSetting:u,permsArray:s}=I();return{loading:o,rules:f,onClose:()=>{f.value={},t("closed")},onSubmit:()=>{i({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{t("addEditSuccess",p.xid)}})},appSetting:u,permsArray:s,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Ke(e,t,i,o,f,u){const s=Y,l=Q,m=R,p=V,C=Z,g=x,v=ee,O=ae,S=_("SaveOutlined"),k=q,K=ne;return c(),D(K,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:n(()=>[a(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:n(()=>[a(S)]),default:n(()=>[d(" "+r(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),a(k,{key:"back",onClick:e.onClose},{default:n(()=>[d(r(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:n(()=>[a(O,{layout:"vertical"},{default:n(()=>[a(p,{gutter:16},{default:n(()=>[a(m,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(l,{label:e.$t("award.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:n(()=>[a(s,{value:e.formData.name,"onUpdate:value":t[0]||(t[0]=b=>e.formData.name=b),placeholder:e.$t("common.placeholder_default_text",[e.$t("award.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(p,{gutter:16},{default:n(()=>[a(m,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(l,{label:e.$t("award.award_price"),name:"award_price",help:e.rules.award_price?e.rules.award_price.message:null,validateStatus:e.rules.award_price?"error":null,class:"required"},{default:n(()=>[a(s,{value:e.formData.award_price,"onUpdate:value":t[1]||(t[1]=b=>e.formData.award_price=b),placeholder:e.$t("common.placeholder_default_text",[e.$t("award.award_price")])},{addonBefore:n(()=>[d(r(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(p,{gutter:16},{default:n(()=>[a(m,{xs:24,sm:24,md:24,lg:24},{default:n(()=>[a(l,{label:e.$t("award.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null,class:"required"},{default:n(()=>[a(C,{value:e.formData.description,"onUpdate:value":t[2]||(t[2]=b=>e.formData.description=b),placeholder:e.$t("common.placeholder_default_text",[e.$t("award.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),a(p,{gutter:16},{default:n(()=>[a(m,{xs:24,sm:24,md:12,lg:12},{default:n(()=>[a(l,{label:e.$t("award.active"),name:"active",help:e.rules.active?e.rules.active.message:null,validateStatus:e.rules.active?"error":null},{default:n(()=>[a(v,{value:e.formData.active,"onUpdate:value":t[3]||(t[3]=b=>e.formData.active=b),"button-style":"solid",size:"small"},{default:n(()=>[a(g,{value:1},{default:n(()=>[d(r(e.$t("common.yes")),1)]),_:1}),a(g,{value:0},{default:n(()=>[d(r(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Te=T(Oe,[["render",Ke]]),Ie=F({components:{ScheduleOutlined:Se,TabletOutlined:ke,FundViewOutlined:$e,GoldOutlined:Ae,UnderlineOutlined:De},setup(){const{appSetting:e,user:t,permsArray:i,appModules:o,appType:f}=I(),u=te();oe();const s=B([]);return z(()=>{const l=typeof u.meta.menuKey=="function"?u.meta.menuKey(u):u.meta.menuKey;s.value=[l.replace("-","_")]}),le(u,(l,m)=>{const p=typeof l.meta.menuKey=="function"?l.meta.menuKey(l):l.meta.menuKey;s.value=[p.replace("-","_")]}),{permsArray:i,selectedKeys:s,appType:f}}}),Ue={class:"setting-sidebar"};function Me(e,t,i,o,f,u){const s=_("FundViewOutlined"),l=se,m=_("ScheduleOutlined"),p=de,C=_("perfect-scrollbar");return c(),h("div",Ue,[a(C,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:n(()=>[a(p,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":t[2]||(t[2]=g=>e.selectedKeys=g)},{default:n(()=>[a(l,{onClick:t[0]||(t[0]=g=>e.$router.push({name:"admin.hrm.awards.index"})),key:"awards"},{icon:n(()=>[a(s)]),default:n(()=>[d(" "+r(e.$t("menu.awards")),1)]),_:1}),a(l,{onClick:t[1]||(t[1]=g=>e.$router.push({name:"admin.hrm.appreciations.index"})),key:"appreciations"},{icon:n(()=>[a(m)]),default:n(()=>[d(" "+r(e.$t("menu.appreciations")),1)]),_:1})]),_:1},8,["selectedKeys"])]),_:1})])}const Be=T(Ie,[["render",Me]]),Fe={components:{PlusOutlined:P,EditOutlined:re,DeleteOutlined:ie,AddEdit:Te,AdminPageHeader:Ce,AppreciationSidebar:Be},setup(){const{t:e}=M(),{addEditUrl:t,initData:i,columns:o,filterableColumns:f,url:u}=Ee(),s=ve(),{permsArray:l,appSetting:m,formatDate:p,formatAmountCurrency:C,statusColors:g}=I();return z(()=>{(l.value.includes("awards_edit")||l.value.includes("awards_delete")||l.value.includes("admin"))&&(o.value=[...o.value,{title:e("common.action"),dataIndex:"action"}]),s.tableUrl.value={url:u},s.table.filterableColumns=f,s.fetch({page:1}),s.crudUrl.value=t,s.langKey.value="award",s.initData.value={...i},s.formData.value={...i}}),{columns:o,...s,filterableColumns:f,permsArray:l,appSetting:m,formatDate:p,formatAmountCurrency:C,statusColors:g}}},Pe={class:"table-responsive"},Re={key:0},Ve={key:1};function qe(e,t,i,o,f,u){const s=me,l=_("router-link"),m=pe,p=ce,C=_("AdminPageHeader"),g=_("AppreciationSidebar"),v=R,O=_("PlusOutlined"),S=q,k=_("DeleteOutlined"),K=_e,b=fe,N=ge,E=V,G=_("admin-page-filters"),H=_("AddEdit"),U=ye,j=_("EditOutlined"),L=be,W=_("admin-page-table-content");return c(),h(A,null,[a(C,null,{header:n(()=>[a(s,{title:e.$t("menu.awards"),class:"p-0"},null,8,["title"])]),breadcrumb:n(()=>[a(p,{separator:"-",style:{"font-size":"12px"}},{default:n(()=>[a(m,null,{default:n(()=>[a(l,{to:{name:"admin.dashboard.index"}},{default:n(()=>[d(r(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),a(m,null,{default:n(()=>[d(r(e.$t("menu.hrm")),1)]),_:1}),a(m,null,{default:n(()=>[d(r(e.$t("menu.awards")),1)]),_:1})]),_:1})]),_:1}),a(E,null,{default:n(()=>[a(v,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:n(()=>[a(g)]),_:1}),a(v,{xs:24,sm:24,md:24,lg:20,xl:20},{default:n(()=>[a(G,null,{default:n(()=>[a(E,{gutter:[16,16]},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:10,xl:10},{default:n(()=>[a(K,null,{default:n(()=>[o.permsArray.includes("awards_create")||o.permsArray.includes("admin")?(c(),D(S,{key:0,type:"primary",onClick:e.addItem},{default:n(()=>[a(O),d(" "+r(e.$t("award.add")),1)]),_:1},8,["onClick"])):w("",!0),e.table.selectedRowKeys.length>0&&(o.permsArray.includes("awards_delete")||o.permsArray.includes("admin"))?(c(),D(S,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:n(()=>[a(k)]),default:n(()=>[d(" "+r(e.$t("common.delete")),1)]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1}),a(v,{xs:24,sm:24,md:12,lg:14,xl:14},{default:n(()=>[a(E,{gutter:[16,16],justify:"end"},{default:n(()=>[a(v,{xs:24,sm:24,md:12,lg:12,xl:8},{default:n(()=>[a(N,{compact:""},{default:n(()=>[a(b,{style:{width:"100%"},value:e.table.searchString,"onUpdate:value":t[0]||(t[0]=y=>e.table.searchString=y),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading,placeholder:e.$t("common.placeholder_search_text",[e.$t("common.name")])},null,8,["value","onChange","onSearch","loading","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(W,null,{default:n(()=>[a(H,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),a(E,null,{default:n(()=>[a(v,{span:24},{default:n(()=>[ue("div",Pe,[a(L,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:y=>({disabled:!1,name:y.xid})},columns:o.columns,"row-key":y=>y.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:n(({column:y,record:$})=>[y.dataIndex==="award_price"?(c(),h(A,{key:0},[d(r(o.formatAmountCurrency($.award_price)),1)],64)):w("",!0),y.dataIndex=="active"?(c(),h(A,{key:1},[$.active==1?(c(),h("div",Re,[a(U,{color:o.statusColors.enabled},{default:n(()=>[d(r(e.$t("common.yes")),1)]),_:1},8,["color"])])):(c(),h("div",Ve,[a(U,{color:o.statusColors.disabled},{default:n(()=>[d(r(e.$t("common.no")),1)]),_:1},8,["color"])]))],64)):w("",!0),y.dataIndex==="payout_type"?(c(),h(A,{key:2},[d(r($.payout_type=="monthly"?e.$t("award.monthly"):e.$t("award.daily")),1)],64)):w("",!0),y.dataIndex==="action"?(c(),h(A,{key:3},[o.permsArray.includes("awards_edit")||o.permsArray.includes("admin")?(c(),D(S,{key:0,type:"primary",onClick:X=>e.editItem($),style:{"margin-left":"4px"}},{icon:n(()=>[a(j)]),_:2},1032,["onClick"])):w("",!0),o.permsArray.includes("awards_delete")||o.permsArray.includes("admin")?(c(),D(S,{key:1,type:"primary",onClick:X=>e.showDeleteConfirm($.xid),style:{"margin-left":"4px"}},{icon:n(()=>[a(k)]),_:2},1032,["onClick"])):w("",!0)],64)):w("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const xe=T(Fe,[["render",qe]]);export{xe as default};
