import{Y as V,f as P,_ as Y,d as ne,R as H,aT as ae,b as N,E as z,r as k,o as i,i as y,w as t,a as n,l as r,t as s,j as B,c as u,M as F,G as A,k as m,aG as W,aD as j,n as oe,q as G,h as L,a_ as ie,a$ as le,b5 as se,F as re,B as J,a0 as Q,ap as de,az as me,aA as ue,a5 as pe,b2 as _e,ay as ce,aB as fe,aC as ge,bH as ye,an as be,ao as ve,bk as he,J as ke}from"./app-DEGc35fG.js";import{c as De}from"./crud-_VG7jHeH.js";import{a as Ae}from"./apiAdmin-ChTOV1AZ.js";import{S as Ce}from"./StaffAddButton-BkEzs3G2.js";import{D as $e}from"./AddButton-CiGbMy_h.js";import{D as Se}from"./DateTimePicker-nstxOwFO.js";import{S as we}from"./SaveOutlined-CN8q81Od.js";import{A as Ee}from"./AdminPageHeader-xgYaoUxS.js";import{P as Oe}from"./PayrollSidebar-Ct35zlSw.js";import{D as Ue}from"./DateRangePicker-BEKiEXka.js";import"./datatable-olxzEWY8.js";import"./filter-C51YitDG.js";import"./fields-blzPxU4j.js";import"./Upload-DnSHELiI.js";import"./AddButton-CMTSJmcr.js";import"./AddEdit-D0LZu0TR.js";import"./SettingOutlined-CvJdFKOR.js";import"./AddButton-rMERWMh9.js";import"./AddEdit-BSwfNgT7.js";import"./AddEdit-lVBO8ggY.js";import"./index-CJVjyWpv.js";import"./ScheduleOutlined-CBiU4Uf6.js";import"./TabletOutlined-DrnNnvL4.js";import"./DollarCircleOutlined-CM1hDUBG.js";const Pe=()=>{const e="increments-promotions",{t:a}=V(),$=["current_designation_id","promoted_designation_id","user_id"],o={user_id:void 0,current_designation_id:void 0,promoted_designation_id:void 0,date:void 0,type:"increment",description:"",net_salary:""},O=P([{title:a("increment_promotion.date"),dataIndex:"date"},{title:a("increment_promotion.user_id"),dataIndex:"user_id"},{title:a("increment_promotion.type"),dataIndex:"type"},{title:a("increment_promotion.details"),dataIndex:"details"},{title:a("increment_promotion.net_salary"),dataIndex:"net_salary"},{title:a("increment_promotion.description"),dataIndex:"description"}]),f=[{key:"name",value:a("common.name")}];return{addEditUrl:e,initData:o,columns:O,filterableColumns:f,hashableColumns:$}},Te=ne({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:H,LoadingOutlined:ae,SaveOutlined:we,StaffMemberAddButton:Ce,DesignationAddButton:$e,DateTimePicker:Se},setup(e,{emit:a}){const{addEditRequestAdmin:$,loading:o,rules:O}=Ae(),{appSetting:f,disabledDate:D,permsArray:b}=N(),p=P([]),g="users?limit=10000",S=P([]),v="designations?fields=id,xid,name&limit=10000",_=P({update_basic_salary:!1,update_designation:!1});return z(()=>{const h=axiosAdmin.get(g),I=axiosAdmin.get(v);Promise.all([h,I]).then(([M,E])=>{p.value=M.data,S.value=E.data})}),{loading:o,rules:O,onClose:()=>{O.value={},a("closed")},onSubmit:()=>{$({url:e.url,data:{..._.value,...e.formData},successMessage:e.successMessage,success:h=>{a("addEditSuccess",h.xid)}})},appSetting:f,disabledDate:D,permsArray:b,designationAdded:()=>{axiosAdmin.get(v).then(h=>{S.value=h.data})},staffMemberAdded:()=>{axiosAdmin.get(g).then(h=>{p.value=h.data})},allStaffMembers:p,designations:S,newData:_,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Me={style:{display:"flex"}},Ie={style:{display:"flex"}},Be={style:{display:"flex"}},qe={key:0,class:"form-check form-check-custom me-5 me-lg-20"},Fe={key:1,class:"form-check form-check-custom me-5 me-lg-20"};function Re(e,a,$,o,O,f){const D=W,b=j,p=oe,g=G,S=k("StaffMemberAddButton"),v=L,_=k("DesignationAddButton"),T=ie,C=k("DateTimePicker"),w=le,U=se,h=re,I=k("SaveOutlined"),M=J,E=Q,R=de;return i(),y(R,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:t(()=>[n(E,null,{default:t(()=>[n(M,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:t(()=>[n(I)]),default:t(()=>[r(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),n(M,{key:"back",onClick:e.onClose},{default:t(()=>[r(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:t(()=>[n(h,{layout:"vertical"},{default:t(()=>[n(v,{gutter:16},{default:t(()=>[n(g,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[n(p,{label:e.$t("increment_promotion.type"),name:"type",help:e.rules.type?e.rules.type.message:null,validateStatus:e.rules.type?"error":null,class:"required"},{default:t(()=>[n(b,{value:e.formData.type,"onUpdate:value":a[0]||(a[0]=l=>e.formData.type=l),placeholder:e.$t("common.select_default_text",[e.$t("increment_promotion.type")])},{default:t(()=>[n(D,{value:"increment"},{default:t(()=>[r(s(e.$t("increment_promotion.increment")),1)]),_:1}),n(D,{value:"promotion"},{default:t(()=>[r(s(e.$t("increment_promotion.promotion")),1)]),_:1}),n(D,{value:"increment_promotion"},{default:t(()=>[r(s(e.$t("increment_promotion.increment_promotion")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n(g,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[n(p,{label:e.$t("increment_promotion.user_id"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:t(()=>[B("span",Me,[n(b,{value:e.formData.user_id,"onUpdate:value":a[1]||(a[1]=l=>e.formData.user_id=l),placeholder:e.$t("common.select_default_text",[e.$t("increment_promotion.user_id")]),allowClear:!0},{default:t(()=>[(i(!0),u(A,null,F(e.allStaffMembers,l=>(i(),y(D,{key:l.xid,value:l.xid},{default:t(()=>[r(s(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),n(S,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.type=="promotion"||e.formData.type=="increment_promotion"?(i(),y(v,{key:0,gutter:16},{default:t(()=>[n(g,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[n(p,{label:e.$t("increment_promotion.current_designation_id"),name:"current_designation_id",help:e.rules.current_designation_id?e.rules.current_designation_id.message:null,validateStatus:e.rules.current_designation_id?"error":null,class:"required"},{default:t(()=>[B("span",Ie,[n(b,{value:e.formData.current_designation_id,"onUpdate:value":a[2]||(a[2]=l=>e.formData.current_designation_id=l),placeholder:e.$t("common.select_default_text",[e.$t("increment_promotion.current_designation_id")]),allowClear:!0},{default:t(()=>[(i(!0),u(A,null,F(e.designations,l=>(i(),y(D,{key:l.xid,value:l.xid},{default:t(()=>[r(s(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),n(_,{onOnAddSuccess:e.designationAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),n(g,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[n(p,{label:e.$t("increment_promotion.promoted_designation_id"),name:"promoted_designation_id",help:e.rules.promoted_designation_id?e.rules.promoted_designation_id.message:null,validateStatus:e.rules.promoted_designation_id?"error":null,class:"required"},{default:t(()=>[B("span",Be,[n(b,{value:e.formData.promoted_designation_id,"onUpdate:value":a[3]||(a[3]=l=>e.formData.promoted_designation_id=l),placeholder:e.$t("common.select_default_text",[e.$t("increment_promotion.promoted_designation_id")]),allowClear:!0},{default:t(()=>[(i(!0),u(A,null,F(e.designations,l=>(i(),y(D,{key:l.xid,value:l.xid},{default:t(()=>[r(s(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),n(_,{onOnAddSuccess:e.designationAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):m("",!0),n(v,{gutter:16},{default:t(()=>[e.formData.type=="increment"||e.formData.type=="increment_promotion"?(i(),y(g,{key:0,xs:24,sm:24,md:12,lg:12},{default:t(()=>[n(p,{label:e.$t("increment_promotion.net_salary"),name:"net_salary",help:e.rules.net_salary?e.rules.net_salary.message:null,validateStatus:e.rules.net_salary?"error":null,class:"required"},{default:t(()=>[n(T,{value:e.formData.net_salary,"onUpdate:value":a[4]||(a[4]=l=>e.formData.net_salary=l),placeholder:e.$t("common.placeholder_default_text",[e.$t("increment_promotion.net_salary")]),style:{width:"100%"}},{addonBefore:t(()=>[r(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})):m("",!0),n(g,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[n(p,{label:e.$t("increment_promotion.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:t(()=>[n(C,{dateTime:e.formData.date,onDateTimeChanged:a[5]||(a[5]=l=>e.formData.date=l)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.addEditType=="add"&&(e.formData.type=="increment"||e.formData.type=="increment_promotion")&&(e.permsArray.includes("basic_salaries_edit")||e.permsArray.includes("designations_edit")||e.permsArray.includes("admin"))?(i(),y(v,{key:1,class:"mt-5 mb-20",gutter:16},{default:t(()=>[n(g,{xs:24,sm:24,md:12,lg:12},{default:t(()=>[(e.formData.type=="increment"||e.formData.type=="increment_promotion")&&(e.permsArray.includes("basic_salaries_edit")||e.permsArray.includes("admin"))?(i(),u("label",qe,[n(w,{checked:e.newData.update_basic_salary,"onUpdate:checked":a[6]||(a[6]=l=>e.newData.update_basic_salary=l)},{default:t(()=>[r(s(e.$t("increment_promotion.update_basic_salary")),1)]),_:1},8,["checked"])])):m("",!0),(e.formData.type=="promotion"||e.formData.type=="increment_promotion")&&(e.permsArray.includes("designations_edit")||e.permsArray.includes("admin"))?(i(),u("label",Fe,[n(w,{checked:e.newData.update_designation,"onUpdate:checked":a[7]||(a[7]=l=>e.newData.update_designation=l)},{default:t(()=>[r(s(e.$t("increment_promotion.update_designation")),1)]),_:1},8,["checked"])])):m("",!0)]),_:1})]),_:1})):m("",!0),n(v,{gutter:16},{default:t(()=>[n(g,{xs:24,sm:24,md:24,lg:24},{default:t(()=>[n(p,{label:e.$t("increment_promotion.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null,class:"required"},{default:t(()=>[n(U,{value:e.formData.description,"onUpdate:value":a[8]||(a[8]=l=>e.formData.description=l),placeholder:e.$t("common.placeholder_default_text",[e.$t("increment_promotion.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Ke=Y(Te,[["render",Re]]),Ve={components:{PlusOutlined:H,EditOutlined:me,DeleteOutlined:ue,AddEdit:Ke,AdminPageHeader:Ee,CloseOutlined:pe,CheckOutlined:_e,PayrollSidebar:Oe,DateRangePicker:Ue},setup(){const{addEditUrl:e,initData:a,columns:$,filterableColumns:o,hashableColumns:O}=Pe(),f=De(),{t:D}=V(),{permsArray:b,appSetting:p,formatDate:g,formatAmountCurrency:S}=N(),v=P({user_id:void 0}),_=P([]),T="users?limit=10000",C=P({dates:[],type:"all"});z(()=>{(b.value.includes("increments_promotions_edit")||b.value.includes("increments_promotions_delete")||b.value.includes("admin"))&&($.value=[...$.value,{title:D("common.action"),dataIndex:"action"}]),w();const U=axiosAdmin.get(T);Promise.all([U]).then(([h])=>{_.value=h.data}),f.crudUrl.value=e,f.langKey.value="increment_promotion",f.initData.value={...a},f.formData.value={...a},f.hashableColumns.value=[...O]});const w=()=>{f.tableUrl.value={extraFilters:C,filters:v,url:"increments-promotions?fields=id,xid,user_id,x_user_id,user{id,xid,name},promoted_designation_id,x_promoted_designation_id,promotedDesignation{id,xid,name},current_designation_id,x_current_designation_id,currentDesignation{id,xid,name},net_salary,type,description,date"},f.table.filterableColumns=o,f.fetch({page:1})};return{columns:$,...f,filterableColumns:o,permsArray:b,appSetting:p,formatDate:g,setUrlData:w,allUsers:_,filters:v,formatAmountCurrency:S,extraFilters:C}}},Ye={class:"table-responsive"},He={key:0},Ne=B("br",null,null,-1),ze={key:1},We={key:0},je={key:1},Ge={key:2};function Le(e,a,$,o,O,f){const D=ce,b=k("router-link"),p=fe,g=ge,S=k("AdminPageHeader"),v=k("PayrollSidebar"),_=G,T=k("PlusOutlined"),C=J,w=k("DeleteOutlined"),U=Q,h=W,I=j,M=ye,E=L,R=k("admin-page-filters"),l=k("AddEdit"),q=be,X=ve,K=he,Z=k("EditOutlined"),x=ke,ee=k("admin-page-table-content");return i(),u(A,null,[n(S,null,{header:t(()=>[n(D,{title:e.$t("menu.increments_promotions"),class:"p-0"},null,8,["title"])]),breadcrumb:t(()=>[n(g,{separator:"-",style:{"font-size":"12px"}},{default:t(()=>[n(p,null,{default:t(()=>[n(b,{to:{name:"admin.dashboard.index"}},{default:t(()=>[r(s(e.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),n(p,null,{default:t(()=>[r(s(e.$t("menu.hrm")),1)]),_:1}),n(p,null,{default:t(()=>[r(s(e.$t("menu.increments_promotions")),1)]),_:1})]),_:1})]),_:1}),n(E,null,{default:t(()=>[n(_,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:t(()=>[n(v)]),_:1}),n(_,{xs:24,sm:24,md:24,lg:20,xl:20},{default:t(()=>[n(R,null,{default:t(()=>[n(E,{gutter:[16,16]},{default:t(()=>[n(_,{xs:24,sm:24,md:12,lg:10,xl:10},{default:t(()=>[n(U,null,{default:t(()=>[o.permsArray.includes("increments_promotions_create")||o.permsArray.includes("admin")?(i(),y(C,{key:0,type:"primary",onClick:e.addItem},{default:t(()=>[n(T),r(" "+s(e.$t("increment_promotion.add")),1)]),_:1},8,["onClick"])):m("",!0),e.table.selectedRowKeys.length>0&&(o.permsArray.includes("increments_promotions_delete")||o.permsArray.includes("admin"))?(i(),y(C,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:t(()=>[n(w)]),default:t(()=>[r(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):m("",!0)]),_:1})]),_:1}),n(_,{xs:24,sm:24,md:12,lg:14,xl:14},{default:t(()=>[n(E,{gutter:[16,16],justify:"end"},{default:t(()=>[o.permsArray.includes("increments_promotions_view")||o.permsArray.includes("admin")?(i(),y(_,{key:0,xs:24,sm:24,md:12,lg:8,xl:8},{default:t(()=>[n(I,{value:o.filters.user_id,"onUpdate:value":a[0]||(a[0]=d=>o.filters.user_id=d),onChange:o.setUrlData,"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("leave.user")]),allowClear:!0},{default:t(()=>[(i(!0),u(A,null,F(o.allUsers,d=>(i(),y(h,{key:d.xid,value:d.xid,title:d.name},{default:t(()=>[r(s(d.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):m("",!0),n(_,{xs:24,sm:24,md:8,lg:8,xl:8},{default:t(()=>[n(M,{format:o.appSetting.date_format,valueFormat:"YYYY-MM-DD",value:o.extraFilters.dates,"onUpdate:value":a[1]||(a[1]=d=>o.extraFilters.dates=d),style:{width:"100%"},onChange:o.setUrlData},null,8,["format","value","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(ee,null,{default:t(()=>[n(l,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),n(E,null,{default:t(()=>[n(_,{span:24},{default:t(()=>[n(X,{activeKey:o.extraFilters.type,"onUpdate:activeKey":a[2]||(a[2]=d=>o.extraFilters.type=d),onChange:o.setUrlData},{default:t(()=>[n(q,{key:"all",tab:`${e.$t("common.all")}`},null,8,["tab"]),n(q,{key:"increment",tab:`${e.$t("increment_promotion.increment")}`},null,8,["tab"]),n(q,{key:"promotion",tab:`${e.$t("increment_promotion.promotion")}`},null,8,["tab"]),n(q,{key:"increment_promotion",tab:`${e.$t("increment_promotion.increment_promotion")}`},null,8,["tab"])]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),n(E,null,{default:t(()=>[n(_,{span:24},{default:t(()=>[B("div",Ye,[n(x,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:d=>({disabled:!1,name:d.xid})},columns:o.columns,"row-key":d=>d.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:t(({column:d,record:c})=>[d.dataIndex=="user_id"?(i(),u(A,{key:0},[r(s(c.user.name),1)],64)):m("",!0),d.dataIndex=="net_salary"?(i(),u(A,{key:1},[r(s(c.net_salary!=null?o.formatAmountCurrency(c.net_salary):"-"),1)],64)):m("",!0),d.dataIndex=="date"?(i(),u(A,{key:2},[r(s(o.formatDate(c.date)),1)],64)):m("",!0),d.dataIndex=="description"?(i(),u(A,{key:3},[r(s(c.description),1)],64)):m("",!0),d.dataIndex=="details"?(i(),u(A,{key:4},[c.current_designation&&c.current_designation.name?(i(),u("span",He,s(e.$t("increment_promotion.current_designation_id"))+": "+s(c.current_designation.name),1)):m("",!0),Ne,c.promoted_designation&&c.promoted_designation.name?(i(),u("span",ze,s(e.$t("increment_promotion.promoted_designation_id"))+": "+s(c.promoted_designation.name),1)):m("",!0)],64)):m("",!0),d.dataIndex==="type"?(i(),u(A,{key:5},[c.type=="promotion"?(i(),u("div",We,[n(K,{color:"yellow"},{default:t(()=>[r(s(e.$t("increment_promotion.promotion")),1)]),_:1})])):m("",!0),c.type=="increment"?(i(),u("div",je,[n(K,{color:"green"},{default:t(()=>[r(s(e.$t("increment_promotion.increment")),1)]),_:1})])):m("",!0),c.type=="increment_promotion"?(i(),u("div",Ge,[n(K,{color:"green"},{default:t(()=>[r(s(e.$t("increment_promotion.increment_promotion")),1)]),_:1})])):m("",!0)],64)):m("",!0),d.dataIndex==="action"?(i(),y(U,{key:6},{default:t(()=>[o.permsArray.includes("increments_promotions_edit")||o.permsArray.includes("admin")?(i(),y(C,{key:0,type:"primary",onClick:te=>e.editItem(c)},{icon:t(()=>[n(Z)]),_:2},1032,["onClick"])):m("",!0),o.permsArray.includes("increments_promotions_delete")||o.permsArray.includes("admin")?(i(),y(C,{key:1,type:"primary",onClick:te=>e.showDeleteConfirm(c.xid)},{icon:t(()=>[n(w)]),_:2},1032,["onClick"])):m("",!0)]),_:2},1024)):m("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const vt=Y(Ve,[["render",Le]]);export{vt as default};
