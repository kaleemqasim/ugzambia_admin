import{bQ as G,f as n,Y as J,u as L,V as O,a6 as W,bR as Z,b7 as ee,X as S,a as T,aH as E,ax as P,ak as ae}from"./app-C0nSYaKm.js";import{d as te}from"./datatable-CEAoEVo1.js";var se=Object.prototype,ne=se.hasOwnProperty;function oe(o,d){return o!=null&&ne.call(o,d)}function le(o,d){return o!=null&&G(o,d,oe)}const ue=()=>{const{table:o,tableUrl:d,hashable:R,currentPage:u,handleTableChange:V,fetch:h,onTableSearch:A,onRowSelectChange:_,exportDetails:I}=te(),f=n(!1),i=n({}),r=n(""),s=n(""),g=n({}),b=n([]),x=n({}),m=n(!1),c=n("add"),$=n(""),v=n({}),{t:a}=J(),M=L(),U=e=>{f.value=!0,i.value=e},j=()=>{$.value=r.value,c.value="add",m.value=!0,i.value={}},N=()=>{C(),m.value=!1},y=()=>{f.value=!1,i.value={}},F=e=>{const t={};var p=x.value;Object.keys(g.value).forEach(l=>{if(le(p,l)){const B=p[l];t[l]=Z(e,B)}else ee(b.value,l)?t[l]=e[`x_${l}`]:t[l]=e[l]}),t._method="PUT",v.value=t,i.value=e,$.value=`${r.value}/${e.xid}`,c.value="edit",m.value=!0},D=()=>{M.dispatch("auth/updateVisibleSubscriptionModules")},H=e=>{w(e,"add-edit")},K=e=>{w(e,"add-new")},k=e=>{w(e,"add-continue")},w=(e,t="add-edit")=>{if(c.value=="add"){const p={...o.pagination};p.current=1,u.value=1,o.pagination=p}D(),(t=="add-edit"||t=="add-new")&&C(),h({page:c.value=="add"?1:u.value,limit:10}),t=="add-edit"&&(m.value=!1)},Q=e=>{S.confirm({title:a("common.delete")+"?",icon:T(E),content:a(`${s.value}.delete_message`),centered:!0,okText:a("common.yes"),okType:"danger",cancelText:a("common.no"),onOk(){return axiosAdmin.delete(`${r.value}/${e}`).then(t=>{D(),h({page:u.value}),P.success({message:a("common.success"),description:a(`${s.value}.deleted`),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},X=()=>{S.confirm({title:a("common.delete")+"?",icon:T(E),content:a(`${s.value}.selected_delete_message`),centered:!0,okText:a("common.yes"),okType:"danger",cancelText:a("common.no"),onOk(){const e=[];ae(o.selectedRowKeys,t=>{e.push(axiosAdmin.delete(`${r.value}/${t}`))}),Promise.all(e).then(t=>{D(),h({page:u.value}),P.success({message:a("common.success"),description:a(`${s.value}.deleted`),placement:"bottomRight"})})},onCancel(){}})},C=()=>{v.value={...g.value}},Y=e=>{v.value={...v.value,...e}},q=O(()=>s.value!=""?c.value=="add"?a(`${s.value}.add`):a(`${s.value}.edit`):""),z=O(()=>s.value!=""?c.value=="add"?a(`${s.value}.created`):a(`${s.value}.updated`):"");return W(b,(e,t)=>{R.value=e}),{detailsVisible:f,viewData:i,onCloseDetails:y,addEditVisible:m,addEditType:c,addEditUrl:$,currentPage:u,formData:v,initData:g,crudUrl:r,langKey:s,hashableColumns:b,multiDimensalObjectColumns:x,pageTitle:q,successMessage:z,viewItem:U,addItem:j,editItem:F,onCloseAddEdit:N,showDeleteConfirm:Q,addEditSuccess:H,addAndNewSuccess:K,addAndContinueSuccess:k,restFormData:C,assignNewFormData:Y,showSelectedDeleteConfirm:X,table:o,tableUrl:d,handleTableChange:V,fetch:h,onTableSearch:A,onRowSelectChange:_,exportDetails:I}};export{ue as c};
