import{_ as v,d as C,b as O,r as K,o as l,c as m,M as k,G as f,i as h,w as u,a as d,l as x,t as $,a1 as M,a7 as S,O as b,cs as w,f as y,E as A,a6 as E,k as V,P as z}from"./app-Da3MRomk.js";import{M as B}from"./MailOutlined-BRp1yatb.js";import{A as I}from"./AppstoreOutlined-DMLRLhJV.js";import{S as L}from"./SettingOutlined-BX-vASsA.js";const N=C({name:"category-menu",props:["categories"],setup(){const{frontWarehouse:a}=O();return{frontWarehouse:a}}});function F(a,i,c,p,g,_){const t=M,r=K("category-menu"),n=S,s=K("router-link"),e=b;return l(!0),m(f,null,k(a.categories,o=>(l(),m(f,{key:o.xid},[o.children&&o.children.length?(l(),h(n,{key:o.xid,title:o.name},{icon:u(()=>[d(t,{size:16,src:o.image_url},null,8,["src"])]),default:u(()=>[d(r,{categories:o.children},null,8,["categories"])]),_:2},1032,["title"])):(l(),h(e,{key:o.xid},{default:u(()=>[d(s,{to:{name:"front.categories",params:{warehouse:a.frontWarehouse.slug,slug:[o.slug]}}},{default:u(()=>[d(t,{size:16,src:o.image_url},null,8,["src"]),x(" "+$(o.name),1)]),_:2},1032,["to"])]),_:2},1024))],64))),128)}const P=v(N,[["render",F]]),U=C({props:["catSelectedKeys","catOpenKeys"],components:{MailOutlined:B,CalendarOutlined:w,AppstoreOutlined:I,SettingOutlined:L,CategoryMenu:P},setup(a){const i=y([]),c=y([]),p=y([]);A(()=>{c.value=a.catSelectedKeys,g()});const g=()=>{axiosFront.post("front/categories").then(t=>{const r=[];var n=t.data.categories;n.forEach(s=>{if(!s.x_parent_id)return r.push(s);const e=n.findIndex(o=>o.xid===s.x_parent_id);if(!n[e].children)return n[e].children=[s];n[e].children.push(s)}),i.value=r})},_=(t,r)=>{var n,s=t.id;if(!(!t||typeof t!="object"))return t.id===r?[s]:((t.children||[]).some(e=>n=_(e,r)),n&&[s].concat([...n]))};return E(a,(t,r)=>{c.value=t.catSelectedKeys;let n=[];i.value.forEach(s=>{const e=_(s,c.value[0]);e!=null&&e.includes(c.value[0])&&(n=e)}),p.value=n}),{selectedKeys:c,openKeys:p,allCategories:i}}});function W(a,i,c,p,g,_){const t=M,r=K("CategoryMenu"),n=S,s=z;return l(),h(s,{selectedKeys:a.selectedKeys,"onUpdate:selectedKeys":i[0]||(i[0]=e=>a.selectedKeys=e),openKeys:a.openKeys,"onUpdate:openKeys":i[1]||(i[1]=e=>a.openKeys=e),style:{width:"100%"},mode:"inline"},{default:u(()=>[(l(!0),m(f,null,k(a.allCategories,e=>(l(),m(f,{key:e.xid},[e.children&&e.children.length?(l(),h(n,{key:e.xid},{icon:u(()=>[d(t,{size:16,src:e.image_url},null,8,["src"])]),title:u(()=>[x($(e.name),1)]),default:u(()=>[d(r,{categories:e.children},null,8,["categories"])]),_:2},1024)):V("",!0)],64))),128))]),_:1},8,["selectedKeys","openKeys"])}const q=v(U,[["render",W]]);export{q as L};
