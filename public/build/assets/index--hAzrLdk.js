import{_ as q,R as G,az as R,aA as J,b2 as W,a5 as K,cp as Q,W as X,cn as Z,aH as $,cq as ee,cr as te,Y as ae,b as le,f as u,g as ne,E as oe,r as C,o as d,c as _,a as e,w as a,G as v,h as se,l as c,t as i,i as z,M as V,k as g,j as h,ay as ie,aB as de,aC as ce,q as _e,aD as ue,be as re,am as me,C as fe,bF as ge,H as ye,aM as ke,J as pe,aG as ve}from"./app-CDr1bG5H.js";import{h as he}from"./hrmManagement-Dbo7CwIj.js";import{A as Ce}from"./AdminPageHeader-C58ahpJ5.js";import{A as be}from"./AttendanceSidebar-D0Ie9i6I.js";import{A as xe}from"./AttendanceStatus-BsfIfQ3r.js";import{C as De}from"./CalendarFilled-CNDoee9s.js";import"./index-DQuVqeGd.js";import{C as we}from"./CarOutlined-BQVRAIuo.js";import{C as Ae}from"./CalculatorOutlined-7-gy-daQ.js";import"./ScheduleOutlined--kLWQSJK.js";import"./TabletOutlined-BCs25x8L.js";const Ie={components:{PlusOutlined:G,EditOutlined:R,DeleteOutlined:J,CheckOutlined:W,CloseOutlined:K,CalendarFilled:De,ArrowRightOutlined:Q,CarOutlined:we,CalculatorOutlined:Ae,ClockCircleOutlined:X,CheckCircleOutlined:Z,ExclamationCircleOutlined:$,CloseCircleOutlined:ee,CalendarOutlined:te,AdminPageHeader:Ce,AttendanceSidebar:be,AttendanceStatus:xe},setup(){const{t:n}=ae(),{getMonthNameByNumber:y,formatMinutes:H,monthArrays:t}=he(),{dayjs:B,formatTime:E,formatDate:F,user:L,permsArray:b}=le(),r=u({month:B().format("MM"),year:B(),user_id:void 0}),N=u([{title:n("attendance.date"),dataIndex:"date"},{title:n("attendance.status"),dataIndex:"status"},{title:n("attendance.clock_in"),dataIndex:"clock_in"},{title:n("attendance.clock_out"),dataIndex:"clock_out"},{title:n("attendance.clocked_time"),dataIndex:"clocked_time"},{title:n("attendance.other_details"),dataIndex:"other_details"}]),x=u(1),s=ne({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1}),D=u([]),O="users?limit=10000",P=u(0),k=u(0),w=u(0),m=u(0),f=u(0),S=u(0),A=u(0),T=u(0),I=u(0);oe(()=>{const o=axiosAdmin.get(O);Promise.all([o]).then(([l])=>{D.value=l.data,r.value={...r.value,user_id:L.value.xid},M()})});const Y=()=>{x.value=1,M()},M=()=>{s.loading=!0;var o=r.value.month,l=r.value.year.format("YYYY");const j=s.pagination.pageSize;(x.value-1)*j;var U=`attendances/summary-month?month=${o}&year=${l}`;r.value.user_id&&(U+=`&user_id=${r.value.user_id}`),axiosAdmin.get(U).then(p=>{s.data=p.data.data,P.value=p.data.office_time,w.value=p.data.working_days,k.value=p.data.present_days,m.value=p.data.clock_in_duration,f.value=p.data.total_office_time,A.value=p.data.total_late_days,I.value=p.data.half_days,S.value=(m.value/f.value*100).toFixed(2),T.value=(A.value/w.value*100).toFixed(2),s.loading=!1})};return{table:s,currentPage:x,columns:N,getMonthNameByNumber:y,filters:r,filterData:Y,permsArray:b,officeTime:P,totalPresentDays:k,workingDays:w,clockInDuration:m,totalOfficeTime:f,clockInDurationPercentage:S,totalLateDays:A,totalLateDaysPercentage:T,halfDayCount:I,setUrlData:M,allUsers:D,formatTime:E,formatDate:F,formatMinutes:H,monthArrays:t}}},Me={class:"mb-30"},Oe={class:"table-responsive"},Pe={key:0,style:{color:"red"}},Se={key:0,style:{width:"100%"}},Te={key:0},ze=h("br",null,null,-1),Be=h("br",null,null,-1),Fe={key:1},Le={key:0},Ne=h("br",null,null,-1),Ye={key:1};function He(n,y,H,t,B,E){const F=ie,L=C("router-link"),b=de,r=ce,N=C("AdminPageHeader"),x=C("AttendanceSidebar"),s=_e,D=ve,O=ue,P=re,k=se,w=C("admin-page-filters"),m=me,f=fe,S=C("AttendanceStatus"),A=ge,T=ye,I=ke,Y=pe,M=C("admin-page-table-content");return d(),_(v,null,[e(N,null,{header:a(()=>[e(F,{title:n.$t("menu.remaining_leaves"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[e(r,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[e(b,null,{default:a(()=>[e(L,{to:{name:"admin.dashboard.index"}},{default:a(()=>[c(i(n.$t("menu.dashboard")),1)]),_:1},8,["to"])]),_:1}),e(b,null,{default:a(()=>[c(i(n.$t("menu.hrm")),1)]),_:1}),e(b,null,{default:a(()=>[c(i(n.$t("menu.remaining_leaves")),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(s,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[e(x)]),_:1}),e(s,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[e(w,null,{default:a(()=>[e(k,{gutter:[16,16],align:"middle"},{default:a(()=>[e(s,{xs:24,sm:24,md:12,lg:10,xl:10}),e(s,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[e(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t.permsArray.includes("attendances_view")||t.permsArray.includes("admin")?(d(),z(s,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[e(O,{value:t.filters.user_id,"onUpdate:value":y[0]||(y[0]=o=>t.filters.user_id=o),onChange:t.filterData,"show-search":"",style:{width:"100%"},placeholder:n.$t("common.select_default_text",[n.$t("leave.user")])},{default:a(()=>[(d(!0),_(v,null,V(t.allUsers,o=>(d(),z(D,{key:o.xid,value:o.xid,title:o.name},{default:a(()=>[c(i(o.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):g("",!0),e(s,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[e(P,{value:t.filters.year,"onUpdate:value":y[1]||(y[1]=o=>t.filters.year=o),placeholder:n.$t("common.select_default_text",[n.$t("holiday.year")]),picker:"year",onChange:t.filterData,style:{width:"100%"},allowClear:!1},null,8,["value","placeholder","onChange"])]),_:1}),e(s,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[e(O,{value:t.filters.month,"onUpdate:value":y[2]||(y[2]=o=>t.filters.month=o),placeholder:n.$t("common.select_default_text",[n.$t("holiday.month")]),allowClear:!1,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:t.filterData},{default:a(()=>[(d(!0),_(v,null,V(t.monthArrays,o=>(d(),z(D,{key:o.name,value:o.value},{default:a(()=>[c(i(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[h("div",Me,[e(k,{gutter:16},{default:a(()=>[e(s,{xs:24,sm:24,md:8,lg:5},{default:a(()=>[e(f,null,{default:a(()=>[e(m,{title:n.$t("attendance.present_working_days"),value:`${t.totalPresentDays} / ${t.workingDays} ${n.$t("attendance.days")}`,"value-style":{color:t.totalPresentDays>=t.workingDays?"#3f8600":"#cf1322"},style:{"margin-right":"50px"}},null,8,["title","value","value-style"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:5},{default:a(()=>[e(f,null,{default:a(()=>[e(m,{title:n.$t("attendance.total_office_time"),value:t.formatMinutes(t.totalOfficeTime),"value-style":{color:"#3f8600"}},null,8,["title","value"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:6},{default:a(()=>[e(f,null,{default:a(()=>[e(m,{title:n.$t("attendance.total_worked_time"),value:`${t.formatMinutes(t.clockInDuration)} (${t.clockInDurationPercentage}%)`,"value-style":{color:t.clockInDuration>=t.totalOfficeTime?"#3f8600":"#cf1322"}},null,8,["title","value","value-style"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:5},{default:a(()=>[e(f,null,{default:a(()=>[e(m,{title:n.$t("attendance.late"),value:t.totalLateDaysPercentage>0?`${t.totalLateDays} ${n.$t("attendance.days")} (${t.totalLateDaysPercentage}%)`:"--",class:"demo-class","value-style":{color:"#cf1322"}},null,8,["title","value"])]),_:1})]),_:1}),e(s,{xs:24,sm:24,md:8,lg:3},{default:a(()=>[e(f,null,{default:a(()=>[e(m,{title:n.$t("attendance.half_days"),value:`${t.halfDayCount}`,class:"demo-class","value-style":{color:"#cf1322"}},null,8,["title","value"])]),_:1})]),_:1})]),_:1})]),e(k,null,{default:a(()=>[e(s,{span:24},{default:a(()=>[h("div",Oe,[e(Y,{columns:t.columns,"row-key":o=>o.xid,"data-source":t.table.data,pagination:!1,loading:t.table.loading,size:"middle"},{bodyCell:a(({column:o,record:l})=>[o.dataIndex=="date"?(d(),_(v,{key:0},[c(i(t.formatDate(l.date)),1)],64)):g("",!0),o.dataIndex=="status"?(d(),z(S,{key:1,status:l.status},null,8,["status"])):g("",!0),o.dataIndex=="clock_in"?(d(),_(v,{key:2},[c(i(l.clock_in?t.formatTime(l.clock_in):"-")+" ",1),l.is_late&&l.late_time>0?(d(),_("span",Pe," ("+i(t.formatMinutes(l.late_time))+" "+i(n.$t("attendance.late"))+") ",1)):g("",!0)],64)):g("",!0),o.dataIndex=="clock_out"?(d(),_(v,{key:3},[c(i(l.clock_out?t.formatTime(l.clock_out):"-"),1)],64)):g("",!0),o.dataIndex=="clocked_time"?(d(),_(v,{key:4},[t.officeTime>0&&l.worked_time>0?(d(),_("span",Se,[e(T,null,{title:a(()=>[l.late_time>0?(d(),_("span",Te,[c(i(n.$t("attendance.late"))+" : "+i(t.formatMinutes(l.late_time))+" ",1),ze])):g("",!0),c(" "+i(n.$t("attendance.clocked_time"))+" : "+i(t.formatMinutes(l.worked_time)),1)]),default:a(()=>[e(A,{strokeColor:"#52c41a",size:"small",showInfo:!1,percent:l.worked_time/t.officeTime*100,success:{percent:l.late_time/t.officeTime*100,strokeColor:"#ff4d4f"}},null,8,["percent","success"])]),_:2},1024),Be,c(" "+i(t.formatMinutes(l.worked_time)),1)])):(d(),_("span",Fe," - "))],64)):g("",!0),o.dataIndex=="other_details"?(d(),_(v,{key:5},[l.clock_in&&l.clock_in_ip||l.clock_in&&l.clock_out_ip?(d(),_("span",Le,[h("span",null,[e(I,{strong:""},{default:a(()=>[c(i(n.$t("attendance.clock_in_ip"))+" : ",1)]),_:1}),c(" "+i(l.clock_in&&l.clock_in_ip?l.clock_in_ip:""),1)]),Ne,h("span",null,[e(I,{strong:""},{default:a(()=>[c(i(n.$t("attendance.clock_out_ip"))+" : ",1)]),_:1}),c(" "+i(l.clock_in&&l.clock_out_ip?l.clock_out_ip:""),1)])])):(d(),_("span",Ye," - "))],64)):g("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Xe=q(Ie,[["render",He]]);export{Xe as default};
